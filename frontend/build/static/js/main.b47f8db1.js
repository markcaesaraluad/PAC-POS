/*! For license information please see main.b47f8db1.js.LICENSE.txt */
(()=>{var e={43:(e,t,n)=>{"use strict";e.exports=n(202)},153:(e,t,n)=>{"use strict";var r=n(43),a=Symbol.for("react.element"),s=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,l=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)i.call(t,r)&&!o.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:a,type:e,key:c,ref:u,props:s,_owner:l.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},h=Object.assign,x={};function g(e,t,n){this.props=e,this.context=t,this.refs=x,this.updater=n||f}function v(){}function y(e,t,n){this.props=e,this.context=t,this.refs=x,this.updater=n||f}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=g.prototype;var b=y.prototype=new v;b.constructor=y,h(b,g.prototype),b.isPureReactComponent=!0;var w=Array.isArray,j=Object.prototype.hasOwnProperty,N={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var a,s={},i=null,l=null;if(null!=t)for(a in void 0!==t.ref&&(l=t.ref),void 0!==t.key&&(i=""+t.key),t)j.call(t,a)&&!k.hasOwnProperty(a)&&(s[a]=t[a]);var o=arguments.length-2;if(1===o)s.children=r;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(a in o=e.defaultProps)void 0===s[a]&&(s[a]=o[a]);return{$$typeof:n,type:e,key:i,ref:l,props:s,_owner:N.current}}function _(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function T(e,t,a,s,i){var l=typeof e;"undefined"!==l&&"boolean"!==l||(e=null);var o=!1;if(null===e)o=!0;else switch(l){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case n:case r:o=!0}}if(o)return i=i(o=e),e=""===s?"."+C(o,0):s,w(i)?(a="",null!=e&&(a=e.replace(E,"$&/")+"/"),T(i,t,a,"",function(e){return e})):null!=i&&(_(i)&&(i=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,a+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(E,"$&/")+"/")+e)),t.push(i)),1;if(o=0,s=""===s?".":s+":",w(e))for(var c=0;c<e.length;c++){var u=s+C(l=e[c],c);o+=T(l,t,a,u,i)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(l=e.next()).done;)o+=T(l=l.value,t,a,u=s+C(l,c++),i);else if("object"===l)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function O(e,t,n){if(null==e)return e;var r=[],a=0;return T(e,r,"","",function(e){return t.call(n,e,a++)}),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var F={current:null},L={transition:null},R={ReactCurrentDispatcher:F,ReactCurrentBatchConfig:L,ReactCurrentOwner:N};function A(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:O,forEach:function(e,t,n){O(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return O(e,function(){t++}),t},toArray:function(e){return O(e,function(e){return e})||[]},only:function(e){if(!_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=a,t.Profiler=i,t.PureComponent=y,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.act=A,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=h({},e.props),s=e.key,i=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,l=N.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)j.call(t,c)&&!k.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==o?o[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=r;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];a.children=o}return{$$typeof:n,type:e.type,key:s,ref:i,props:a,_owner:l}},t.createContext=function(e){return(e={$$typeof:o,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:m,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=L.transition;L.transition={};try{e()}finally{L.transition=t}},t.unstable_act=A,t.useCallback=function(e,t){return F.current.useCallback(e,t)},t.useContext=function(e){return F.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return F.current.useDeferredValue(e)},t.useEffect=function(e,t){return F.current.useEffect(e,t)},t.useId=function(){return F.current.useId()},t.useImperativeHandle=function(e,t,n){return F.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return F.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return F.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return F.current.useMemo(e,t)},t.useReducer=function(e,t,n){return F.current.useReducer(e,t,n)},t.useRef=function(e){return F.current.useRef(e)},t.useState=function(e){return F.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return F.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return F.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<s(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,i=a>>>1;r<i;){var l=2*(r+1)-1,o=e[l],c=l+1,u=e[c];if(0>s(o,n))c<a&&0>s(u,o)?(e[r]=u,e[c]=n,r=c):(e[r]=o,e[l]=n,r=l);else{if(!(c<a&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var c=[],u=[],d=1,m=null,p=3,f=!1,h=!1,x=!1,g="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)a(u);else{if(!(t.startTime<=e))break;a(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(x=!1,b(e),!h)if(null!==r(c))h=!0,L(j);else{var t=r(u);null!==t&&R(w,t.startTime-e)}}function j(e,n){h=!1,x&&(x=!1,v(_),_=-1),f=!0;var s=p;try{for(b(n),m=r(c);null!==m&&(!(m.expirationTime>n)||e&&!T());){var i=m.callback;if("function"===typeof i){m.callback=null,p=m.priorityLevel;var l=i(m.expirationTime<=n);n=t.unstable_now(),"function"===typeof l?m.callback=l:m===r(c)&&a(c),b(n)}else a(c);m=r(c)}if(null!==m)var o=!0;else{var d=r(u);null!==d&&R(w,d.startTime-n),o=!1}return o}finally{m=null,p=s,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var N,k=!1,S=null,_=-1,E=5,C=-1;function T(){return!(t.unstable_now()-C<E)}function O(){if(null!==S){var e=t.unstable_now();C=e;var n=!0;try{n=S(!0,e)}finally{n?N():(k=!1,S=null)}}else k=!1}if("function"===typeof y)N=function(){y(O)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,F=P.port2;P.port1.onmessage=O,N=function(){F.postMessage(null)}}else N=function(){g(O,0)};function L(e){S=e,k||(k=!0,N())}function R(e,n){_=g(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){h||f||(h=!0,L(j))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,a,s){var i=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?i+s:i:s=i,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:d++,callback:a,priorityLevel:e,startTime:s,expirationTime:l=s+l,sortIndex:-1},s>i?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(x?(v(_),_=-1):x=!0,R(w,s-i))):(e.sortIndex=l,n(c,e),h||f||(h=!0,L(j))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},391:(e,t,n)=>{"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},517:e=>{const t=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['\u2019](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,n=e=>e.match(t)||[],r=e=>e[0].toUpperCase()+e.slice(1),a=(e,t)=>n(e).join(t).toLowerCase(),s=e=>n(e).reduce((e,t)=>"".concat(e).concat(e?t[0].toUpperCase()+t.slice(1).toLowerCase():t.toLowerCase()),"");e.exports={words:n,upperFirst:r,camelCase:s,pascalCase:e=>r(s(e)),snakeCase:e=>a(e,"_"),kebabCase:e=>a(e,"-"),sentenceCase:e=>r(a(e," ")),titleCase:e=>n(e).map(r).join(" ")}},575:e=>{"use strict";function t(e){this._maxSize=e,this.clear()}t.prototype.clear=function(){this._size=0,this._values=Object.create(null)},t.prototype.get=function(e){return this._values[e]},t.prototype.set=function(e,t){return this._size>=this._maxSize&&this.clear(),e in this._values||this._size++,this._values[e]=t};var n=/[^.^\]^[]+|(?=\[\]|\.\.)/g,r=/^\d+$/,a=/^\d/,s=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,i=/^\s*(['"]?)(.*?)(\1)\s*$/,l=new t(512),o=new t(512),c=new t(512);function u(e){return l.get(e)||l.set(e,d(e).map(function(e){return e.replace(i,"$2")}))}function d(e){return e.match(n)||[""]}function m(e){return"string"===typeof e&&e&&-1!==["'",'"'].indexOf(e.charAt(0))}function p(e){return!m(e)&&(function(e){return e.match(a)&&!e.match(r)}(e)||function(e){return s.test(e)}(e))}e.exports={Cache:t,split:d,normalizePath:u,setter:function(e){var t=u(e);return o.get(e)||o.set(e,function(e,n){for(var r=0,a=t.length,s=e;r<a-1;){var i=t[r];if("__proto__"===i||"constructor"===i||"prototype"===i)return e;s=s[t[r++]]}s[t[r]]=n})},getter:function(e,t){var n=u(e);return c.get(e)||c.set(e,function(e){for(var r=0,a=n.length;r<a;){if(null==e&&t)return;e=e[n[r++]]}return e})},join:function(e){return e.reduce(function(e,t){return e+(m(t)||r.test(t)?"["+t+"]":(e?".":"")+t)},"")},forEach:function(e,t,n){!function(e,t,n){var r,a,s,i,l=e.length;for(a=0;a<l;a++)(r=e[a])&&(p(r)&&(r='"'+r+'"'),s=!(i=m(r))&&/^\d+$/.test(r),t.call(n,r,i,s,a,e))}(Array.isArray(e)?e:d(e),t,n)}}},579:(e,t,n)=>{"use strict";e.exports=n(153)},704:e=>{function t(e,t){var n=e.length,r=new Array(n),a={},s=n,i=function(e){for(var t=new Map,n=0,r=e.length;n<r;n++){var a=e[n];t.has(a[0])||t.set(a[0],new Set),t.has(a[1])||t.set(a[1],new Set),t.get(a[0]).add(a[1])}return t}(t),l=function(e){for(var t=new Map,n=0,r=e.length;n<r;n++)t.set(e[n],n);return t}(e);for(t.forEach(function(e){if(!l.has(e[0])||!l.has(e[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});s--;)a[s]||o(e[s],s,new Set);return r;function o(e,t,s){if(s.has(e)){var c;try{c=", node was:"+JSON.stringify(e)}catch(m){c=""}throw new Error("Cyclic dependency"+c)}if(!l.has(e))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(e));if(!a[t]){a[t]=!0;var u=i.get(e)||new Set;if(t=(u=Array.from(u)).length){s.add(e);do{var d=u[--t];o(d,l.get(d),s)}while(t);s.delete(e)}r[--n]=e}}}e.exports=function(e){return t(function(e){for(var t=new Set,n=0,r=e.length;n<r;n++){var a=e[n];t.add(a[0]),t.add(a[1])}return Array.from(t)}(e),e)},e.exports.array=t},730:(e,t,n)=>{"use strict";var r=n(43),a=n(853);function s(e){for(var t="https://pos-upgrade-1.preview.emergentagent.com",headers:{"Content-Type":"application/json"}});ma.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),ma.interceptors.response.use(e=>e,e=>{var t,n;401===(null===(t=e.response)||void 0===t?void 0:t.status)&&(localStorage.removeItem("token"),window.location.href="/login");return[400,401,403,404,422].includes(null===(n=e.response)||void 0===n?void 0:n.status)||da.error("Something went wrong. Please try again."),Promise.reject(e)});const pa=e=>ma.post("/api/auth/login",e),fa=()=>ma.get("/api/auth/me"),ha=()=>ma.get("/api/super-admin/businesses"),xa=e=>ma.post("/api/super-admin/businesses",e),ga=(e,t)=>ma.put("/api/super-admin/businesses/".concat(e,"/status"),{status:t}),va=()=>ma.get("/api/business/info"),ya=e=>ma.put("/api/business/settings",e),ba=e=>ma.put("/api/business/details",e),wa=e=>{const t=new FormData;return t.append("file",e),ma.post("/api/business/logo-upload",t,{headers:{"Content-Type":"multipart/form-data"}})},ja=()=>ma.delete("/api/business/logo"),Na=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ma.get("/api/products",{params:e})},ka=e=>ma.post("/api/products",e),Sa=(e,t)=>ma.put("/api/products/".concat(e),t),_a=e=>ma.delete("/api/products/".concat(e)),Ea=e=>ma.get("/api/products/barcode/".concat(e)),Ca=e=>ma.get("/api/products/".concat(e,"/cost-history")),Ta=e=>{const t=new FormData;return t.append("file",e),ma.post("/api/products/bulk-import",t,{headers:{"Content-Type":"multipart/form-data"}})},Oa=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ma.get("/api/products/export",{params:e,responseType:"blob"})},Pa=(e,t)=>ma.post("/api/products/".concat(e,"/stock-adjustment"),t),Fa=(e,t)=>ma.patch("/api/products/".concat(e,"/status"),{status:t}),La=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ma.post("/api/products/".concat(e,"/duplicate"),t)},Ra=(e,t)=>ma.patch("/api/products/".concat(e,"/quick-edit"),t),Aa=()=>ma.get("/api/categories"),Da=e=>ma.post("/api/categories",e),Ia=(e,t)=>ma.put("/api/categories/".concat(e),t),za=e=>ma.delete("/api/categories/".concat(e)),Ma=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ma.get("/api/customers",{params:e})},Ua=e=>ma.post("/api/customers",e),Ba=(e,t)=>ma.put("/api/customers/".concat(e),t),Va=e=>ma.delete("/api/customers/".concat(e)),Ha=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ma.get("/api/sales",{params:e})},qa=e=>ma.post("/api/sales",e),$a=e=>ma.get("/api/sales/daily-summary/stats",{params:{date:e}}),Wa=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ma.get("/api/invoices",{params:e})},Ka=e=>ma.post("/api/invoices",e),Za=function(){const e={params:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},responseType:"blob"};return ma.get("/api/reports/sales",e)},Ga=function(){const e={params:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},responseType:"blob"};return ma.get("/api/reports/inventory",e)},Qa=function(){const e={params:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},responseType:"blob"};return ma.get("/api/reports/customers",e)},Ya=function(){const e={params:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},responseType:"blob"};return ma.get("/api/reports/profit",e)},Ja=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ma.get("/api/reports/daily-summary",{params:e})};var Xa=n(579);const es=(0,r.createContext)(),ts=(e,t)=>{switch(t.type){case"SET_LOADING":return Ne(Ne({},e),{},{loading:t.payload});case"LOGIN_SUCCESS":return localStorage.setItem("token",t.payload.access_token),Ne(Ne({},e),{},{user:t.payload.user,business:t.payload.business,token:t.payload.access_token,loading:!1});case"LOGOUT":return localStorage.removeItem("token"),Ne(Ne({},e),{},{user:null,business:null,token:null,loading:!1});case"UPDATE_USER":return Ne(Ne({},e),{},{user:t.payload});default:return e}},ns={user:null,business:null,token:localStorage.getItem("token"),loading:!0},rs=e=>{let{children:t}=e;const[n,a]=(0,r.useReducer)(ts,ns);(0,r.useEffect)(()=>{(async()=>{const e=localStorage.getItem("token");if(e)try{const t=await fa();let r=null;if("super_admin"!==t.data.role)try{r=(await va()).data}catch(n){console.error("Failed to load business info:",n)}a({type:"LOGIN_SUCCESS",payload:{access_token:e,user:t.data,business:r}})}catch(r){var t;console.error("Auth check failed:",r),401===(null===(t=r.response)||void 0===t?void 0:t.status)?a({type:"LOGOUT"}):a({type:"SET_LOADING",payload:!1})}else a({type:"SET_LOADING",payload:!1})})()},[]);const s=Ne(Ne({},n),{},{login:async e=>{try{a({type:"SET_LOADING",payload:!0});const t=await pa(e);return a({type:"LOGIN_SUCCESS",payload:t.data}),da.success("Login successful!"),t.data}catch(r){var t,n;a({type:"SET_LOADING",payload:!1});const e=(null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.detail)||"Login failed";throw da.error(e),r}},logout:()=>{a({type:"LOGOUT"}),da.success("Logged out successfully")}});return(0,Xa.jsx)(es.Provider,{value:s,children:t})},as=()=>{const e=(0,r.useContext)(es);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},ss={USD:"$",EUR:"\u20ac",GBP:"\xa3",JPY:"\xa5",AUD:"A$",CAD:"C$",CHF:"CHF ",CNY:"\xa5",SEK:"kr ",NZD:"NZ$",MXN:"$",SGD:"S$",HKD:"HK$",NOK:"kr ",PHP:"\u20b1",THB:"\u0e3f",TRY:"\u20ba",RUB:"\u20bd",INR:"\u20b9",KRW:"\u20a9",BRL:"R$",ZAR:"R ",PLN:"z\u0142 ",CZK:"K\u010d ",DKK:"kr ",HUF:"Ft ",BGN:"\u043b\u0432 ",RON:"lei ",HRK:"kn ",ISK:"kr ",LTL:"Lt ",LVL:"Ls ",EEK:"kr ",MTL:"Lm ",CYP:"\xa3"},is={USD:"en-US",EUR:"de-DE",GBP:"en-GB",JPY:"ja-JP",AUD:"en-AU",CAD:"en-CA",CHF:"de-CH",CNY:"zh-CN",SEK:"sv-SE",NZD:"en-NZ",MXN:"es-MX",SGD:"en-SG",HKD:"zh-HK",NOK:"no-NO",PHP:"en-PH",THB:"th-TH",TRY:"tr-TR",RUB:"ru-RU",INR:"en-IN",KRW:"ko-KR",BRL:"pt-BR",ZAR:"en-ZA",PLN:"pl-PL",CZK:"cs-CZ",DKK:"da-DK",HUF:"hu-HU",BGN:"bg-BG",RON:"ro-RO",HRK:"hr-HR",ISK:"is-IS",LTL:"lt-LT",LVL:"lv-LV",EEK:"et-EE",MTL:"mt-MT",CYP:"el-CY"},ls=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"USD";return ss[e.toUpperCase()]||e+" "},os=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD",n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=parseFloat(e)||0;if(n){const e=ls(t);return["NOK","SEK","PLN","CZK","DKK","HUF","BGN","RON","HRK","ISK","LTL","LVL","EEK"].includes(t.toUpperCase())?"".concat(r.toFixed(2)," ").concat(e.trim()):"".concat(e).concat(r.toFixed(2))}return"".concat(r.toFixed(2)," ").concat(t.toUpperCase())},cs=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";const n=parseFloat(e)||0,r=is[t.toUpperCase()]||"en-US";try{return new Intl.NumberFormat(r,{style:"currency",currency:t.toUpperCase(),minimumFractionDigits:2,maximumFractionDigits:2}).format(n)}catch(a){return console.warn("Currency formatting failed for ".concat(t,", using fallback")),os(e,t)}},us=()=>[{code:"USD",symbol:"$",name:"US Dollar"},{code:"EUR",symbol:"\u20ac",name:"Euro"},{code:"GBP",symbol:"\xa3",name:"British Pound"},{code:"JPY",symbol:"\xa5",name:"Japanese Yen"},{code:"AUD",symbol:"A$",name:"Australian Dollar"},{code:"CAD",symbol:"C$",name:"Canadian Dollar"},{code:"CHF",symbol:"CHF",name:"Swiss Franc"},{code:"CNY",symbol:"\xa5",name:"Chinese Yuan"},{code:"SEK",symbol:"kr",name:"Swedish Krona"},{code:"NZD",symbol:"NZ$",name:"New Zealand Dollar"},{code:"MXN",symbol:"$",name:"Mexican Peso"},{code:"SGD",symbol:"S$",name:"Singapore Dollar"},{code:"HKD",symbol:"HK$",name:"Hong Kong Dollar"},{code:"NOK",symbol:"kr",name:"Norwegian Krone"},{code:"PHP",symbol:"\u20b1",name:"Philippine Peso"},{code:"THB",symbol:"\u0e3f",name:"Thai Baht"},{code:"TRY",symbol:"\u20ba",name:"Turkish Lira"},{code:"RUB",symbol:"\u20bd",name:"Russian Ruble"},{code:"INR",symbol:"\u20b9",name:"Indian Rupee"},{code:"KRW",symbol:"\u20a9",name:"South Korean Won"},{code:"BRL",symbol:"R$",name:"Brazilian Real"},{code:"ZAR",symbol:"R",name:"South African Rand"},{code:"PLN",symbol:"z\u0142",name:"Polish Zloty"},{code:"CZK",symbol:"K\u010d",name:"Czech Koruna"},{code:"DKK",symbol:"kr",name:"Danish Krone"},{code:"HUF",symbol:"Ft",name:"Hungarian Forint"}].sort((e,t)=>e.name.localeCompare(t.name)),ds=(0,r.createContext)(),ms=()=>{const e=(0,r.useContext)(ds);if(!e)throw new Error("useCurrency must be used within a CurrencyProvider");return e},ps=e=>{let{children:t}=e;const[n,a]=(0,r.useState)("USD"),[s,i]=(0,r.useState)(!0),l=async()=>{try{var e,t;const n=(null===(e=(await va()).data)||void 0===e||null===(t=e.settings)||void 0===t?void 0:t.currency)||"USD";a(n)}catch(n){console.error("Failed to load currency settings:",n),a("USD")}finally{i(!1)}};(0,r.useEffect)(()=>{l()},[]);const o={currency:n,setCurrency:a,loading:s,formatAmount:function(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?cs(e,n):os(e,n)},formatAmountWithCurrency:function(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?cs(e,t):os(e,t)},refreshCurrency:async()=>{await l()}};return(0,Xa.jsx)(ds.Provider,{value:o,children:t})},fs=e=>{let{size:t="sm"}=e;return(0,Xa.jsx)("div",{className:"".concat({sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"}[t]," animate-spin rounded-full border-2 border-gray-300 border-t-primary-600")})},hs=e=>{let{size:t="md",message:n="Loading..."}=e;return(0,Xa.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,Xa.jsxs)("div",{className:"text-center",children:[(0,Xa.jsx)("div",{className:"".concat({sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12",xl:"w-16 h-16"}[t]," animate-spin rounded-full border-4 border-gray-300 border-t-primary-600 mx-auto mb-4")}),(0,Xa.jsx)("p",{className:"text-gray-600",children:n})]})})};function xs(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}const gs=["_f"],vs=["name"],ys=["_f"],bs=["ref","message","type"],ws=["formControl"];var js=e=>"checkbox"===e.type,Ns=e=>e instanceof Date,ks=e=>null==e;const Ss=e=>"object"===typeof e;var _s=e=>!ks(e)&&!Array.isArray(e)&&Ss(e)&&!Ns(e),Es=e=>_s(e)&&e.target?js(e.target)?e.target.checked:e.target.value:e,Cs=(e,t)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(t)),Ts="undefined"!==typeof window&&"undefined"!==typeof window.HTMLElement&&"undefined"!==typeof document;function Os(e){let t;const n=Array.isArray(e),r="undefined"!==typeof FileList&&e instanceof FileList;if(e instanceof Date)t=new Date(e);else{if(Ts&&(e instanceof Blob||r)||!n&&!_s(e))return e;if(t=n?[]:Object.create(Object.getPrototypeOf(e)),n||(e=>{const t=e.constructor&&e.constructor.prototype;return _s(t)&&t.hasOwnProperty("isPrototypeOf")})(e))for(const n in e)e.hasOwnProperty(n)&&(t[n]=Os(e[n]));else t=e}return t}var Ps=e=>/^\w*$/.test(e),Fs=e=>void 0===e,Ls=e=>Array.isArray(e)?e.filter(Boolean):[],Rs=e=>Ls(e.replace(/["|']|\]/g,"").split(/\.|\[/)),As=(e,t,n)=>{if(!t||!_s(e))return n;const r=(Ps(t)?[t]:Rs(t)).reduce((e,t)=>ks(e)?e:e[t],e);return Fs(r)||r===e?Fs(e[t])?n:e[t]:r},Ds=e=>"boolean"===typeof e,Is=(e,t,n)=>{let r=-1;const a=Ps(t)?[t]:Rs(t),s=a.length,i=s-1;for(;++r<s;){const t=a[r];let s=n;if(r!==i){const n=e[t];s=_s(n)||Array.isArray(n)?n:isNaN(+a[r+1])?{}:[]}if("__proto__"===t||"constructor"===t||"prototype"===t)return;e[t]=s,e=e[t]}};const zs="blur",Ms="focusout",Us="onBlur",Bs="onChange",Vs="onSubmit",Hs="onTouched",qs="all",$s="max",Ws="min",Ks="maxLength",Zs="minLength",Gs="pattern",Qs="required",Ys="validate",Js=r.createContext(null);Js.displayName="HookFormContext";var Xs=function(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const a={defaultValues:t._defaultValues};for(const s in e)Object.defineProperty(a,s,{get:()=>{const a=s;return t._proxyFormState[a]!==qs&&(t._proxyFormState[a]=!r||qs),n&&(n[a]=!0),e[a]}});return a};const ei="undefined"!==typeof window?r.useLayoutEffect:r.useEffect;var ti=e=>"string"===typeof e,ni=(e,t,n,r,a)=>ti(e)?(r&&t.watch.add(e),As(n,e,a)):Array.isArray(e)?e.map(e=>(r&&t.watch.add(e),As(n,e))):(r&&(t.watchAll=!0),n),ri=e=>ks(e)||!Ss(e);function ai(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new WeakSet;if(ri(e)||ri(t))return e===t;if(Ns(e)&&Ns(t))return e.getTime()===t.getTime();const r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;if(n.has(e)||n.has(t))return!0;n.add(e),n.add(t);for(const s of r){const r=e[s];if(!a.includes(s))return!1;if("ref"!==s){const e=t[s];if(Ns(r)&&Ns(e)||_s(r)&&_s(e)||Array.isArray(r)&&Array.isArray(e)?!ai(r,e,n):r!==e)return!1}}return!0}var si=(e,t,n,r,a)=>t?Ne(Ne({},n[e]),{},{types:Ne(Ne({},n[e]&&n[e].types?n[e].types:{}),{},{[r]:a||!0})}):{},ii=e=>Array.isArray(e)?e:[e],li=()=>{let e=[];return{get observers(){return e},next:t=>{for(const n of e)n.next&&n.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter(e=>e!==t)}}),unsubscribe:()=>{e=[]}}},oi=e=>_s(e)&&!Object.keys(e).length,ci=e=>"file"===e.type,ui=e=>"function"===typeof e,di=e=>{if(!Ts)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},mi=e=>"select-multiple"===e.type,pi=e=>"radio"===e.type,fi=e=>di(e)&&e.isConnected;function hi(e,t){const n=Array.isArray(t)?t:Ps(t)?[t]:Rs(t),r=1===n.length?e:function(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=Fs(e)?r++:e[t[r++]];return e}(e,n),a=n.length-1,s=n[a];return r&&delete r[s],0!==a&&(_s(r)&&oi(r)||Array.isArray(r)&&function(e){for(const t in e)if(e.hasOwnProperty(t)&&!Fs(e[t]))return!1;return!0}(r))&&hi(e,n.slice(0,-1)),e}var xi=e=>{for(const t in e)if(ui(e[t]))return!0;return!1};function gi(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Array.isArray(e);if(_s(e)||n)for(const r in e)Array.isArray(e[r])||_s(e[r])&&!xi(e[r])?(t[r]=Array.isArray(e[r])?[]:{},gi(e[r],t[r])):ks(e[r])||(t[r]=!0);return t}function vi(e,t,n){const r=Array.isArray(e);if(_s(e)||r)for(const a in e)Array.isArray(e[a])||_s(e[a])&&!xi(e[a])?Fs(t)||ri(n[a])?n[a]=Array.isArray(e[a])?gi(e[a],[]):Ne({},gi(e[a])):vi(e[a],ks(t)?{}:t[a],n[a]):n[a]=!ai(e[a],t[a]);return n}var yi=(e,t)=>vi(e,t,gi(t));const bi={value:!1,isValid:!1},wi={value:!0,isValid:!0};var ji=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Fs(e[0].attributes.value)?Fs(e[0].value)||""===e[0].value?wi:{value:e[0].value,isValid:!0}:wi:bi}return bi},Ni=(e,t)=>{let{valueAsNumber:n,valueAsDate:r,setValueAs:a}=t;return Fs(e)?e:n?""===e?NaN:e?+e:e:r&&ti(e)?new Date(e):a?a(e):e};const ki={isValid:!1,value:null};var Si=e=>Array.isArray(e)?e.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,ki):ki;function _i(e){const t=e.ref;return ci(t)?t.files:pi(t)?Si(e.refs).value:mi(t)?[...t.selectedOptions].map(e=>{let{value:t}=e;return t}):js(t)?ji(e.refs).value:Ni(Fs(t.value)?e.ref.value:t.value,e)}var Ei=e=>e instanceof RegExp,Ci=e=>Fs(e)?e:Ei(e)?e.source:_s(e)?Ei(e.value)?e.value.source:e.value:e,Ti=e=>({isOnSubmit:!e||e===Vs,isOnBlur:e===Us,isOnChange:e===Bs,isOnAll:e===qs,isOnTouch:e===Hs});const Oi="AsyncFunction";var Pi=e=>!!e&&!!e.validate&&!!(ui(e.validate)&&e.validate.constructor.name===Oi||_s(e.validate)&&Object.values(e.validate).find(e=>e.constructor.name===Oi)),Fi=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))));const Li=(e,t,n,r)=>{for(const a of n||Object.keys(e)){const n=As(e,a);if(n){const{_f:e}=n,s=xs(n,gs);if(e){if(e.refs&&e.refs[0]&&t(e.refs[0],a)&&!r)return!0;if(e.ref&&t(e.ref,e.name)&&!r)return!0;if(Li(s,t))break}else if(_s(s)&&Li(s,t))break}}};function Ri(e,t,n){const r=As(e,n);if(r||Ps(n))return{error:r,name:n};const a=n.split(".");for(;a.length;){const r=a.join("."),s=As(t,r),i=As(e,r);if(s&&!Array.isArray(s)&&n!==r)return{name:n};if(i&&i.type)return{name:r,error:i};if(i&&i.root&&i.root.type)return{name:"".concat(r,".root"),error:i.root};a.pop()}return{name:n}}var Ai=(e,t,n)=>{const r=ii(As(e,n));return Is(r,"root",t[n]),Is(e,n,r),e},Di=e=>ti(e);function Ii(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"validate";if(Di(e)||Array.isArray(e)&&e.every(Di)||Ds(e)&&!e)return{type:n,message:Di(e)?e:"",ref:t}}var zi=e=>_s(e)&&!Ei(e)?e:{value:e,message:""},Mi=async(e,t,n,r,a,s)=>{const{ref:i,refs:l,required:o,maxLength:c,minLength:u,min:d,max:m,pattern:p,validate:f,name:h,valueAsNumber:x,mount:g}=e._f,v=As(n,h);if(!g||t.has(h))return{};const y=l?l[0]:i,b=e=>{a&&y.reportValidity&&(y.setCustomValidity(Ds(e)?"":e||""),y.reportValidity())},w={},j=pi(i),N=js(i),k=j||N,S=(x||ci(i))&&Fs(i.value)&&Fs(v)||di(i)&&""===i.value||""===v||Array.isArray(v)&&!v.length,_=si.bind(null,h,r,w),E=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ks,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Zs;const s=e?t:n;w[h]=Ne({type:e?r:a,message:s,ref:i},_(e?r:a,s))};if(s?!Array.isArray(v)||!v.length:o&&(!k&&(S||ks(v))||Ds(v)&&!v||N&&!ji(l).isValid||j&&!Si(l).isValid)){const{value:e,message:t}=Di(o)?{value:!!o,message:o}:zi(o);if(e&&(w[h]=Ne({type:Qs,message:t,ref:y},_(Qs,t)),!r))return b(t),w}if(!S&&(!ks(d)||!ks(m))){let e,t;const n=zi(m),a=zi(d);if(ks(v)||isNaN(v)){const r=i.valueAsDate||new Date(v),s=e=>new Date((new Date).toDateString()+" "+e),l="time"==i.type,o="week"==i.type;ti(n.value)&&v&&(e=l?s(v)>s(n.value):o?v>n.value:r>new Date(n.value)),ti(a.value)&&v&&(t=l?s(v)<s(a.value):o?v<a.value:r<new Date(a.value))}else{const r=i.valueAsNumber||(v?+v:v);ks(n.value)||(e=r>n.value),ks(a.value)||(t=r<a.value)}if((e||t)&&(E(!!e,n.message,a.message,$s,Ws),!r))return b(w[h].message),w}if((c||u)&&!S&&(ti(v)||s&&Array.isArray(v))){const e=zi(c),t=zi(u),n=!ks(e.value)&&v.length>+e.value,a=!ks(t.value)&&v.length<+t.value;if((n||a)&&(E(n,e.message,t.message),!r))return b(w[h].message),w}if(p&&!S&&ti(v)){const{value:e,message:t}=zi(p);if(Ei(e)&&!v.match(e)&&(w[h]=Ne({type:Gs,message:t,ref:i},_(Gs,t)),!r))return b(t),w}if(f)if(ui(f)){const e=Ii(await f(v,n),y);if(e&&(w[h]=Ne(Ne({},e),_(Ys,e.message)),!r))return b(e.message),w}else if(_s(f)){let e={};for(const t in f){if(!oi(e)&&!r)break;const a=Ii(await f[t](v,n),y,t);a&&(e=Ne(Ne({},a),_(t,a.message)),b(a.message),r&&(w[h]=e))}if(!oi(e)&&(w[h]=Ne({ref:y},e),!r))return w}return b(!0),w};const Ui={mode:Vs,reValidateMode:Bs,shouldFocusError:!0};function Bi(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Ne(Ne({},Ui),t),r={submitCount:0,isDirty:!1,isReady:!1,isLoading:ui(n.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:n.errors||{},disabled:n.disabled||!1},a={},s=(_s(n.defaultValues)||_s(n.values))&&Os(n.defaultValues||n.values)||{},i=n.shouldUnregister?{}:Os(s),l={action:!1,mount:!1,watch:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let d=Ne({},u);const m={array:li(),state:li()},p=n.criteriaMode===qs,f=async e=>{if(!n.disabled&&(u.isValid||d.isValid||e)){const e=n.resolver?oi((await y()).errors):await b(a,!0);e!==r.isValid&&m.state.next({isValid:e})}},h=(e,t)=>{!n.disabled&&(u.isValidating||u.validatingFields||d.isValidating||d.validatingFields)&&((e||Array.from(o.mount)).forEach(e=>{e&&(t?Is(r.validatingFields,e,t):hi(r.validatingFields,e))}),m.state.next({validatingFields:r.validatingFields,isValidating:!oi(r.validatingFields)}))},x=(e,t,n,r)=>{const o=As(a,e);if(o){const a=As(i,e,Fs(n)?As(s,e):n);Fs(a)||r&&r.defaultChecked||t?Is(i,e,t?a:_i(o._f)):N(e,a),l.mount&&f()}},g=(e,t,a,i,l)=>{let o=!1,c=!1;const p={name:e};if(!n.disabled){if(!a||i){(u.isDirty||d.isDirty)&&(c=r.isDirty,r.isDirty=p.isDirty=w(),o=c!==p.isDirty);const n=ai(As(s,e),t);c=!!As(r.dirtyFields,e),n?hi(r.dirtyFields,e):Is(r.dirtyFields,e,!0),p.dirtyFields=r.dirtyFields,o=o||(u.dirtyFields||d.dirtyFields)&&c!==!n}if(a){const t=As(r.touchedFields,e);t||(Is(r.touchedFields,e,a),p.touchedFields=r.touchedFields,o=o||(u.touchedFields||d.touchedFields)&&t!==a)}o&&l&&m.state.next(p)}return o?p:{}},v=(t,a,s,i)=>{const l=As(r.errors,t),o=(u.isValid||d.isValid)&&Ds(a)&&r.isValid!==a;var p;if(n.delayError&&s?(p=()=>((e,t)=>{Is(r.errors,e,t),m.state.next({errors:r.errors})})(t,s),e=e=>{clearTimeout(c),c=setTimeout(p,e)},e(n.delayError)):(clearTimeout(c),e=null,s?Is(r.errors,t,s):hi(r.errors,t)),(s?!ai(l,s):l)||!oi(i)||o){const e=Ne(Ne(Ne({},i),o&&Ds(a)?{isValid:a}:{}),{},{errors:r.errors,name:t});r=Ne(Ne({},r),e),m.state.next(e)}},y=async e=>{h(e,!0);const t=await n.resolver(i,n.context,((e,t,n,r)=>{const a={};for(const s of e){const e=As(t,s);e&&Is(a,s,e._f)}return{criteriaMode:n,names:[...e],fields:a,shouldUseNativeValidation:r}})(e||o.mount,a,n.criteriaMode,n.shouldUseNativeValidation));return h(e),t},b=async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{valid:!0};for(const s in e){const l=e[s];if(l){const{_f:e}=l,c=xs(l,ys);if(e){const c=o.array.has(e.name),d=l._f&&Pi(l._f);d&&u.validatingFields&&h([s],!0);const m=await Mi(l,o.disabled,i,p,n.shouldUseNativeValidation&&!t,c);if(d&&u.validatingFields&&h([s]),m[e.name]&&(a.valid=!1,t))break;!t&&(As(m,e.name)?c?Ai(r.errors,m,e.name):Is(r.errors,e.name,m[e.name]):hi(r.errors,e.name))}!oi(c)&&await b(c,t,a)}}return a.valid},w=(e,t)=>!n.disabled&&(e&&t&&Is(i,e,t),!ai(T(),s)),j=(e,t,n)=>ni(e,o,Ne({},l.mount?i:Fs(t)?s:ti(e)?{[e]:t}:t),n,t),N=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=As(a,e);let s=t;if(r){const n=r._f;n&&(!n.disabled&&Is(i,e,Ni(t,n)),s=di(n.ref)&&ks(t)?"":t,mi(n.ref)?[...n.ref.options].forEach(e=>e.selected=s.includes(e.value)):n.refs?js(n.ref)?n.refs.forEach(e=>{e.defaultChecked&&e.disabled||(Array.isArray(s)?e.checked=!!s.find(t=>t===e.value):e.checked=s===e.value||!!s)}):n.refs.forEach(e=>e.checked=e.value===s):ci(n.ref)?n.ref.value="":(n.ref.value=s,n.ref.type||m.state.next({name:e,values:Os(i)})))}(n.shouldDirty||n.shouldTouch)&&g(e,s,n.shouldTouch,n.shouldDirty,!0),n.shouldValidate&&C(e)},k=(e,t,n)=>{for(const r in t){if(!t.hasOwnProperty(r))return;const s=t[r],i=e+"."+r,l=As(a,i);(o.array.has(e)||_s(s)||l&&!l._f)&&!Ns(s)?k(i,s,n):N(i,s,n)}},S=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const c=As(a,e),p=o.array.has(e),f=Os(t);Is(i,e,f),p?(m.array.next({name:e,values:Os(i)}),(u.isDirty||u.dirtyFields||d.isDirty||d.dirtyFields)&&n.shouldDirty&&m.state.next({name:e,dirtyFields:yi(s,i),isDirty:w(e,f)})):!c||c._f||ks(f)?N(e,f,n):k(e,f,n),Fi(e,o)&&m.state.next(Ne(Ne({},r),{},{name:e})),m.state.next({name:l.mount?e:void 0,values:Os(i)})},_=async t=>{l.mount=!0;const s=t.target;let c=s.name,x=!0;const w=As(a,c),j=e=>{x=Number.isNaN(e)||Ns(e)&&isNaN(e.getTime())||ai(e,As(i,c,e))},N=Ti(n.mode),k=Ti(n.reValidateMode);if(w){let l,_;const E=s.type?_i(w._f):Es(t),T=t.type===zs||t.type===Ms,O=!((S=w._f).mount&&(S.required||S.min||S.max||S.maxLength||S.minLength||S.pattern||S.validate))&&!n.resolver&&!As(r.errors,c)&&!w._f.deps||((e,t,n,r,a)=>!a.isOnAll&&(!n&&a.isOnTouch?!(t||e):(n?r.isOnBlur:a.isOnBlur)?!e:!(n?r.isOnChange:a.isOnChange)||e))(T,As(r.touchedFields,c),r.isSubmitted,k,N),P=Fi(c,o,T);Is(i,c,E),T?s&&s.readOnly||(w._f.onBlur&&w._f.onBlur(t),e&&e(0)):w._f.onChange&&w._f.onChange(t);const F=g(c,E,T),L=!oi(F)||P;if(!T&&m.state.next({name:c,type:t.type,values:Os(i)}),O)return(u.isValid||d.isValid)&&("onBlur"===n.mode?T&&f():T||f()),L&&m.state.next(Ne({name:c},P?{}:F));if(!T&&P&&m.state.next(Ne({},r)),n.resolver){const{errors:e}=await y([c]);if(j(E),x){const t=Ri(r.errors,a,c),n=Ri(e,a,t.name||c);l=n.error,c=n.name,_=oi(e)}}else h([c],!0),l=(await Mi(w,o.disabled,i,p,n.shouldUseNativeValidation))[c],h([c]),j(E),x&&(l?_=!1:(u.isValid||d.isValid)&&(_=await b(a,!0)));x&&(w._f.deps&&C(w._f.deps),v(c,_,l,F))}var S},E=(e,t)=>{if(As(r.errors,t)&&e.focus)return e.focus(),1},C=async function(e){let t,s,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const l=ii(e);if(n.resolver){const n=await(async e=>{const{errors:t}=await y(e);if(e)for(const n of e){const e=As(t,n);e?Is(r.errors,n,e):hi(r.errors,n)}else r.errors=t;return t})(Fs(e)?e:l);t=oi(n),s=e?!l.some(e=>As(n,e)):t}else e?(s=(await Promise.all(l.map(async e=>{const t=As(a,e);return await b(t&&t._f?{[e]:t}:t)}))).every(Boolean),(s||r.isValid)&&f()):s=t=await b(a);return m.state.next(Ne(Ne(Ne({},!ti(e)||(u.isValid||d.isValid)&&t!==r.isValid?{}:{name:e}),n.resolver||!e?{isValid:t}:{}),{},{errors:r.errors})),i.shouldFocus&&!s&&Li(a,E,e?l:o.mount),s},T=e=>{const t=Ne({},l.mount?i:s);return Fs(e)?t:ti(e)?As(t,e):e.map(e=>As(t,e))},O=(e,t)=>({invalid:!!As((t||r).errors,e),isDirty:!!As((t||r).dirtyFields,e),error:As((t||r).errors,e),isValidating:!!As(r.validatingFields,e),isTouched:!!As((t||r).touchedFields,e)}),P=(e,t,n)=>{const s=(As(a,e,{_f:{}})._f||{}).ref,i=As(r.errors,e)||{},{ref:l,message:o,type:c}=i,u=xs(i,bs);Is(r.errors,e,Ne(Ne(Ne({},u),t),{},{ref:s})),m.state.next({name:e,errors:r.errors,isValid:!1}),n&&n.shouldFocus&&s&&s.focus&&s.focus()},F=e=>m.state.subscribe({next:t=>{var n,a,l;n=e.name,a=t.name,l=e.exact,n&&a&&n!==a&&!ii(n).some(e=>e&&(l?e===a:e.startsWith(a)||a.startsWith(e)))||!((e,t,n,r)=>{n(e);const{name:a}=e,s=xs(e,vs);return oi(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find(e=>t[e]===(!r||qs))})(t,e.formState||u,U,e.reRenderRoot)||e.callback(Ne(Ne(Ne({values:Ne({},i)},r),t),{},{defaultValues:s}))}}).unsubscribe,L=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(const l of e?ii(e):o.mount)o.mount.delete(l),o.array.delete(l),t.keepValue||(hi(a,l),hi(i,l)),!t.keepError&&hi(r.errors,l),!t.keepDirty&&hi(r.dirtyFields,l),!t.keepTouched&&hi(r.touchedFields,l),!t.keepIsValidating&&hi(r.validatingFields,l),!n.shouldUnregister&&!t.keepDefaultValue&&hi(s,l);m.state.next({values:Os(i)}),m.state.next(Ne(Ne({},r),t.keepDirty?{isDirty:w()}:{})),!t.keepIsValid&&f()},R=e=>{let{disabled:t,name:n}=e;(Ds(t)&&l.mount||t||o.disabled.has(n))&&(t?o.disabled.add(n):o.disabled.delete(n))},A=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=As(a,e);const i=Ds(t.disabled)||Ds(n.disabled);return Is(a,e,Ne(Ne({},r||{}),{},{_f:Ne(Ne({},r&&r._f?r._f:{ref:{name:e}}),{},{name:e,mount:!0},t)})),o.mount.add(e),r?R({disabled:Ds(t.disabled)?t.disabled:n.disabled,name:e}):x(e,!0,t.value),Ne(Ne(Ne({},i?{disabled:t.disabled||n.disabled}:{}),n.progressive?{required:!!t.required,min:Ci(t.min),max:Ci(t.max),minLength:Ci(t.minLength),maxLength:Ci(t.maxLength),pattern:Ci(t.pattern)}:{}),{},{name:e,onChange:_,onBlur:_,ref:i=>{if(i){A(e,t),r=As(a,e);const n=Fs(i.value)&&i.querySelectorAll&&i.querySelectorAll("input,select,textarea")[0]||i,l=(e=>pi(e)||js(e))(n),o=r._f.refs||[];if(l?o.find(e=>e===n):n===r._f.ref)return;Is(a,e,{_f:Ne(Ne({},r._f),l?{refs:[...o.filter(fi),n,...Array.isArray(As(s,e))?[{}]:[]],ref:{type:n.type,name:e}}:{ref:n})}),x(e,!1,void 0,n)}else r=As(a,e,{}),r._f&&(r._f.mount=!1),(n.shouldUnregister||t.shouldUnregister)&&(!Cs(o.array,e)||!l.action)&&o.unMount.add(e)}})},D=()=>n.shouldFocusError&&Li(a,E,o.mount),I=(e,t)=>async s=>{let l;s&&(s.preventDefault&&s.preventDefault(),s.persist&&s.persist());let c=Os(i);if(m.state.next({isSubmitting:!0}),n.resolver){const{errors:e,values:t}=await y();r.errors=e,c=Os(t)}else await b(a);if(o.disabled.size)for(const e of o.disabled)hi(c,e);if(hi(r.errors,"root"),oi(r.errors)){m.state.next({errors:{}});try{await e(c,s)}catch(u){l=u}}else t&&await t(Ne({},r.errors),s),D(),setTimeout(D);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:oi(r.errors)&&!l,submitCount:r.submitCount+1,errors:r.errors}),l)throw l},z=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const c=e?Os(e):s,d=Os(c),p=oi(e),f=p?s:d;if(t.keepDefaultValues||(s=c),!t.keepValues){if(t.keepDirtyValues){const e=new Set([...o.mount,...Object.keys(yi(s,i))]);for(const t of Array.from(e))As(r.dirtyFields,t)?Is(f,t,As(i,t)):S(t,As(f,t))}else{if(Ts&&Fs(e))for(const e of o.mount){const t=As(a,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(di(e)){const t=e.closest("form");if(t){t.reset();break}}}}if(t.keepFieldsRef)for(const e of o.mount)S(e,As(f,e));else a={}}i=n.shouldUnregister?t.keepDefaultValues?Os(s):{}:Os(f),m.array.next({values:Ne({},f)}),m.state.next({values:Ne({},f)})}o={mount:t.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!u.isValid||!!t.keepIsValid||!!t.keepDirtyValues,l.watch=!!n.shouldUnregister,m.state.next({submitCount:t.keepSubmitCount?r.submitCount:0,isDirty:!p&&(t.keepDirty?r.isDirty:!(!t.keepDefaultValues||ai(e,s))),isSubmitted:!!t.keepIsSubmitted&&r.isSubmitted,dirtyFields:p?{}:t.keepDirtyValues?t.keepDefaultValues&&i?yi(s,i):r.dirtyFields:t.keepDefaultValues&&e?yi(s,e):t.keepDirty?r.dirtyFields:{},touchedFields:t.keepTouched?r.touchedFields:{},errors:t.keepErrors?r.errors:{},isSubmitSuccessful:!!t.keepIsSubmitSuccessful&&r.isSubmitSuccessful,isSubmitting:!1,defaultValues:s})},M=(e,t)=>z(ui(e)?e(i):e,t),U=e=>{r=Ne(Ne({},r),e)},B={control:{register:A,unregister:L,getFieldState:O,handleSubmit:I,setError:P,_subscribe:F,_runSchema:y,_focusError:D,_getWatch:j,_getDirty:w,_setValid:f,_setFieldArray:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2?arguments[2]:void 0,c=arguments.length>3?arguments[3]:void 0,p=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],f=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(c&&o&&!n.disabled){if(l.action=!0,f&&Array.isArray(As(a,e))){const t=o(As(a,e),c.argA,c.argB);p&&Is(a,e,t)}if(f&&Array.isArray(As(r.errors,e))){const t=o(As(r.errors,e),c.argA,c.argB);p&&Is(r.errors,e,t),((e,t)=>{!Ls(As(e,t)).length&&hi(e,t)})(r.errors,e)}if((u.touchedFields||d.touchedFields)&&f&&Array.isArray(As(r.touchedFields,e))){const t=o(As(r.touchedFields,e),c.argA,c.argB);p&&Is(r.touchedFields,e,t)}(u.dirtyFields||d.dirtyFields)&&(r.dirtyFields=yi(s,i)),m.state.next({name:e,isDirty:w(e,t),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Is(i,e,t)},_setDisabledField:R,_setErrors:e=>{r.errors=e,m.state.next({errors:r.errors,isValid:!1})},_getFieldArray:e=>Ls(As(l.mount?i:s,e,n.shouldUnregister?As(s,e,[]):[])),_reset:z,_resetDefaultValues:()=>ui(n.defaultValues)&&n.defaultValues().then(e=>{M(e,n.resetOptions),m.state.next({isLoading:!1})}),_removeUnmounted:()=>{for(const e of o.unMount){const t=As(a,e);t&&(t._f.refs?t._f.refs.every(e=>!fi(e)):!fi(t._f.ref))&&L(e)}o.unMount=new Set},_disableForm:e=>{Ds(e)&&(m.state.next({disabled:e}),Li(a,(t,n)=>{const r=As(a,n);r&&(t.disabled=r._f.disabled||e,Array.isArray(r._f.refs)&&r._f.refs.forEach(t=>{t.disabled=r._f.disabled||e}))},0,!1))},_subjects:m,_proxyFormState:u,get _fields(){return a},get _formValues(){return i},get _state(){return l},set _state(e){l=e},get _defaultValues(){return s},get _names(){return o},set _names(e){o=e},get _formState(){return r},get _options(){return n},set _options(e){n=Ne(Ne({},n),e)}},subscribe:e=>(l.mount=!0,d=Ne(Ne({},d),e.formState),F(Ne(Ne({},e),{},{formState:d}))),trigger:C,register:A,handleSubmit:I,watch:(e,t)=>ui(e)?m.state.subscribe({next:n=>"values"in n&&e(j(void 0,t),n)}):j(e,t,!0),setValue:S,getValues:T,reset:M,resetField:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};As(a,e)&&(Fs(t.defaultValue)?S(e,Os(As(s,e))):(S(e,t.defaultValue),Is(s,e,Os(t.defaultValue))),t.keepTouched||hi(r.touchedFields,e),t.keepDirty||(hi(r.dirtyFields,e),r.isDirty=t.defaultValue?w(e,Os(As(s,e))):w()),t.keepError||(hi(r.errors,e),u.isValid&&f()),m.state.next(Ne({},r)))},clearErrors:e=>{e&&ii(e).forEach(e=>hi(r.errors,e)),m.state.next({errors:e?r.errors:{}})},unregister:L,setError:P,setFocus:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=As(a,e),r=n&&n._f;if(r){const e=r.refs?r.refs[0]:r.ref;e.focus&&(e.focus(),t.shouldSelect&&ui(e.select)&&e.select())}},getFieldState:O};return Ne(Ne({},B),{},{formControl:B})}function Vi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=r.useRef(void 0),n=r.useRef(void 0),[a,s]=r.useState({isDirty:!1,isValidating:!1,isLoading:ui(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:ui(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current=Ne(Ne({},e.formControl),{},{formState:a}),e.defaultValues&&!ui(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const n=Bi(e),{formControl:r}=n,s=xs(n,ws);t.current=Ne(Ne({},s),{},{formState:a})}const i=t.current.control;return i._options=e,ei(()=>{const e=i._subscribe({formState:i._proxyFormState,callback:()=>s(Ne({},i._formState)),reRenderRoot:!0});return s(e=>Ne(Ne({},e),{},{isReady:!0})),i._formState.isReady=!0,e},[i]),r.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),r.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),r.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),r.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),r.useEffect(()=>{if(i._proxyFormState.isDirty){const e=i._getDirty();e!==a.isDirty&&i._subjects.state.next({isDirty:e})}},[i,a.isDirty]),r.useEffect(()=>{e.values&&!ai(e.values,n.current)?(i._reset(e.values,Ne({keepFieldsRef:!0},i._options.resetOptions)),n.current=e.values,s(e=>Ne({},e))):i._resetDefaultValues()},[i,e.values]),r.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next(Ne({},i._formState))),i._removeUnmounted()}),t.current.formState=Xs(a,i),t.current}const Hi=(e,t,n)=>{if(e&&"reportValidity"in e){const r=As(n,t);e.setCustomValidity(r&&r.message||""),e.reportValidity()}},qi=(e,t)=>{for(const n in t.fields){const r=t.fields[n];r&&r.ref&&"reportValidity"in r.ref?Hi(r.ref,n,e):r.refs&&r.refs.forEach(t=>Hi(t,n,e))}},$i=(e,t)=>{t.shouldUseNativeValidation&&qi(e,t);const n={};for(const r in e){const a=As(t.fields,r),s=Object.assign(e[r]||{},{ref:a&&a.ref});if(Wi(t.names||Object.keys(e),r)){const e=Object.assign({},As(n,r));Is(e,"root",s),Is(n,r,e)}else Is(n,r,s)}return n},Wi=(e,t)=>e.some(e=>e.startsWith(t+"."));function Ki(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),function(r,a,s){try{return Promise.resolve(function(i,l){try{var o=(t.context,Promise.resolve(e["sync"===n.mode?"validateSync":"validate"](r,Object.assign({abortEarly:!1},t,{context:a}))).then(function(e){return s.shouldUseNativeValidation&&qi({},s),{values:n.raw?r:e,errors:{}}}))}catch(Jn){return l(Jn)}return o&&o.then?o.then(void 0,l):o}(0,function(e){if(!e.inner)throw e;return{values:{},errors:$i((t=e,n=!s.shouldUseNativeValidation&&"all"===s.criteriaMode,(t.inner||[]).reduce(function(e,t){if(e[t.path]||(e[t.path]={message:t.message,type:t.type}),n){var r=e[t.path].types,a=r&&r[t.type];e[t.path]=si(t.path,n,e,t.type,a?[].concat(a,t.message):t.message)}return e},{})),s)};var t,n}))}catch(Jn){return Promise.reject(Jn)}}}var Zi=n(575),Gi=n(517),Qi=n(704),Yi=n.n(Qi);const Ji=Object.prototype.toString,Xi=Error.prototype.toString,el=RegExp.prototype.toString,tl="undefined"!==typeof Symbol?Symbol.prototype.toString:()=>"",nl=/^Symbol\((.*)\)(.*)$/;function rl(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null==e||!0===e||!1===e)return""+e;const n=typeof e;if("number"===n)return function(e){return e!=+e?"NaN":0===e&&1/e<0?"-0":""+e}(e);if("string"===n)return t?'"'.concat(e,'"'):e;if("function"===n)return"[Function "+(e.name||"anonymous")+"]";if("symbol"===n)return tl.call(e).replace(nl,"Symbol($1)");const r=Ji.call(e).slice(8,-1);return"Date"===r?isNaN(e.getTime())?""+e:e.toISOString(e):"Error"===r||e instanceof Error?"["+Xi.call(e)+"]":"RegExp"===r?el.call(e):null}function al(e,t){let n=rl(e,t);return null!==n?n:JSON.stringify(e,function(e,n){let r=rl(this[e],t);return null!==r?r:n},2)}function sl(e){return null==e?[]:[].concat(e)}let il,ll,ol,cl=/\$\{\s*(\w+)\s*\}/g;il=Symbol.toStringTag;class ul{constructor(e,t,n,r){this.name=void 0,this.message=void 0,this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=void 0,this.inner=void 0,this[il]="Error",this.name="ValidationError",this.value=t,this.path=n,this.type=r,this.errors=[],this.inner=[],sl(e).forEach(e=>{if(dl.isError(e)){this.errors.push(...e.errors);const t=e.inner.length?e.inner:[e];this.inner.push(...t)}else this.errors.push(e)}),this.message=this.errors.length>1?"".concat(this.errors.length," errors occurred"):this.errors[0]}}ll=Symbol.hasInstance,ol=Symbol.toStringTag;class dl extends Error{static formatError(e,t){const n=t.label||t.path||"this";return t=Object.assign({},t,{path:n,originalPath:t.path}),"string"===typeof e?e.replace(cl,(e,n)=>al(t[n])):"function"===typeof e?e(t):e}static isError(e){return e&&"ValidationError"===e.name}constructor(e,t,n,r,a){const s=new ul(e,t,n,r);if(a)return s;super(),this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=[],this.inner=[],this[ol]="Error",this.name=s.name,this.message=s.message,this.type=s.type,this.value=s.value,this.path=s.path,this.errors=s.errors,this.inner=s.inner,Error.captureStackTrace&&Error.captureStackTrace(this,dl)}static[ll](e){return ul[Symbol.hasInstance](e)||super[Symbol.hasInstance](e)}}let ml={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:e=>{let{path:t,type:n,value:r,originalValue:a}=e;const s=null!=a&&a!==r?" (cast from the value `".concat(al(a,!0),"`)."):".";return"mixed"!==n?"".concat(t," must be a `").concat(n,"` type, ")+"but the final value was: `".concat(al(r,!0),"`")+s:"".concat(t," must match the configured type. ")+"The validated value was: `".concat(al(r,!0),"`")+s}},pl={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",datetime:"${path} must be a valid ISO date-time",datetime_precision:"${path} must be a valid ISO date-time with a sub-second precision of exactly ${precision} digits",datetime_offset:'${path} must be a valid ISO date-time with UTC "Z" timezone',trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},fl={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},hl={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},xl={isValue:"${path} field must be ${value}"},gl={noUnknown:"${path} field has unspecified keys: ${unknown}",exact:"${path} object contains unknown properties: ${properties}"},vl={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},yl={notType:e=>{const{path:t,value:n,spec:r}=e,a=r.types.length;if(Array.isArray(n)){if(n.length<a)return"".concat(t," tuple value has too few items, expected a length of ").concat(a," but got ").concat(n.length," for value: `").concat(al(n,!0),"`");if(n.length>a)return"".concat(t," tuple value has too many items, expected a length of ").concat(a," but got ").concat(n.length," for value: `").concat(al(n,!0),"`")}return dl.formatError(ml.notType,e)}};Object.assign(Object.create(null),{mixed:ml,string:pl,number:fl,date:hl,object:gl,array:vl,boolean:xl,tuple:yl});const bl=e=>e&&e.__isYupSchema__;class wl{static fromOptions(e,t){if(!t.then&&!t.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:n,then:r,otherwise:a}=t,s="function"===typeof n?n:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.every(e=>e===n)};return new wl(e,(e,t)=>{var n;let i=s(...e)?r:a;return null!=(n=null==i?void 0:i(t))?n:t})}constructor(e,t){this.fn=void 0,this.refs=e,this.refs=e,this.fn=t}resolve(e,t){let n=this.refs.map(e=>e.getValue(null==t?void 0:t.value,null==t?void 0:t.parent,null==t?void 0:t.context)),r=this.fn(n,e,t);if(void 0===r||r===e)return e;if(!bl(r))throw new TypeError("conditions must return a schema object");return r.resolve(t)}}const jl="$",Nl=".";class kl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,"string"!==typeof e)throw new TypeError("ref must be a string, got: "+e);if(this.key=e.trim(),""===e)throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===jl,this.isValue=this.key[0]===Nl,this.isSibling=!this.isContext&&!this.isValue;let n=this.isContext?jl:this.isValue?Nl:"";this.path=this.key.slice(n.length),this.getter=this.path&&(0,Zi.getter)(this.path,!0),this.map=t.map}getValue(e,t,n){let r=this.isContext?n:this.isValue?e:t;return this.getter&&(r=this.getter(r||{})),this.map&&(r=this.map(r)),r}cast(e,t){return this.getValue(e,null==t?void 0:t.parent,null==t?void 0:t.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return"Ref(".concat(this.key,")")}static isRef(e){return e&&e.__isYupRef}}kl.prototype.__isYupRef=!0;const Sl=e=>null==e;function _l(e){function t(t,n,r){let{value:a,path:s="",options:i,originalValue:l,schema:o}=t;const{name:c,test:u,params:d,message:m,skipAbsent:p}=e;let{parent:f,context:h,abortEarly:x=o.spec.abortEarly,disableStackTrace:g=o.spec.disableStackTrace}=i;const v={value:a,parent:f,context:h};function y(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=El(Object.assign({value:a,originalValue:l,label:o.spec.label,path:e.path||s,spec:o.spec,disableStackTrace:e.disableStackTrace||g},d,e.params),v),n=new dl(dl.formatError(e.message||m,t),a,t.path,e.type||c,t.disableStackTrace);return n.params=t,n}const b=x?n:r;let w={path:s,parent:f,type:c,from:i.from,createError:y,resolve:e=>Cl(e,v),options:i,originalValue:l,schema:o};const j=e=>{dl.isError(e)?b(e):e?r(null):b(y())},N=e=>{dl.isError(e)?b(e):n(e)};if(p&&Sl(a))return j(!0);let k;try{var S;if(k=u.call(w,a,w),"function"===typeof(null==(S=k)?void 0:S.then)){if(i.sync)throw new Error('Validation test of type: "'.concat(w.type,'" returned a Promise during a synchronous validate. ')+"This test will finish after the validate call has returned");return Promise.resolve(k).then(j,N)}}catch(_){return void N(_)}j(k)}return t.OPTIONS=e,t}function El(e,t){if(!e)return e;for(const n of Object.keys(e))e[n]=Cl(e[n],t);return e}function Cl(e,t){return kl.isRef(e)?e.getValue(t.value,t.parent,t.context):e}function Tl(e,t,n){let r,a,s,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return t?((0,Zi.forEach)(t,(l,o,c)=>{let u=o?l.slice(1,l.length-1):l,d="tuple"===(e=e.resolve({context:i,parent:r,value:n})).type,m=c?parseInt(u,10):0;if(e.innerType||d){if(d&&!c)throw new Error('Yup.reach cannot implicitly index into a tuple type. the path part "'.concat(s,'" must contain an index to the tuple element, e.g. "').concat(s,'[0]"'));if(n&&m>=n.length)throw new Error("Yup.reach cannot resolve an array item at index: ".concat(l,", in the path: ").concat(t,". ")+"because there is no value at that index. ");r=n,n=n&&n[m],e=d?e.spec.types[m]:e.innerType}if(!c){if(!e.fields||!e.fields[u])throw new Error("The schema does not contain the path: ".concat(t,". ")+"(failed at: ".concat(s,' which is a type: "').concat(e.type,'")'));r=n,n=n&&n[u],e=e.fields[u]}a=u,s=o?"["+l+"]":"."+l}),{schema:e,parent:r,parentPath:a}):{parent:r,parentPath:t,schema:e}}class Ol extends Set{describe(){const e=[];for(const t of this.values())e.push(kl.isRef(t)?t.describe():t);return e}resolveAll(e){let t=[];for(const n of this.values())t.push(e(n));return t}clone(){return new Ol(this.values())}merge(e,t){const n=this.clone();return e.forEach(e=>n.add(e)),t.forEach(e=>n.delete(e)),n}}function Pl(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map;if(bl(e)||!e||"object"!==typeof e)return e;if(n.has(e))return n.get(e);if(e instanceof Date)t=new Date(e.getTime()),n.set(e,t);else if(e instanceof RegExp)t=new RegExp(e),n.set(e,t);else if(Array.isArray(e)){t=new Array(e.length),n.set(e,t);for(let r=0;r<e.length;r++)t[r]=Pl(e[r],n)}else if(e instanceof Map){t=new Map,n.set(e,t);for(const[r,a]of e.entries())t.set(r,Pl(a,n))}else if(e instanceof Set){t=new Set,n.set(e,t);for(const r of e)t.add(Pl(r,n))}else{if(!(e instanceof Object))throw Error("Unable to clone ".concat(e));t={},n.set(e,t);for(const[r,a]of Object.entries(e))t[r]=Pl(a,n)}return t}function Fl(e){if(null==e||!e.length)return;const t=[];let n="",r=!1,a=!1;for(let s=0;s<e.length;s++){const i=e[s];"["!==i||a?"]"!==i||a?'"'!==i?"."!==i||r||a?n+=i:n&&(t.push(n),n=""):a=!a:(n&&(/^\d+$/.test(n)?t.push(n):t.push(n.replace(/^"|"$/g,"")),n=""),r=!1):(n&&(t.push(...n.split(".").filter(Boolean)),n=""),r=!0)}return n&&t.push(...n.split(".").filter(Boolean)),t}function Ll(e,t){var n;if((null==(n=e.inner)||!n.length)&&e.errors.length)return function(e,t){const n=t?"".concat(t,".").concat(e.path):e.path;return e.errors.map(e=>({message:e,path:Fl(n)}))}(e,t);const r=t?"".concat(t,".").concat(e.path):e.path;return e.inner.flatMap(e=>Ll(e,r))}class Rl{constructor(e){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new Ol,this._blacklist=new Ol,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(ml.notType)}),this.type=e.type,this._typeCheck=e.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},null==e?void 0:e.spec),this.withMutation(e=>{e.nonNullable()})}get _type(){return this.type}clone(e){if(this._mutate)return e&&Object.assign(this.spec,e),this;const t=Object.create(Object.getPrototypeOf(this));return t.type=this.type,t._typeCheck=this._typeCheck,t._whitelist=this._whitelist.clone(),t._blacklist=this._blacklist.clone(),t.internalTests=Object.assign({},this.internalTests),t.exclusiveTests=Object.assign({},this.exclusiveTests),t.deps=[...this.deps],t.conditions=[...this.conditions],t.tests=[...this.tests],t.transforms=[...this.transforms],t.spec=Pl(Object.assign({},this.spec,e)),t}label(e){let t=this.clone();return t.spec.label=e,t}meta(){if(0===arguments.length)return this.spec.meta;let e=this.clone();return e.spec.meta=Object.assign(e.spec.meta||{},arguments.length<=0?void 0:arguments[0]),e}withMutation(e){let t=this._mutate;this._mutate=!0;let n=e(this);return this._mutate=t,n}concat(e){if(!e||e===this)return this;if(e.type!==this.type&&"mixed"!==this.type)throw new TypeError("You cannot `concat()` schema's of different types: ".concat(this.type," and ").concat(e.type));let t=this,n=e.clone();const r=Object.assign({},t.spec,n.spec);return n.spec=r,n.internalTests=Object.assign({},t.internalTests,n.internalTests),n._whitelist=t._whitelist.merge(e._whitelist,e._blacklist),n._blacklist=t._blacklist.merge(e._blacklist,e._whitelist),n.tests=t.tests,n.exclusiveTests=t.exclusiveTests,n.withMutation(t=>{e.tests.forEach(e=>{t.test(e.OPTIONS)})}),n.transforms=[...t.transforms,...n.transforms],n}isType(e){return null==e?!(!this.spec.nullable||null!==e)||!(!this.spec.optional||void 0!==e):this._typeCheck(e)}resolve(e){let t=this;if(t.conditions.length){let n=t.conditions;t=t.clone(),t.conditions=[],t=n.reduce((t,n)=>n.resolve(t,e),t),t=t.resolve(e)}return t}resolveOptions(e){var t,n,r,a;return Object.assign({},e,{from:e.from||[],strict:null!=(t=e.strict)?t:this.spec.strict,abortEarly:null!=(n=e.abortEarly)?n:this.spec.abortEarly,recursive:null!=(r=e.recursive)?r:this.spec.recursive,disableStackTrace:null!=(a=e.disableStackTrace)?a:this.spec.disableStackTrace})}cast(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.resolve(Object.assign({value:e},t)),r="ignore-optionality"===t.assert,a=n._cast(e,t);if(!1!==t.assert&&!n.isType(a)){if(r&&Sl(a))return a;let s=al(e),i=al(a);throw new TypeError("The value of ".concat(t.path||"field"," could not be cast to a value ")+'that satisfies the schema type: "'.concat(n.type,'". \n\n')+"attempted value: ".concat(s," \n")+(i!==s?"result of cast: ".concat(i):""))}return a}_cast(e,t){let n=void 0===e?e:this.transforms.reduce((t,n)=>n.call(this,t,e,this),e);return void 0===n&&(n=this.getDefault(t)),n}_validate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,{path:a,originalValue:s=e,strict:i=this.spec.strict}=t,l=e;i||(l=this._cast(l,Object.assign({assert:!1},t)));let o=[];for(let c of Object.values(this.internalTests))c&&o.push(c);this.runTests({path:a,value:l,originalValue:s,options:t,tests:o},n,e=>{if(e.length)return r(e,l);this.runTests({path:a,value:l,originalValue:s,options:t,tests:this.tests},n,r)})}runTests(e,t,n){let r=!1,{tests:a,value:s,originalValue:i,path:l,options:o}=e,c=e=>{r||(r=!0,t(e,s))},u=e=>{r||(r=!0,n(e,s))},d=a.length,m=[];if(!d)return u([]);let p={value:s,originalValue:i,path:l,options:o,schema:this};for(let f=0;f<a.length;f++){(0,a[f])(p,c,function(e){e&&(Array.isArray(e)?m.push(...e):m.push(e)),--d<=0&&u(m)})}}asNestedTest(e){let{key:t,index:n,parent:r,parentPath:a,originalParent:s,options:i}=e;const l=null!=t?t:n;if(null==l)throw TypeError("Must include `key` or `index` for nested validations");const o="number"===typeof l;let c=r[l];const u=Object.assign({},i,{strict:!0,parent:r,value:c,originalValue:s[l],key:void 0,[o?"index":"key"]:l,path:o||l.includes(".")?"".concat(a||"","[").concat(o?l:'"'.concat(l,'"'),"]"):(a?"".concat(a,"."):"")+t});return(e,t,n)=>this.resolve(u)._validate(c,u,t,n)}validate(e,t){var n;let r=this.resolve(Object.assign({},t,{value:e})),a=null!=(n=null==t?void 0:t.disableStackTrace)?n:r.spec.disableStackTrace;return new Promise((n,s)=>r._validate(e,t,(e,t)=>{dl.isError(e)&&(e.value=t),s(e)},(e,t)=>{e.length?s(new dl(e,t,void 0,void 0,a)):n(t)}))}validateSync(e,t){var n;let r,a=this.resolve(Object.assign({},t,{value:e})),s=null!=(n=null==t?void 0:t.disableStackTrace)?n:a.spec.disableStackTrace;return a._validate(e,Object.assign({},t,{sync:!0}),(e,t)=>{throw dl.isError(e)&&(e.value=t),e},(t,n)=>{if(t.length)throw new dl(t,e,void 0,void 0,s);r=n}),r}isValid(e,t){return this.validate(e,t).then(()=>!0,e=>{if(dl.isError(e))return!1;throw e})}isValidSync(e,t){try{return this.validateSync(e,t),!0}catch(n){if(dl.isError(n))return!1;throw n}}_getDefault(e){let t=this.spec.default;return null==t?t:"function"===typeof t?t.call(this,e):Pl(t)}getDefault(e){return this.resolve(e||{})._getDefault(e)}default(e){if(0===arguments.length)return this._getDefault();return this.clone({default:e})}strict(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.clone({strict:e})}nullability(e,t){const n=this.clone({nullable:e});return n.internalTests.nullable=_l({message:t,name:"nullable",test(e){return null!==e||this.schema.spec.nullable}}),n}optionality(e,t){const n=this.clone({optional:e});return n.internalTests.optionality=_l({message:t,name:"optionality",test(e){return void 0!==e||this.schema.spec.optional}}),n}optional(){return this.optionality(!0)}defined(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ml.defined;return this.optionality(!1,e)}nullable(){return this.nullability(!0)}nonNullable(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ml.notNull;return this.nullability(!1,e)}required(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ml.required;return this.clone().withMutation(t=>t.nonNullable(e).defined(e))}notRequired(){return this.clone().withMutation(e=>e.nullable().optional())}transform(e){let t=this.clone();return t.transforms.push(e),t}test(){let e;if(e=1===arguments.length?"function"===typeof(arguments.length<=0?void 0:arguments[0])?{test:arguments.length<=0?void 0:arguments[0]}:arguments.length<=0?void 0:arguments[0]:2===arguments.length?{name:arguments.length<=0?void 0:arguments[0],test:arguments.length<=1?void 0:arguments[1]}:{name:arguments.length<=0?void 0:arguments[0],message:arguments.length<=1?void 0:arguments[1],test:arguments.length<=2?void 0:arguments[2]},void 0===e.message&&(e.message=ml.default),"function"!==typeof e.test)throw new TypeError("`test` is a required parameters");let t=this.clone(),n=_l(e),r=e.exclusive||e.name&&!0===t.exclusiveTests[e.name];if(e.exclusive&&!e.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return e.name&&(t.exclusiveTests[e.name]=!!e.exclusive),t.tests=t.tests.filter(t=>{if(t.OPTIONS.name===e.name){if(r)return!1;if(t.OPTIONS.test===n.OPTIONS.test)return!1}return!0}),t.tests.push(n),t}when(e,t){Array.isArray(e)||"string"===typeof e||(t=e,e=".");let n=this.clone(),r=sl(e).map(e=>new kl(e));return r.forEach(e=>{e.isSibling&&n.deps.push(e.key)}),n.conditions.push("function"===typeof t?new wl(r,t):wl.fromOptions(r,t)),n}typeError(e){let t=this.clone();return t.internalTests.typeError=_l({message:e,name:"typeError",skipAbsent:!0,test(e){return!!this.schema._typeCheck(e)||this.createError({params:{type:this.schema.type}})}}),t}oneOf(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ml.oneOf,n=this.clone();return e.forEach(e=>{n._whitelist.add(e),n._blacklist.delete(e)}),n.internalTests.whiteList=_l({message:t,name:"oneOf",skipAbsent:!0,test(e){let t=this.schema._whitelist,n=t.resolveAll(this.resolve);return!!n.includes(e)||this.createError({params:{values:Array.from(t).join(", "),resolved:n}})}}),n}notOneOf(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ml.notOneOf,n=this.clone();return e.forEach(e=>{n._blacklist.add(e),n._whitelist.delete(e)}),n.internalTests.blacklist=_l({message:t,name:"notOneOf",test(e){let t=this.schema._blacklist,n=t.resolveAll(this.resolve);return!n.includes(e)||this.createError({params:{values:Array.from(t).join(", "),resolved:n}})}}),n}strip(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.clone();return t.spec.strip=e,t}describe(e){const t=(e?this.resolve(e):this).clone(),{label:n,meta:r,optional:a,nullable:s}=t.spec,i={meta:r,label:n,optional:a,nullable:s,default:t.getDefault(e),type:t.type,oneOf:t._whitelist.describe(),notOneOf:t._blacklist.describe(),tests:t.tests.filter((e,t,n)=>n.findIndex(t=>t.OPTIONS.name===e.OPTIONS.name)===t).map(t=>{const n=t.OPTIONS.params&&e?El(Object.assign({},t.OPTIONS.params),e):t.OPTIONS.params;return{name:t.OPTIONS.name,params:n}})};return i}get"~standard"(){const e=this;return{version:1,vendor:"yup",async validate(t){try{return{value:await e.validate(t,{abortEarly:!1})}}catch(n){if(n instanceof dl)return{issues:Ll(n)};throw n}}}}}Rl.prototype.__isYupSchema__=!0;for(const n of["validate","validateSync"])Rl.prototype["".concat(n,"At")]=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{parent:a,parentPath:s,schema:i}=Tl(this,e,t,r.context);return i[n](a&&a[s],Object.assign({},r,{parent:a,path:e}))};for(const n of["equals","is"])Rl.prototype[n]=Rl.prototype.oneOf;for(const n of["not","nope"])Rl.prototype[n]=Rl.prototype.notOneOf;const Al=()=>!0;class Dl extends Rl{constructor(e){super("function"===typeof e?{type:"mixed",check:e}:Object.assign({type:"mixed",check:Al},e))}}Dl.prototype;class Il extends Rl{constructor(){super({type:"boolean",check:e=>(e instanceof Boolean&&(e=e.valueOf()),"boolean"===typeof e)}),this.withMutation(()=>{this.transform((e,t,n)=>{if(n.spec.coerce&&!n.isType(e)){if(/^(true|1)$/i.test(String(e)))return!0;if(/^(false|0)$/i.test(String(e)))return!1}return e})})}isTrue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xl.isValue;return this.test({message:e,name:"is-value",exclusive:!0,params:{value:"true"},test:e=>Sl(e)||!0===e})}isFalse(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xl.isValue;return this.test({message:e,name:"is-value",exclusive:!0,params:{value:"false"},test:e=>Sl(e)||!1===e})}default(e){return super.default(e)}defined(e){return super.defined(e)}optional(){return super.optional()}required(e){return super.required(e)}notRequired(){return super.notRequired()}nullable(){return super.nullable()}nonNullable(e){return super.nonNullable(e)}strip(e){return super.strip(e)}}Il.prototype;const zl=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function Ml(e){var t,n;const r=zl.exec(e);return r?{year:Ul(r[1]),month:Ul(r[2],1)-1,day:Ul(r[3],1),hour:Ul(r[4]),minute:Ul(r[5]),second:Ul(r[6]),millisecond:r[7]?Ul(r[7].substring(0,3)):0,precision:null!=(t=null==(n=r[7])?void 0:n.length)?t:void 0,z:r[8]||void 0,plusMinus:r[9]||void 0,hourOffset:Ul(r[10]),minuteOffset:Ul(r[11])}:null}function Ul(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Number(e)||t}let Bl=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Vl=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,Hl=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,ql=new RegExp("".concat("^\\d{4}-\\d{2}-\\d{2}","T").concat("\\d{2}:\\d{2}:\\d{2}","(\\.\\d+)?").concat("(([+-]\\d{2}(:?\\d{2})?)|Z)","$")),$l=e=>Sl(e)||e===e.trim(),Wl={}.toString();function Kl(){return new Zl}class Zl extends Rl{constructor(){super({type:"string",check:e=>(e instanceof String&&(e=e.valueOf()),"string"===typeof e)}),this.withMutation(()=>{this.transform((e,t,n)=>{if(!n.spec.coerce||n.isType(e))return e;if(Array.isArray(e))return e;const r=null!=e&&e.toString?e.toString():e;return r===Wl?e:r})})}required(e){return super.required(e).withMutation(t=>t.test({message:e||ml.required,name:"required",skipAbsent:!0,test:e=>!!e.length}))}notRequired(){return super.notRequired().withMutation(e=>(e.tests=e.tests.filter(e=>"required"!==e.OPTIONS.name),e))}length(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pl.length;return this.test({message:t,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test(t){return t.length===this.resolve(e)}})}min(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pl.min;return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(t){return t.length>=this.resolve(e)}})}max(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pl.max;return this.test({name:"max",exclusive:!0,message:t,params:{max:e},skipAbsent:!0,test(t){return t.length<=this.resolve(e)}})}matches(e,t){let n,r,a=!1;return t&&("object"===typeof t?({excludeEmptyString:a=!1,message:n,name:r}=t):n=t),this.test({name:r||"matches",message:n||pl.matches,params:{regex:e},skipAbsent:!0,test:t=>""===t&&a||-1!==t.search(e)})}email(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pl.email;return this.matches(Bl,{name:"email",message:e,excludeEmptyString:!0})}url(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pl.url;return this.matches(Vl,{name:"url",message:e,excludeEmptyString:!0})}uuid(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pl.uuid;return this.matches(Hl,{name:"uuid",message:e,excludeEmptyString:!1})}datetime(e){let t,n,r="";return e&&("object"===typeof e?({message:r="",allowOffset:t=!1,precision:n}=e):r=e),this.matches(ql,{name:"datetime",message:r||pl.datetime,excludeEmptyString:!0}).test({name:"datetime_offset",message:r||pl.datetime_offset,params:{allowOffset:t},skipAbsent:!0,test:e=>{if(!e||t)return!0;const n=Ml(e);return!!n&&!!n.z}}).test({name:"datetime_precision",message:r||pl.datetime_precision,params:{precision:n},skipAbsent:!0,test:e=>{if(!e||void 0==n)return!0;const t=Ml(e);return!!t&&t.precision===n}})}ensure(){return this.default("").transform(e=>null===e?"":e)}trim(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pl.trim;return this.transform(e=>null!=e?e.trim():e).test({message:e,name:"trim",test:$l})}lowercase(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pl.lowercase;return this.transform(e=>Sl(e)?e:e.toLowerCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:e=>Sl(e)||e===e.toLowerCase()})}uppercase(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pl.uppercase;return this.transform(e=>Sl(e)?e:e.toUpperCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:e=>Sl(e)||e===e.toUpperCase()})}}Kl.prototype=Zl.prototype;function Gl(){return new Ql}class Ql extends Rl{constructor(){super({type:"number",check:e=>(e instanceof Number&&(e=e.valueOf()),"number"===typeof e&&!(e=>e!=+e)(e))}),this.withMutation(()=>{this.transform((e,t,n)=>{if(!n.spec.coerce)return e;let r=e;if("string"===typeof r){if(r=r.replace(/\s/g,""),""===r)return NaN;r=+r}return n.isType(r)||null===r?r:parseFloat(r)})})}min(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fl.min;return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(t){return t>=this.resolve(e)}})}max(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fl.max;return this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(t){return t<=this.resolve(e)}})}lessThan(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fl.lessThan;return this.test({message:t,name:"max",exclusive:!0,params:{less:e},skipAbsent:!0,test(t){return t<this.resolve(e)}})}moreThan(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fl.moreThan;return this.test({message:t,name:"min",exclusive:!0,params:{more:e},skipAbsent:!0,test(t){return t>this.resolve(e)}})}positive(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fl.positive;return this.moreThan(0,e)}negative(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fl.negative;return this.lessThan(0,e)}integer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fl.integer;return this.test({name:"integer",message:e,skipAbsent:!0,test:e=>Number.isInteger(e)})}truncate(){return this.transform(e=>Sl(e)?e:0|e)}round(e){var t;let n=["ceil","floor","round","trunc"];if("trunc"===(e=(null==(t=e)?void 0:t.toLowerCase())||"round"))return this.truncate();if(-1===n.indexOf(e.toLowerCase()))throw new TypeError("Only valid options for round() are: "+n.join(", "));return this.transform(t=>Sl(t)?t:Math[e](t))}}Gl.prototype=Ql.prototype;let Yl=new Date("");function Jl(){return new Xl}class Xl extends Rl{constructor(){super({type:"date",check(e){return t=e,"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(e.getTime());var t}}),this.withMutation(()=>{this.transform((e,t,n)=>!n.spec.coerce||n.isType(e)||null===e?e:(e=function(e){const t=Ml(e);if(!t)return Date.parse?Date.parse(e):Number.NaN;if(void 0===t.z&&void 0===t.plusMinus)return new Date(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond).valueOf();let n=0;return"Z"!==t.z&&void 0!==t.plusMinus&&(n=60*t.hourOffset+t.minuteOffset,"+"===t.plusMinus&&(n=0-n)),Date.UTC(t.year,t.month,t.day,t.hour,t.minute+n,t.second,t.millisecond)}(e),isNaN(e)?Xl.INVALID_DATE:new Date(e)))})}prepareParam(e,t){let n;if(kl.isRef(e))n=e;else{let r=this.cast(e);if(!this._typeCheck(r))throw new TypeError("`".concat(t,"` must be a Date or a value that can be `cast()` to a Date"));n=r}return n}min(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hl.min,n=this.prepareParam(e,"min");return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(e){return e>=this.resolve(n)}})}max(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hl.max,n=this.prepareParam(e,"max");return this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(e){return e<=this.resolve(n)}})}}function eo(e,t){let n=1/0;return e.some((e,r)=>{var a;if(null!=(a=t.path)&&a.includes(e))return n=r,!0}),n}function to(e){return(t,n)=>eo(e,t)-eo(e,n)}Xl.INVALID_DATE=Yl,Jl.prototype=Xl.prototype,Jl.INVALID_DATE=Yl;const no=(e,t,n)=>{if("string"!==typeof e)return e;let r=e;try{r=JSON.parse(e)}catch(a){}return n.isType(r)?r:e};function ro(e){if("fields"in e){const t={};for(const[n,r]of Object.entries(e.fields))t[n]=ro(r);return e.setFields(t)}if("array"===e.type){const t=e.optional();return t.innerType&&(t.innerType=ro(t.innerType)),t}return"tuple"===e.type?e.optional().clone({types:e.spec.types.map(ro)}):"optional"in e?e.optional():e}let ao=e=>"[object Object]"===Object.prototype.toString.call(e);function so(e,t){let n=Object.keys(e.fields);return Object.keys(t).filter(e=>-1===n.indexOf(e))}const io=to([]);function lo(e){return new oo(e)}class oo extends Rl{constructor(e){super({type:"object",check:e=>ao(e)||"function"===typeof e}),this.fields=Object.create(null),this._sortErrors=io,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{e&&this.shape(e)})}_cast(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;let r=super._cast(e,t);if(void 0===r)return this.getDefault(t);if(!this._typeCheck(r))return r;let a=this.fields,s=null!=(n=t.stripUnknown)?n:this.spec.noUnknown,i=[].concat(this._nodes,Object.keys(r).filter(e=>!this._nodes.includes(e))),l={},o=Object.assign({},t,{parent:l,__validating:t.__validating||!1}),c=!1;for(const u of i){let e=a[u],n=u in r;if(e){let n,a=r[u];o.path=(t.path?"".concat(t.path,"."):"")+u,e=e.resolve({value:a,context:t.context,parent:l});let s=e instanceof Rl?e.spec:void 0,i=null==s?void 0:s.strict;if(null!=s&&s.strip){c=c||u in r;continue}n=t.__validating&&i?r[u]:e.cast(r[u],o),void 0!==n&&(l[u]=n)}else n&&!s&&(l[u]=r[u]);n===u in l&&l[u]===r[u]||(c=!0)}return c?l:r}_validate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,{from:a=[],originalValue:s=e,recursive:i=this.spec.recursive}=t;t.from=[{schema:this,value:s},...a],t.__validating=!0,t.originalValue=s,super._validate(e,t,n,(e,a)=>{if(!i||!ao(a))return void r(e,a);s=s||a;let l=[];for(let n of this._nodes){let e=this.fields[n];e&&!kl.isRef(e)&&l.push(e.asNestedTest({options:t,key:n,parent:a,parentPath:t.path,originalParent:s}))}this.runTests({tests:l,value:a,originalValue:s,options:t},n,t=>{r(t.sort(this._sortErrors).concat(e),a)})})}clone(e){const t=super.clone(e);return t.fields=Object.assign({},this.fields),t._nodes=this._nodes,t._excludedEdges=this._excludedEdges,t._sortErrors=this._sortErrors,t}concat(e){let t=super.concat(e),n=t.fields;for(let[r,a]of Object.entries(this.fields)){const e=n[r];n[r]=void 0===e?a:e}return t.withMutation(t=>t.setFields(n,[...this._excludedEdges,...e._excludedEdges]))}_getDefault(e){if("default"in this.spec)return super._getDefault(e);if(!this._nodes.length)return;let t={};return this._nodes.forEach(n=>{var r;const a=this.fields[n];let s=e;null!=(r=s)&&r.value&&(s=Object.assign({},s,{parent:s.value,value:s.value[n]})),t[n]=a&&"getDefault"in a?a.getDefault(s):void 0}),t}setFields(e,t){let n=this.clone();return n.fields=e,n._nodes=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=new Set,a=new Set(t.map(e=>{let[t,n]=e;return"".concat(t,"-").concat(n)}));function s(e,t){let s=(0,Zi.split)(e)[0];r.add(s),a.has("".concat(t,"-").concat(s))||n.push([t,s])}for(const i of Object.keys(e)){let t=e[i];r.add(i),kl.isRef(t)&&t.isSibling?s(t.path,i):bl(t)&&"deps"in t&&t.deps.forEach(e=>s(e,i))}return Yi().array(Array.from(r),n).reverse()}(e,t),n._sortErrors=to(Object.keys(e)),t&&(n._excludedEdges=t),n}shape(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.clone().withMutation(n=>{let r=n._excludedEdges;return t.length&&(Array.isArray(t[0])||(t=[t]),r=[...n._excludedEdges,...t]),n.setFields(Object.assign(n.fields,e),r)})}partial(){const e={};for(const[t,n]of Object.entries(this.fields))e[t]="optional"in n&&n.optional instanceof Function?n.optional():n;return this.setFields(e)}deepPartial(){return ro(this)}pick(e){const t={};for(const n of e)this.fields[n]&&(t[n]=this.fields[n]);return this.setFields(t,this._excludedEdges.filter(t=>{let[n,r]=t;return e.includes(n)&&e.includes(r)}))}omit(e){const t=[];for(const n of Object.keys(this.fields))e.includes(n)||t.push(n);return this.pick(t)}from(e,t,n){let r=(0,Zi.getter)(e,!0);return this.transform(a=>{if(!a)return a;let s=a;return((e,t)=>{const n=[...(0,Zi.normalizePath)(t)];if(1===n.length)return n[0]in e;let r=n.pop(),a=(0,Zi.getter)((0,Zi.join)(n),!0)(e);return!(!a||!(r in a))})(a,e)&&(s=Object.assign({},a),n||delete s[e],s[t]=r(a)),s})}json(){return this.transform(no)}exact(e){return this.test({name:"exact",exclusive:!0,message:e||gl.exact,test(e){if(null==e)return!0;const t=so(this.schema,e);return 0===t.length||this.createError({params:{properties:t.join(", ")}})}})}stripUnknown(){return this.clone({noUnknown:!0})}noUnknown(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gl.noUnknown;"boolean"!==typeof e&&(t=e,e=!0);let n=this.test({name:"noUnknown",exclusive:!0,message:t,test(t){if(null==t)return!0;const n=so(this.schema,t);return!e||0===n.length||this.createError({params:{unknown:n.join(", ")}})}});return n.spec.noUnknown=e,n}unknown(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gl.noUnknown;return this.noUnknown(!e,t)}transformKeys(e){return this.transform(t=>{if(!t)return t;const n={};for(const r of Object.keys(t))n[e(r)]=t[r];return n})}camelCase(){return this.transformKeys(Gi.camelCase)}snakeCase(){return this.transformKeys(Gi.snakeCase)}constantCase(){return this.transformKeys(e=>(0,Gi.snakeCase)(e).toUpperCase())}describe(e){const t=(e?this.resolve(e):this).clone(),n=super.describe(e);n.fields={};for(const[a,s]of Object.entries(t.fields)){var r;let t=e;null!=(r=t)&&r.value&&(t=Object.assign({},t,{parent:t.value,value:t.value[a]})),n.fields[a]=s.describe(t)}return n}}lo.prototype=oo.prototype;class co extends Rl{constructor(e){super({type:"array",spec:{types:e},check:e=>Array.isArray(e)}),this.innerType=void 0,this.innerType=e}_cast(e,t){const n=super._cast(e,t);if(!this._typeCheck(n)||!this.innerType)return n;let r=!1;const a=n.map((e,n)=>{const a=this.innerType.cast(e,Object.assign({},t,{path:"".concat(t.path||"","[").concat(n,"]")}));return a!==e&&(r=!0),a});return r?a:n}_validate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;var a;let s=this.innerType,i=null!=(a=t.recursive)?a:this.spec.recursive;null!=t.originalValue&&t.originalValue,super._validate(e,t,n,(a,l)=>{var o;if(!i||!s||!this._typeCheck(l))return void r(a,l);let c=new Array(l.length);for(let n=0;n<l.length;n++){var u;c[n]=s.asNestedTest({options:t,index:n,parent:l,parentPath:t.path,originalParent:null!=(u=t.originalValue)?u:e})}this.runTests({value:l,tests:c,originalValue:null!=(o=t.originalValue)?o:e,options:t},n,e=>r(e.concat(a),l))})}clone(e){const t=super.clone(e);return t.innerType=this.innerType,t}json(){return this.transform(no)}concat(e){let t=super.concat(e);return t.innerType=this.innerType,e.innerType&&(t.innerType=t.innerType?t.innerType.concat(e.innerType):e.innerType),t}of(e){let t=this.clone();if(!bl(e))throw new TypeError("`array.of()` sub-schema must be a valid yup schema not: "+al(e));return t.innerType=e,t.spec=Object.assign({},t.spec,{types:e}),t}length(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vl.length;return this.test({message:t,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test(t){return t.length===this.resolve(e)}})}min(e,t){return t=t||vl.min,this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(t){return t.length>=this.resolve(e)}})}max(e,t){return t=t||vl.max,this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(t){return t.length<=this.resolve(e)}})}ensure(){return this.default(()=>[]).transform((e,t)=>this._typeCheck(e)?e:null==t?[]:[].concat(t))}compact(e){let t=e?(t,n,r)=>!e(t,n,r):e=>!!e;return this.transform(e=>null!=e?e.filter(t):e)}describe(e){const t=(e?this.resolve(e):this).clone(),n=super.describe(e);if(t.innerType){var r;let a=e;null!=(r=a)&&r.value&&(a=Object.assign({},a,{parent:a.value,value:a.value[0]})),n.innerType=t.innerType.describe(a)}return n}}co.prototype;class uo extends Rl{constructor(e){super({type:"tuple",spec:{types:e},check(e){const t=this.spec.types;return Array.isArray(e)&&e.length===t.length}}),this.withMutation(()=>{this.typeError(yl.notType)})}_cast(e,t){const{types:n}=this.spec,r=super._cast(e,t);if(!this._typeCheck(r))return r;let a=!1;const s=n.map((e,n)=>{const s=e.cast(r[n],Object.assign({},t,{path:"".concat(t.path||"","[").concat(n,"]")}));return s!==r[n]&&(a=!0),s});return a?s:r}_validate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=this.spec.types;super._validate(e,t,n,(s,i)=>{var l;if(!this._typeCheck(i))return void r(s,i);let o=[];for(let[n,r]of a.entries()){var c;o[n]=r.asNestedTest({options:t,index:n,parent:i,parentPath:t.path,originalParent:null!=(c=t.originalValue)?c:e})}this.runTests({value:i,tests:o,originalValue:null!=(l=t.originalValue)?l:e,options:t},n,e=>r(e.concat(s),i))})}describe(e){const t=(e?this.resolve(e):this).clone(),n=super.describe(e);return n.innerType=t.spec.types.map((t,n)=>{var r;let a=e;return null!=(r=a)&&r.value&&(a=Object.assign({},a,{parent:a.value,value:a.value[n]})),t.describe(a)}),n}}uo.prototype;const mo=lo({email:Kl().email("Invalid email").required("Email is required"),password:Kl().required("Password is required"),business_subdomain:Kl().when("userType",{is:"business",then:e=>e.required("Business subdomain is required"),otherwise:e=>e.nullable()})}),po=()=>{const{login:e}=as(),[t,n]=(0,r.useState)("business"),[a,s]=(0,r.useState)(!1),{register:i,handleSubmit:l,formState:{errors:o},setValue:c,watch:u}=Vi({resolver:Ki(mo),context:{userType:t}});r.useEffect(()=>{"super_admin"===t&&c("business_subdomain","")},[t,c]);return(0,Xa.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,Xa.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Modern POS System"}),(0,Xa.jsx)("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Sign in to your account"})]}),(0,Xa.jsxs)("div",{className:"flex space-x-4 justify-center",children:[(0,Xa.jsx)("button",{type:"button",onClick:()=>n("super_admin"),className:"px-4 py-2 text-sm font-medium rounded-md ".concat("super_admin"===t?"bg-primary-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Super Admin"}),(0,Xa.jsx)("button",{type:"button",onClick:()=>n("business"),className:"px-4 py-2 text-sm font-medium rounded-md ".concat("business"===t?"bg-primary-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Business User"})]}),(0,Xa.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:l(async n=>{s(!0);try{const r={email:n.email,password:n.password};"business"===t&&n.business_subdomain&&(r.business_subdomain=n.business_subdomain),await e(r)}catch(r){console.error("Login failed:",r)}finally{s(!1)}}),children:[(0,Xa.jsxs)("div",{className:"space-y-4",children:["business"===t&&(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{htmlFor:"business_subdomain",className:"form-label",children:"Business Subdomain"}),(0,Xa.jsx)("input",Ne({id:"business_subdomain",type:"text",className:"form-input",placeholder:"Enter your business subdomain"},i("business_subdomain"))),o.business_subdomain&&(0,Xa.jsx)("p",{className:"form-error",children:o.business_subdomain.message})]}),(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email Address"}),(0,Xa.jsx)("input",Ne({id:"email",type:"email",autoComplete:"email",className:"form-input",placeholder:"Enter your email"},i("email"))),o.email&&(0,Xa.jsx)("p",{className:"form-error",children:o.email.message})]}),(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{htmlFor:"password",className:"form-label",children:"Password"}),(0,Xa.jsx)("input",Ne({id:"password",type:"password",autoComplete:"current-password",className:"form-input",placeholder:"Enter your password"},i("password"))),o.password&&(0,Xa.jsx)("p",{className:"form-error",children:o.password.message})]})]}),(0,Xa.jsx)("div",{children:(0,Xa.jsx)("button",{type:"submit",disabled:a,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:a?(0,Xa.jsxs)("div",{className:"flex items-center",children:[(0,Xa.jsx)(fs,{}),(0,Xa.jsx)("span",{className:"ml-2",children:"Signing in..."})]}):"Sign in"})}),"super_admin"===t&&(0,Xa.jsxs)("div",{className:"text-center text-sm text-gray-600",children:[(0,Xa.jsx)("p",{children:"Super Admin Access"}),(0,Xa.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Contact system administrator for credentials"})]})]})]})})};var fo=n(950),ho=n.t(fo,2);function xo(){return xo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xo.apply(this,arguments)}function go(e,t){if(null==e)return{};var n,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const vo=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(Jn){}new Map;const yo=a.startTransition;ho.flushSync,a.useId;function bo(e){let{basename:t,children:n,future:a,window:s}=e,i=r.useRef();var l;null==i.current&&(i.current=(void 0===(l={window:s,v5Compat:!0})&&(l={}),f(function(e,t){let{pathname:n,search:r,hash:a}=e.location;return d("",{pathname:n,search:r,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:m(t)},null,l)));let o=i.current,[c,u]=r.useState({action:o.action,location:o.location}),{v7_startTransition:p}=a||{},h=r.useCallback(e=>{p&&yo?yo(()=>u(e)):u(e)},[u,p]);return r.useLayoutEffect(()=>o.listen(h),[o,h]),r.useEffect(()=>pe(a),[a]),r.createElement(xe,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:o,future:a})}const wo="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,jo=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,No=r.forwardRef(function(e,t){let n,{onClick:a,relative:s,reloadDocument:i,replace:l,state:c,target:u,to:d,preventScrollReset:p,viewTransition:f}=e,h=go(e,vo),{basename:x}=r.useContext(W),g=!1;if("string"===typeof d&&jo.test(d)&&(n=d,wo))try{let e=new URL(window.location.href),t=d.startsWith("//")?new URL(e.protocol+d):new URL(d),n=P(t.pathname,x);t.origin===e.origin&&null!=n?d=n+t.search+t.hash:g=!0}catch(Jn){}let v=function(e,t){let{relative:n}=void 0===t?{}:t;Q()||o(!1);let{basename:a,navigator:s}=r.useContext(W),{hash:i,pathname:l,search:c}=ee(e,{relative:n}),u=l;return"/"!==a&&(u="/"===l?a:D([a,l])),s.createHref({pathname:u,search:c,hash:i})}(d,{relative:s}),y=function(e,t){let{target:n,replace:a,state:s,preventScrollReset:i,relative:l,viewTransition:o}=void 0===t?{}:t,c=X(),u=Y(),d=ee(e,{relative:l});return r.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==a?a:m(u)===m(d);c(e,{replace:n,state:s,preventScrollReset:i,relative:l,viewTransition:o})}},[u,c,d,a,s,n,e,i,l,o])}(d,{replace:l,state:c,target:u,preventScrollReset:p,relative:s,viewTransition:f});return r.createElement("a",xo({},h,{href:n||v,onClick:g||i?a:function(e){a&&a(e),e.defaultPrevented||y(e)},ref:t,target:u}))});var ko,So;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(ko||(ko={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(So||(So={}));const _o=["title","titleId"];function Eo(e,t){let{title:n,titleId:a}=e,s=xs(e,_o);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),n?r.createElement("title",{id:a},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const Co=r.forwardRef(Eo),To=["title","titleId"];function Oo(e,t){let{title:n,titleId:a}=e,s=xs(e,To);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),n?r.createElement("title",{id:a},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"}))}const Po=r.forwardRef(Oo),Fo=["title","titleId"];function Lo(e,t){let{title:n,titleId:a}=e,s=xs(e,Fo);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),n?r.createElement("title",{id:a},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const Ro=r.forwardRef(Lo),Ao=["title","titleId"];function Do(e,t){let{title:n,titleId:a}=e,s=xs(e,Ao);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),n?r.createElement("title",{id:a},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))}const Io=r.forwardRef(Do),zo=e=>{var t;let{children:n}=e;const r=Y(),{user:a,logout:s}=as(),i=[{name:"Dashboard",href:"/super-admin",icon:Co},{name:"Businesses",href:"/super-admin/businesses",icon:Po}],l=e=>"/super-admin"===e?r.pathname===e:r.pathname.startsWith(e);return(0,Xa.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,Xa.jsxs)("div",{className:"fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg",children:[(0,Xa.jsx)("div",{className:"flex h-16 items-center justify-center border-b border-gray-200",children:(0,Xa.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"POS Super Admin"})}),(0,Xa.jsx)("nav",{className:"mt-8 px-4",children:(0,Xa.jsx)("div",{className:"space-y-2",children:i.map(e=>(0,Xa.jsxs)(No,{to:e.href,className:"flex items-center px-4 py-2 text-sm font-medium rounded-md ".concat(l(e.href)?"bg-primary-100 text-primary-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[(0,Xa.jsx)(e.icon,{className:"mr-3 h-5 w-5"}),e.name]},e.name))})})]}),(0,Xa.jsxs)("div",{className:"pl-64",children:[(0,Xa.jsx)("div",{className:"sticky top-0 z-10 bg-white shadow-sm border-b border-gray-200",children:(0,Xa.jsxs)("div",{className:"flex h-16 items-center justify-between px-6",children:[(0,Xa.jsx)("div",{children:(0,Xa.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:(null===(t=i.find(e=>l(e.href)))||void 0===t?void 0:t.name)||"Super Admin"})}),(0,Xa.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Xa.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Xa.jsx)(Ro,{className:"h-5 w-5 text-gray-400"}),(0,Xa.jsx)("span",{className:"text-sm text-gray-700",children:null===a||void 0===a?void 0:a.full_name})]}),(0,Xa.jsxs)("button",{onClick:s,className:"flex items-center space-x-1 text-sm text-gray-500 hover:text-gray-700",children:[(0,Xa.jsx)(Io,{className:"h-4 w-4"}),(0,Xa.jsx)("span",{children:"Logout"})]})]})]})}),(0,Xa.jsx)("main",{className:"p-6",children:n})]})]})},Mo=()=>{const{user:e,business:t}=as(),[n,a]=(0,r.useState)(!1),[s,i]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{null!==e&&(()=>{if("super_admin"===(null===e||void 0===e?void 0:e.role))return a(!1),void i(!1);t&&"suspended"===t.status?a(!0):a(!1),i(!1)})()},[e,t]),{isBusinessSuspended:n,isLoading:s,businessName:null===t||void 0===t?void 0:t.name,userRole:null===e||void 0===e?void 0:e.role}},Uo=["title","titleId"];function Bo(e,t){let{title:n,titleId:a}=e,s=xs(e,Uo);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),n?r.createElement("title",{id:a},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const Vo=r.forwardRef(Bo),Ho=e=>{let{businessName:t}=e;return(0,Xa.jsx)("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:(0,Xa.jsxs)("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg p-8 text-center",children:[(0,Xa.jsx)("div",{className:"flex justify-center mb-4",children:(0,Xa.jsx)("div",{className:"bg-red-100 p-3 rounded-full",children:(0,Xa.jsx)(Vo,{className:"h-8 w-8 text-red-600"})})}),(0,Xa.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Business Suspended"}),(0,Xa.jsxs)("div",{className:"flex items-center justify-center mb-4",children:[(0,Xa.jsx)(Po,{className:"h-5 w-5 text-gray-400 mr-2"}),(0,Xa.jsx)("span",{className:"text-gray-600",children:t})]}),(0,Xa.jsx)("p",{className:"text-gray-600 mb-6",children:"This business account has been suspended. Access to the POS system, customer dashboard, and settings is temporarily unavailable."}),(0,Xa.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-4 mb-6",children:(0,Xa.jsxs)("p",{className:"text-sm text-yellow-800",children:[(0,Xa.jsx)("strong",{children:"For business owners:"})," Please contact support to resolve any issues and reactivate your account."]})}),(0,Xa.jsxs)("div",{className:"space-y-3",children:[(0,Xa.jsx)("p",{className:"text-sm text-gray-500",children:"Need help? Contact support:"}),(0,Xa.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,Xa.jsx)("p",{children:"Email: support@pos.com"}),(0,Xa.jsx)("p",{children:"Phone: 1-800-POS-HELP"})]})]})]})})},qo=["title","titleId"];function $o(e,t){let{title:n,titleId:a}=e,s=xs(e,qo);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),n?r.createElement("title",{id:a},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const Wo=r.forwardRef($o),Ko=["title","titleId"];function Zo(e,t){let{title:n,titleId:a}=e,s=xs(e,Ko);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),n?r.createElement("title",{id:a},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"}))}const Go=r.forwardRef(Zo),Qo=["title","titleId"];function Yo(e,t){let{title:n,titleId:a}=e,s=xs(e,Qo);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),n?r.createElement("title",{id:a},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6Z"}))}const Jo=r.forwardRef(Yo),Xo=["title","titleId"];function ec(e,t){let{title:n,titleId:a}=e,s=xs(e,Xo);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),n?r.createElement("title",{id:a},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"}))}const tc=r.forwardRef(ec),nc=["title","titleId"];function rc(e,t){let{title:n,titleId:a}=e,s=xs(e,nc);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),n?r.createElement("title",{id:a},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))}const ac=r.forwardRef(rc),sc=["title","titleId"];function ic(e,t){let{title:n,titleId:a}=e,s=xs(e,sc);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),n?r.createElement("title",{id:a},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12a7.5 7.5 0 0 0 15 0m-15 0a7.5 7.5 0 1 1 15 0m-15 0H3m16.5 0H21m-1.5 0H12m-8.457 3.077 1.41-.513m14.095-5.13 1.41-.513M5.106 17.785l1.15-.964m11.49-9.642 1.149-.964M7.501 19.795l.75-1.3m7.5-12.99.75-1.3m-6.063 16.658.26-1.477m2.605-14.772.26-1.477m0 17.726-.26-1.477M10.698 4.614l-.26-1.477M16.5 19.794l-.75-1.299M7.5 4.205 12 12m6.894 5.785-1.149-.964M6.256 7.178l-1.15-.964m15.352 8.864-1.41-.513M4.954 9.435l-1.41-.514M12.002 12l-3.75 6.495"}))}const lc=r.forwardRef(ic),oc=e=>{var t;let{children:n}=e;const r=Y(),{user:a,business:s,logout:i}=as(),{isBusinessSuspended:l,isLoading:o,businessName:c,userRole:u}=Mo();if(!o&&l&&"super_admin"!==u)return(0,Xa.jsx)(Ho,{businessName:c});const d=[{name:"Dashboard",href:"/business",icon:Wo},{name:"Products",href:"/business/products",icon:Go},{name:"Categories",href:"/business/categories",icon:Jo},{name:"Customers",href:"/business/customers",icon:Ro},{name:"Inventory",href:"/business/inventory",icon:tc,isPlaceholder:!0},{name:"Reports",href:"/business/reports",icon:Co,submenu:[{name:"Sales Reports",href:"/business/reports"},{name:"Profit Report",href:"/business/profit-report",adminOnly:!0}]}],m=[{name:"Staff",href:"/business/users",icon:ac},{name:"Settings",href:"/business/settings",icon:lc}],p=a&&("business_admin"===a.role||"super_admin"===a.role),f=[...d,...m],h=e=>"/business"===e?r.pathname===e:r.pathname.startsWith(e);return(0,Xa.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,Xa.jsxs)("div",{className:"fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg",children:[(0,Xa.jsx)("div",{className:"flex h-16 items-center justify-center border-b border-gray-200",children:(0,Xa.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Xa.jsx)(Po,{className:"h-6 w-6 text-primary-600"}),(0,Xa.jsx)("h1",{className:"text-lg font-bold text-gray-900",children:(null===s||void 0===s?void 0:s.name)||"Business Admin"})]})}),(0,Xa.jsxs)("nav",{className:"mt-8 px-4",children:[(0,Xa.jsx)("div",{className:"space-y-2",children:f.map(e=>(0,Xa.jsx)("div",{children:e.submenu?(0,Xa.jsxs)("div",{className:"space-y-1",children:[(0,Xa.jsxs)(No,{to:e.href,className:"flex items-center px-4 py-2 text-sm font-medium rounded-md ".concat(h(e.href)?"bg-primary-100 text-primary-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[(0,Xa.jsx)(e.icon,{className:"mr-3 h-5 w-5"}),e.name]}),(0,Xa.jsx)("div",{className:"ml-8 space-y-1",children:e.submenu.map(e=>e.adminOnly&&!p?null:(0,Xa.jsx)(No,{to:e.href,className:"flex items-center px-3 py-1.5 text-xs font-medium rounded-md ".concat(h(e.href)?"bg-primary-50 text-primary-600":"text-gray-500 hover:bg-gray-50 hover:text-gray-700"),children:e.name},e.name))})]}):e.isPlaceholder?(0,Xa.jsxs)("div",{className:"flex items-center px-4 py-2 text-sm font-medium rounded-md text-gray-400 cursor-not-allowed relative",title:"Coming soon - Inventory management functionality",children:[(0,Xa.jsx)(e.icon,{className:"mr-3 h-5 w-5"}),e.name,(0,Xa.jsx)("span",{className:"ml-auto text-xs bg-yellow-100 text-yellow-600 px-2 py-0.5 rounded-full",children:"Soon"})]}):(0,Xa.jsxs)(No,{to:e.href,className:"flex items-center px-4 py-2 text-sm font-medium rounded-md ".concat(h(e.href)?"bg-primary-100 text-primary-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[(0,Xa.jsx)(e.icon,{className:"mr-3 h-5 w-5"}),e.name]})},e.name))}),(0,Xa.jsx)("div",{className:"mt-8 pt-8 border-t border-gray-200",children:(0,Xa.jsxs)(No,{to:"/pos",className:"flex items-center px-4 py-2 text-sm font-medium rounded-md bg-green-100 text-green-700 hover:bg-green-200",children:[(0,Xa.jsx)(Go,{className:"mr-3 h-5 w-5"}),"Open POS"]})})]})]}),(0,Xa.jsxs)("div",{className:"pl-64",children:[(0,Xa.jsx)("div",{className:"sticky top-0 z-10 bg-white shadow-sm border-b border-gray-200",children:(0,Xa.jsxs)("div",{className:"flex h-16 items-center justify-between px-6",children:[(0,Xa.jsx)("div",{children:(0,Xa.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:(null===(t=f.find(e=>h(e.href)))||void 0===t?void 0:t.name)||"Business Admin"})}),(0,Xa.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Xa.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Xa.jsx)(Ro,{className:"h-5 w-5 text-gray-400"}),(0,Xa.jsx)("span",{className:"text-sm text-gray-700",children:null===a||void 0===a?void 0:a.full_name})]}),(0,Xa.jsxs)("button",{onClick:i,className:"flex items-center space-x-1 text-sm text-gray-500 hover:text-gray-700",children:[(0,Xa.jsx)(Io,{className:"h-4 w-4"}),(0,Xa.jsx)("span",{children:"Logout"})]})]})]})}),(0,Xa.jsx)("main",{className:"p-6",children:n})]})]})},cc=["title","titleId"];function uc(e,t){let{title:n,titleId:a}=e,s=xs(e,cc);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),n?r.createElement("title",{id:a},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z"}))}const dc=r.forwardRef(uc),mc=["title","titleId"];function pc(e,t){let{title:n,titleId:a}=e,s=xs(e,mc);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),n?r.createElement("title",{id:a},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const fc=r.forwardRef(pc),hc=e=>{let{children:t}=e;const n=Y(),{user:r,business:a,logout:s}=as(),{isBusinessSuspended:i,isLoading:l,businessName:o,userRole:c}=Mo();if(!l&&i&&"super_admin"!==c)return(0,Xa.jsx)(Ho,{businessName:o});const u=[{name:"POS",href:"/pos",icon:Go},{name:"Sales History",href:"/pos/sales",icon:dc}];return(0,Xa.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,Xa.jsx)("div",{className:"sticky top-0 z-20 bg-white shadow-sm border-b border-gray-200",children:(0,Xa.jsxs)("div",{className:"flex h-16 items-center justify-between px-6",children:[(0,Xa.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Xa.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Xa.jsx)(Po,{className:"h-6 w-6 text-primary-600"}),(0,Xa.jsx)("h1",{className:"text-lg font-bold text-gray-900",children:(null===a||void 0===a?void 0:a.name)||"POS System"})]}),(0,Xa.jsx)("nav",{className:"flex space-x-4",children:u.map(e=>{return(0,Xa.jsxs)(No,{to:e.href,className:"flex items-center px-3 py-2 text-sm font-medium rounded-md ".concat((t=e.href,("/pos"===t?n.pathname===t:n.pathname.startsWith(t))?"bg-primary-100 text-primary-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900")),children:[(0,Xa.jsx)(e.icon,{className:"mr-2 h-4 w-4"}),e.name]},e.name);var t})})]}),(0,Xa.jsxs)("div",{className:"flex items-center space-x-4",children:["business_admin"===(null===r||void 0===r?void 0:r.role)&&(0,Xa.jsx)(No,{to:"/business",className:"text-sm text-primary-600 hover:text-primary-700 font-medium",children:"Back to Admin"}),(0,Xa.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Xa.jsx)(fc,{className:"h-5 w-5 text-gray-400"}),(0,Xa.jsx)("span",{className:"text-sm text-gray-700",children:null===r||void 0===r?void 0:r.full_name}),(0,Xa.jsxs)("span",{className:"text-xs text-gray-500",children:["(",null===r||void 0===r?void 0:r.role,")"]})]}),(0,Xa.jsxs)("button",{onClick:s,className:"flex items-center space-x-1 text-sm text-gray-500 hover:text-gray-700",children:[(0,Xa.jsx)(Io,{className:"h-4 w-4"}),(0,Xa.jsx)("span",{children:"Logout"})]})]})]})}),(0,Xa.jsx)("main",{className:"p-6",children:t})]})},xc=["title","titleId"];function gc(e,t){let{title:n,titleId:a}=e,s=xs(e,xc);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),n?r.createElement("title",{id:a},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const vc=r.forwardRef(gc),yc=()=>{const[e,t]=(0,r.useState)(!0),[n,a]=(0,r.useState)({totalBusinesses:0,activeBusinesses:0,totalUsers:0,recentBusinesses:[]});(0,r.useEffect)(()=>{s()},[]);const s=async()=>{try{const e=(await ha()).data,t=e.filter(e=>"active"===e.status).length,n=e.sort((e,t)=>new Date(t.created_at)-new Date(e.created_at)).slice(0,5);a({totalBusinesses:e.length,activeBusinesses:t,totalUsers:0,recentBusinesses:n})}catch(e){console.error("Failed to fetch dashboard data:",e)}finally{t(!1)}};if(e)return(0,Xa.jsx)(hs,{message:"Loading dashboard..."});const i=[{name:"Total Businesses",value:n.totalBusinesses,icon:Po,color:"bg-blue-500"},{name:"Active Businesses",value:n.activeBusinesses,icon:Co,color:"bg-green-500"},{name:"Total Users",value:n.totalUsers,icon:Ro,color:"bg-purple-500"},{name:"Revenue",value:"$0",icon:vc,color:"bg-yellow-500"}],l=e=>{const t={active:"bg-green-100 text-green-800",suspended:"bg-red-100 text-red-800",inactive:"bg-gray-100 text-gray-800"};return(0,Xa.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full ".concat(t[e]||t.inactive),children:e})};return(0,Xa.jsxs)("div",{className:"space-y-6",children:[(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),(0,Xa.jsx)("p",{className:"text-gray-600",children:"Welcome to the Super Admin dashboard"})]}),(0,Xa.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:i.map(e=>(0,Xa.jsx)("div",{className:"card",children:(0,Xa.jsx)("div",{className:"card-body",children:(0,Xa.jsxs)("div",{className:"flex items-center",children:[(0,Xa.jsx)("div",{className:"p-3 rounded-lg ".concat(e.color),children:(0,Xa.jsx)(e.icon,{className:"h-6 w-6 text-white"})}),(0,Xa.jsxs)("div",{className:"ml-4",children:[(0,Xa.jsx)("p",{className:"text-sm font-medium text-gray-600",children:e.name}),(0,Xa.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.value})]})]})})},e.name))}),(0,Xa.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,Xa.jsxs)("div",{className:"card",children:[(0,Xa.jsx)("div",{className:"card-header",children:(0,Xa.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Recent Businesses"})}),(0,Xa.jsx)("div",{className:"card-body",children:n.recentBusinesses.length>0?(0,Xa.jsx)("div",{className:"space-y-4",children:n.recentBusinesses.map(e=>(0,Xa.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,Xa.jsx)("p",{className:"text-sm text-gray-500",children:e.subdomain})]}),(0,Xa.jsxs)("div",{className:"flex items-center space-x-2",children:[l(e.status),(0,Xa.jsx)("span",{className:"text-xs text-gray-500",children:new Date(e.created_at).toLocaleDateString()})]})]},e.id))}):(0,Xa.jsx)("p",{className:"text-gray-500 text-center py-8",children:"No businesses yet"})})]}),(0,Xa.jsxs)("div",{className:"card",children:[(0,Xa.jsx)("div",{className:"card-header",children:(0,Xa.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Quick Actions"})}),(0,Xa.jsx)("div",{className:"card-body",children:(0,Xa.jsxs)("div",{className:"space-y-4",children:[(0,Xa.jsx)("button",{onClick:()=>window.location.href="/super-admin/businesses",className:"w-full btn-primary text-left",children:(0,Xa.jsxs)("div",{className:"flex items-center",children:[(0,Xa.jsx)(Po,{className:"h-5 w-5 mr-3"}),(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("p",{className:"font-medium",children:"Manage Businesses"}),(0,Xa.jsx)("p",{className:"text-sm opacity-75",children:"Create, edit, and monitor businesses"})]})]})}),(0,Xa.jsx)("button",{className:"w-full btn-secondary text-left",disabled:!0,children:(0,Xa.jsxs)("div",{className:"flex items-center",children:[(0,Xa.jsx)(Co,{className:"h-5 w-5 mr-3"}),(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("p",{className:"font-medium",children:"View Reports"}),(0,Xa.jsx)("p",{className:"text-sm opacity-75",children:"System-wide analytics (Coming soon)"})]})]})})]})})]})]})]})},bc=["title","titleId"];function wc(e,t){let{title:n,titleId:a}=e,s=xs(e,bc);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),n?r.createElement("title",{id:a},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const jc=r.forwardRef(wc),Nc=["title","titleId"];function kc(e,t){let{title:n,titleId:a}=e,s=xs(e,Nc);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),n?r.createElement("title",{id:a},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const Sc=r.forwardRef(kc),_c=lo({name:Kl().required("Business name is required"),subdomain:Kl().required("Subdomain is required").matches(/^[a-z0-9-]+$/,"Subdomain must contain only lowercase letters, numbers, and hyphens"),contact_email:Kl().email("Invalid email").required("Contact email is required"),phone:Kl(),address:Kl(),admin_name:Kl().required("Admin name is required"),admin_email:Kl().email("Invalid email").required("Admin email is required"),admin_password:Kl().min(6,"Password must be at least 6 characters").required("Password is required"),description:Kl()}),Ec=()=>{const[e,t]=(0,r.useState)([]),[n,a]=(0,r.useState)(!0),[s,i]=(0,r.useState)(!1),[l,o]=(0,r.useState)(!1),{register:c,handleSubmit:u,formState:{errors:d},reset:m}=Vi({resolver:Ki(_c)});(0,r.useEffect)(()=>{p()},[]);const p=async()=>{try{const e=await ha();t(e.data)}catch(e){console.error("Failed to fetch businesses:",e),da.error("Failed to load businesses")}finally{a(!1)}},f=e=>{const t={active:"bg-green-100 text-green-800",suspended:"bg-red-100 text-red-800",inactive:"bg-gray-100 text-gray-800"};return(0,Xa.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full ".concat(t[e]||t.inactive),children:e})};return n?(0,Xa.jsx)(hs,{message:"Loading businesses..."}):(0,Xa.jsxs)("div",{className:"space-y-6",children:[(0,Xa.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Business Management"}),(0,Xa.jsx)("p",{className:"text-gray-600",children:"Manage all businesses in the system"})]}),(0,Xa.jsxs)("button",{onClick:()=>i(!0),className:"btn-primary flex items-center",children:[(0,Xa.jsx)(jc,{className:"h-5 w-5 mr-2"}),"Create Business"]})]}),(0,Xa.jsx)("div",{className:"card",children:(0,Xa.jsx)("div",{className:"card-body p-0",children:e.length>0?(0,Xa.jsx)("div",{className:"overflow-x-auto",children:(0,Xa.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Xa.jsx)("thead",{className:"bg-gray-50",children:(0,Xa.jsxs)("tr",{children:[(0,Xa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Business"}),(0,Xa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subdomain"}),(0,Xa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),(0,Xa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Xa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),(0,Xa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Xa.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>(0,Xa.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Xa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Xa.jsxs)("div",{className:"flex items-center",children:[(0,Xa.jsx)(Po,{className:"h-8 w-8 text-gray-400 mr-3"}),(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),e.description&&(0,Xa.jsx)("div",{className:"text-sm text-gray-500",children:e.description})]})]})}),(0,Xa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Xa.jsx)("div",{className:"text-sm text-gray-900",children:e.subdomain})}),(0,Xa.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,Xa.jsx)("div",{className:"text-sm text-gray-900",children:e.contact_email}),e.phone&&(0,Xa.jsx)("div",{className:"text-sm text-gray-500",children:e.phone})]}),(0,Xa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:f(e.status)}),(0,Xa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString()}),(0,Xa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,Xa.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Xa.jsxs)("select",{value:e.status,onChange:t=>(async(e,t)=>{try{await ga(e,t),da.success("Business status updated"),p()}catch(n){da.error("Failed to update status")}})(e.id,t.target.value),className:"text-sm border border-gray-300 rounded px-2 py-1",children:[(0,Xa.jsx)("option",{value:"active",children:"Active"}),(0,Xa.jsx)("option",{value:"suspended",children:"Suspended"}),(0,Xa.jsx)("option",{value:"inactive",children:"Inactive"})]}),(0,Xa.jsx)("button",{className:"text-gray-400 hover:text-gray-600",children:(0,Xa.jsx)(Ro,{className:"h-5 w-5",title:"View Users"})})]})})]},e.id))})]})}):(0,Xa.jsxs)("div",{className:"text-center py-12",children:[(0,Xa.jsx)(Po,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,Xa.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No businesses"}),(0,Xa.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by creating a new business."}),(0,Xa.jsx)("div",{className:"mt-6",children:(0,Xa.jsxs)("button",{onClick:()=>i(!0),className:"btn-primary",children:[(0,Xa.jsx)(jc,{className:"h-5 w-5 mr-2"}),"Create Business"]})})]})})}),s&&(0,Xa.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,Xa.jsxs)("div",{className:"relative top-20 mx-auto p-5 border w-full max-w-2xl shadow-lg rounded-md bg-white",children:[(0,Xa.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Xa.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Create New Business"}),(0,Xa.jsx)("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-gray-600",children:(0,Xa.jsx)(Sc,{className:"h-6 w-6"})})]}),(0,Xa.jsxs)("form",{onSubmit:u(async e=>{o(!0);try{await xa(e),da.success("Business created successfully!"),i(!1),m(),p()}catch(r){var t,n;const e=(null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.detail)||"Failed to create business";da.error(e)}finally{o(!1)}}),className:"space-y-4",children:[(0,Xa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{className:"form-label",children:"Business Name"}),(0,Xa.jsx)("input",Ne({type:"text",className:"form-input"},c("name"))),d.name&&(0,Xa.jsx)("p",{className:"form-error",children:d.name.message})]}),(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{className:"form-label",children:"Subdomain"}),(0,Xa.jsx)("input",Ne({type:"text",className:"form-input",placeholder:"business-name"},c("subdomain"))),d.subdomain&&(0,Xa.jsx)("p",{className:"form-error",children:d.subdomain.message})]}),(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{className:"form-label",children:"Contact Email"}),(0,Xa.jsx)("input",Ne({type:"email",className:"form-input"},c("contact_email"))),d.contact_email&&(0,Xa.jsx)("p",{className:"form-error",children:d.contact_email.message})]}),(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{className:"form-label",children:"Phone (Optional)"}),(0,Xa.jsx)("input",Ne({type:"text",className:"form-input"},c("phone"))),d.phone&&(0,Xa.jsx)("p",{className:"form-error",children:d.phone.message})]}),(0,Xa.jsxs)("div",{className:"md:col-span-2",children:[(0,Xa.jsx)("label",{className:"form-label",children:"Address (Optional)"}),(0,Xa.jsx)("input",Ne({type:"text",className:"form-input"},c("address"))),d.address&&(0,Xa.jsx)("p",{className:"form-error",children:d.address.message})]}),(0,Xa.jsxs)("div",{className:"md:col-span-2",children:[(0,Xa.jsx)("label",{className:"form-label",children:"Description (Optional)"}),(0,Xa.jsx)("textarea",Ne({className:"form-input",rows:"2"},c("description"))),d.description&&(0,Xa.jsx)("p",{className:"form-error",children:d.description.message})]})]}),(0,Xa.jsxs)("div",{className:"border-t pt-4",children:[(0,Xa.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Business Admin Details"}),(0,Xa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{className:"form-label",children:"Admin Name"}),(0,Xa.jsx)("input",Ne({type:"text",className:"form-input"},c("admin_name"))),d.admin_name&&(0,Xa.jsx)("p",{className:"form-error",children:d.admin_name.message})]}),(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{className:"form-label",children:"Admin Email"}),(0,Xa.jsx)("input",Ne({type:"email",className:"form-input"},c("admin_email"))),d.admin_email&&(0,Xa.jsx)("p",{className:"form-error",children:d.admin_email.message})]}),(0,Xa.jsxs)("div",{className:"md:col-span-2",children:[(0,Xa.jsx)("label",{className:"form-label",children:"Admin Password"}),(0,Xa.jsx)("input",Ne({type:"password",className:"form-input"},c("admin_password"))),d.admin_password&&(0,Xa.jsx)("p",{className:"form-error",children:d.admin_password.message})]})]})]}),(0,Xa.jsxs)("div",{className:"flex justify-end space-x-4 pt-4",children:[(0,Xa.jsx)("button",{type:"button",onClick:()=>i(!1),className:"btn-secondary",children:"Cancel"}),(0,Xa.jsx)("button",{type:"submit",disabled:l,className:"btn-primary flex items-center",children:l?(0,Xa.jsxs)(Xa.Fragment,{children:[(0,Xa.jsx)(fs,{}),(0,Xa.jsx)("span",{className:"ml-2",children:"Creating..."})]}):"Create Business"})]})]})]})})]})},Cc=()=>{const{business:e}=as(),{formatAmount:t}=ms(),[n,a]=(0,r.useState)({totalProducts:0,totalCategories:0,lowStockProducts:0,todaySales:0}),[s,i]=(0,r.useState)([]),[l,o]=(0,r.useState)(!0);(0,r.useEffect)(()=>{c()},[]);const c=async()=>{try{const[e,t,n,r]=await Promise.all([Na(),Aa(),Na({low_stock:!0}),$a()]);a({totalProducts:e.data.length,totalCategories:t.data.length,lowStockProducts:n.data.length,todaySales:r.data.total_revenue||0}),i(n.data.slice(0,5))}catch(e){console.error("Failed to fetch dashboard data:",e)}finally{o(!1)}};if(l)return(0,Xa.jsx)(hs,{message:"Loading dashboard..."});const u=[{name:"Products",value:n.totalProducts,icon:Go,color:"bg-blue-500",link:"/business/products"},{name:"Categories",value:n.totalCategories,icon:Jo,color:"bg-green-500",link:"/business/categories"},{name:"Low Stock Items",value:n.lowStockProducts,icon:Vo,color:"bg-yellow-500",link:"/business/products?low_stock=true"},{name:"Today's Sales",value:t(n.todaySales),icon:Co,color:"bg-purple-500",link:"/pos/sales"}];return(0,Xa.jsxs)("div",{className:"space-y-6",children:[(0,Xa.jsxs)("div",{children:[(0,Xa.jsxs)("h1",{className:"text-2xl font-bold text-gray-900",children:["Welcome to ",null===e||void 0===e?void 0:e.name,"!"]}),(0,Xa.jsx)("p",{className:"text-gray-600",children:"Manage your business operations from this dashboard"})]}),(0,Xa.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:u.map(e=>(0,Xa.jsx)(No,{to:e.link,className:"card hover:shadow-md transition-shadow",children:(0,Xa.jsx)("div",{className:"card-body",children:(0,Xa.jsxs)("div",{className:"flex items-center",children:[(0,Xa.jsx)("div",{className:"p-3 rounded-lg ".concat(e.color),children:(0,Xa.jsx)(e.icon,{className:"h-6 w-6 text-white"})}),(0,Xa.jsxs)("div",{className:"ml-4",children:[(0,Xa.jsx)("p",{className:"text-sm font-medium text-gray-600",children:e.name}),(0,Xa.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.value})]})]})})},e.name))}),(0,Xa.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,Xa.jsxs)("div",{className:"card",children:[(0,Xa.jsx)("div",{className:"card-header",children:(0,Xa.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Quick Actions"})}),(0,Xa.jsx)("div",{className:"card-body",children:(0,Xa.jsxs)("div",{className:"space-y-3",children:[(0,Xa.jsxs)(No,{to:"/business/products",className:"w-full btn-primary text-left flex items-center",children:[(0,Xa.jsx)(Go,{className:"h-5 w-5 mr-3"}),(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("p",{className:"font-medium",children:"Add Product"}),(0,Xa.jsx)("p",{className:"text-sm opacity-75",children:"Create new products for your inventory"})]})]}),(0,Xa.jsxs)(No,{to:"/business/categories",className:"w-full btn-secondary text-left flex items-center",children:[(0,Xa.jsx)(Jo,{className:"h-5 w-5 mr-3"}),(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("p",{className:"font-medium",children:"Manage Categories"}),(0,Xa.jsx)("p",{className:"text-sm opacity-75",children:"Organize your products with categories"})]})]}),(0,Xa.jsxs)(No,{to:"/pos",className:"w-full btn-success text-left flex items-center",children:[(0,Xa.jsx)(Co,{className:"h-5 w-5 mr-3"}),(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("p",{className:"font-medium",children:"Open POS"}),(0,Xa.jsx)("p",{className:"text-sm opacity-75",children:"Start processing sales"})]})]})]})})]}),(0,Xa.jsxs)("div",{className:"card",children:[(0,Xa.jsx)("div",{className:"card-header",children:(0,Xa.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Xa.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Low Stock Alerts"}),n.lowStockProducts>0&&(0,Xa.jsx)(No,{to:"/business/products?low_stock=true",className:"text-sm text-primary-600 hover:text-primary-700",children:"View All"})]})}),(0,Xa.jsx)("div",{className:"card-body",children:s.length>0?(0,Xa.jsx)("div",{className:"space-y-3",children:s.map(e=>(0,Xa.jsxs)("div",{className:"flex items-center justify-between p-3 bg-yellow-50 rounded-lg border border-yellow-200",children:[(0,Xa.jsxs)("div",{className:"flex items-center",children:[(0,Xa.jsx)(Vo,{className:"h-5 w-5 text-yellow-600 mr-3"}),(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,Xa.jsxs)("p",{className:"text-sm text-gray-500",children:["SKU: ",e.sku]})]})]}),(0,Xa.jsxs)("div",{className:"text-right",children:[(0,Xa.jsxs)("p",{className:"font-semibold text-yellow-600",children:[e.quantity," left"]}),(0,Xa.jsxs)("p",{className:"text-sm text-gray-500",children:["$",e.price]})]})]},e.id))}):(0,Xa.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,Xa.jsx)(Vo,{className:"mx-auto h-12 w-12 text-gray-400 mb-3"}),(0,Xa.jsx)("p",{children:"No low stock items"}),(0,Xa.jsx)("p",{className:"text-sm",children:"All products have sufficient stock"})]})})]})]}),0===n.totalProducts&&(0,Xa.jsx)("div",{className:"card border-primary-200 bg-primary-50",children:(0,Xa.jsx)("div",{className:"card-body",children:(0,Xa.jsxs)("div",{className:"text-center",children:[(0,Xa.jsx)(Go,{className:"mx-auto h-12 w-12 text-primary-600 mb-4"}),(0,Xa.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Get Started with Your Inventory"}),(0,Xa.jsx)("p",{className:"text-gray-600 mb-6",children:"Set up your product catalog to start using the POS system effectively."}),(0,Xa.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,Xa.jsxs)(No,{to:"/business/categories",className:"btn-secondary",children:[(0,Xa.jsx)(Jo,{className:"h-4 w-4 mr-2"}),"Create Categories"]}),(0,Xa.jsxs)(No,{to:"/business/products",className:"btn-primary",children:[(0,Xa.jsx)(jc,{className:"h-4 w-4 mr-2"}),"Add Products"]})]})]})})})]})},Tc=["title","titleId"];function Oc(e,t){let{title:n,titleId:a}=e,s=xs(e,Tc);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),n?r.createElement("title",{id:a},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))}const Pc=r.forwardRef(Oc),Fc=["title","titleId"];function Lc(e,t){let{title:n,titleId:a}=e,s=xs(e,Fc);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),n?r.createElement("title",{id:a},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const Rc=r.forwardRef(Lc),Ac=["title","titleId"];function Dc(e,t){let{title:n,titleId:a}=e,s=xs(e,Ac);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),n?r.createElement("title",{id:a},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const Ic=r.forwardRef(Dc),zc=["title","titleId"];function Mc(e,t){let{title:n,titleId:a}=e,s=xs(e,zc);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),n?r.createElement("title",{id:a},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Uc=r.forwardRef(Mc);const Bc=e=>{let{filters:t={},onFilterChange:n,loading:a=!1,className:s="",showDateRange:i=!0,showSearch:l=!0,searchPlaceholder:o="Search by name, SKU, ID...",initialFilters:c={},debounceMs:u=400,enablePersistence:d=!0,persistenceKey:m="global-filter"}=e;const[p,f]=(0,r.useState)(c),[h,x]=(0,r.useState)(c.search||""),[g,v]=(0,r.useState)(!1),y=[{label:"Today",value:"today"},{label:"Yesterday",value:"yesterday"},{label:"Last 7 Days",value:"last7days"},{label:"This Month",value:"thismonth"},{label:"Last 30 Days",value:"last30days"},{label:"Custom Range",value:"custom"}],b=(0,r.useCallback)(function(e,t){let n;return function(){for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];const i=()=>{clearTimeout(n),e(...a)};clearTimeout(n),n=setTimeout(i,t)}}(e=>{w("search",e)},u),[u]),w=(e,t)=>{const r=Ne({},p);""===t||null===t||void 0===t?delete r[e]:r[e]=t,f(r),d&&localStorage.setItem(m,JSON.stringify(r)),n&&n(r)},j=e=>{if("custom"===e)return void w("date_preset",e);const t=(e=>{const t=new Date,n=new Date(t.getFullYear(),t.getMonth(),t.getDate());switch(e){case"today":return{start_date:n.toISOString().split("T")[0],end_date:n.toISOString().split("T")[0]};case"yesterday":const e=new Date(n);return e.setDate(n.getDate()-1),{start_date:e.toISOString().split("T")[0],end_date:e.toISOString().split("T")[0]};case"last7days":const r=new Date(n);return r.setDate(n.getDate()-7),{start_date:r.toISOString().split("T")[0],end_date:n.toISOString().split("T")[0]};case"thismonth":return{start_date:new Date(t.getFullYear(),t.getMonth(),1).toISOString().split("T")[0],end_date:n.toISOString().split("T")[0]};case"last30days":const a=new Date(n);return a.setDate(n.getDate()-30),{start_date:a.toISOString().split("T")[0],end_date:n.toISOString().split("T")[0]};default:return{start_date:"",end_date:""}}})(e),r=Ne(Ne({},p),{},{date_preset:e,start_date:t.start_date,end_date:t.end_date});f(r),d&&localStorage.setItem(m,JSON.stringify(r)),n&&n(r)};(0,r.useEffect)(()=>{if(d){const t=localStorage.getItem(m);if(t)try{const e=JSON.parse(t);f(e),x(e.search||""),n&&n(e)}catch(e){console.error("Error loading saved filters:",e)}}},[d,m,n]);const N=Object.keys(p).length;return(0,Xa.jsxs)("div",{className:"bg-white border rounded-lg shadow-sm ".concat(s),children:[(0,Xa.jsx)("div",{className:"px-4 py-3 border-b",children:(0,Xa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Xa.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Xa.jsx)(Pc,{className:"h-5 w-5 text-gray-500"}),(0,Xa.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"Filters"}),N>0&&(0,Xa.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:N})]}),(0,Xa.jsxs)("div",{className:"flex items-center space-x-2",children:[N>0&&(0,Xa.jsx)("button",{onClick:()=>{f({}),x(""),d&&localStorage.removeItem(m),n&&n({})},className:"text-sm text-gray-500 hover:text-gray-700",children:"Clear all"}),(0,Xa.jsx)("button",{onClick:()=>v(!g),className:"sm:hidden p-1 text-gray-500 hover:text-gray-700",children:g?(0,Xa.jsx)(Sc,{className:"h-5 w-5"}):(0,Xa.jsx)(Pc,{className:"h-5 w-5"})})]})]})}),(0,Xa.jsx)("div",{className:"p-4 space-y-4 ".concat(g?"block":"hidden sm:block"),children:(0,Xa.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[i&&(0,Xa.jsxs)("div",{className:"space-y-2",children:[(0,Xa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Date Range"}),(0,Xa.jsxs)("select",{value:p.date_preset||"",onChange:e=>j(e.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm",children:[(0,Xa.jsx)("option",{value:"",children:"All time"}),y.map(e=>(0,Xa.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),"custom"===p.date_preset&&(0,Xa.jsxs)(Xa.Fragment,{children:[(0,Xa.jsxs)("div",{className:"space-y-2",children:[(0,Xa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Start Date"}),(0,Xa.jsxs)("div",{className:"relative",children:[(0,Xa.jsx)(Rc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,Xa.jsx)("input",{type:"date",value:p.start_date||"",onChange:e=>w("start_date",e.target.value),className:"w-full pl-10 rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm"})]})]}),(0,Xa.jsxs)("div",{className:"space-y-2",children:[(0,Xa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"End Date"}),(0,Xa.jsxs)("div",{className:"relative",children:[(0,Xa.jsx)(Rc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,Xa.jsx)("input",{type:"date",value:p.end_date||"",onChange:e=>w("end_date",e.target.value),className:"w-full pl-10 rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm"})]})]})]}),l&&(0,Xa.jsxs)("div",{className:"space-y-2",children:[(0,Xa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Search"}),(0,Xa.jsxs)("div",{className:"relative",children:[(0,Xa.jsx)(Ic,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,Xa.jsx)("input",{type:"text",value:h,onChange:e=>{const t=e.target.value;x(t),b(t)},placeholder:o,className:"w-full pl-10 pr-10 rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm"}),h&&(0,Xa.jsx)("button",{onClick:()=>{x(""),w("search","")},className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:(0,Xa.jsx)(Sc,{className:"h-4 w-4"})})]})]}),Object.entries(t).map(e=>{var t;let[n,r]=e;return(0,Xa.jsxs)("div",{className:"space-y-2",children:[(0,Xa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:r.label}),(0,Xa.jsxs)("select",{value:p[n]||"",onChange:e=>w(n,e.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm",disabled:a||r.loading,children:[(0,Xa.jsx)("option",{value:"",children:r.placeholder||"All ".concat(r.label.toLowerCase())}),null===(t=r.options)||void 0===t?void 0:t.map(e=>(0,Xa.jsx)("option",{value:e.value,children:e.label},e.value))]})]},n)})]})}),N>0&&(0,Xa.jsx)("div",{className:"px-4 py-3 border-t bg-gray-50",children:(0,Xa.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries(p).map(e=>{var n,r;let[a,s]=e;if(!s||"start_date"===a||"end_date"===a)return null;let i=s;if("date_preset"===a){const e=y.find(e=>e.value===s);i=e?e.label:s}else if("search"===a)i='"'.concat(s,'"');else if(null!==(n=t[a])&&void 0!==n&&n.options){const e=t[a].options.find(e=>e.value===s);i=e?e.label:s}return(0,Xa.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800",children:[(0,Xa.jsxs)("span",{className:"font-medium",children:[(null===(r=t[a])||void 0===r?void 0:r.label)||a,":"]}),(0,Xa.jsx)("span",{className:"ml-1",children:i}),(0,Xa.jsx)("button",{onClick:()=>(e=>{"search"===e&&x(""),w(e,null)})(a),className:"ml-2 hover:bg-blue-200 rounded-full p-0.5",children:(0,Xa.jsx)(Uc,{className:"h-3 w-3"})})]},a)})})}),a&&(0,Xa.jsx)("div",{className:"px-4 py-2 border-t",children:(0,Xa.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,Xa.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500 mr-2"}),"Applying filters..."]})})]})},Vc=e=>{let{defaultFilters:t={},persistenceKey:n="global-filter",enableUrlSync:a=!1,enablePersistence:s=!0,onFilterChange:i,apiEndpoint:l,apiParams:o={},debounceMs:c=400}=e;const[u,d]=(0,r.useState)(t),[m,p]=(0,r.useState)(!1),[f,h]=(0,r.useState)(null),[x,g]=(0,r.useState)(null),v=(0,r.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;const t=Ne({},o);return Object.entries(e).forEach(e=>{let[n,r]=e;null!==r&&void 0!==r&&""!==r&&(t[n]=r)}),t},[u,o]),y=(0,r.useCallback)(e=>{if(d(e),h(null),s)try{localStorage.setItem(n,JSON.stringify(e))}catch(f){console.warn("Failed to save filters to localStorage:",f)}if(a&&"undefined"!==typeof window){const n=new URL(window.location),r=v(e);Array.from(n.searchParams.keys()).forEach(e=>{(Object.keys(t).includes(e)||["search","start_date","end_date","date_preset"].includes(e))&&n.searchParams.delete(e)}),Object.entries(r).forEach(e=>{let[t,r]=e;r&&n.searchParams.set(t,r)}),window.history.replaceState({},"",n)}i&&i(e,v(e))},[s,n,a,v,i,t]),b=(0,r.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(l){p(!0),h(null);try{const t=v(e||u),n=new URL(l,window.location.origin);Object.entries(t).forEach(e=>{let[t,r]=e;null!==r&&void 0!==r&&""!==r&&n.searchParams.append(t,r)});const r=await fetch(n.toString(),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}});if(!r.ok)throw new Error("HTTP error! status: ".concat(r.status));const a=await r.json();g(a)}catch(f){console.error("Filter data fetch error:",f),h(f.message)}finally{p(!1)}}},[l,u,v]);(0,r.useEffect)(()=>{let e=Ne({},t);if(s)try{const t=localStorage.getItem(n);if(t){const n=JSON.parse(t);e=Ne(Ne({},e),n)}}catch(f){console.warn("Failed to load filters from localStorage:",f)}if(a&&"undefined"!==typeof window){const n=new URLSearchParams(window.location.search),r={};for(const[e,a]of n.entries())(Object.keys(t).includes(e)||["search","start_date","end_date","date_preset"].includes(e))&&(r[e]=a);e=Ne(Ne({},e),r)}d(e)},[t,s,a,n]),(0,r.useEffect)(()=>{if(l){const e=setTimeout(()=>{b()},c);return()=>clearTimeout(e)}},[b,l,c]);const w=(0,r.useCallback)(()=>{y({})},[y]),j=(0,r.useCallback)((e,t)=>{const n=Ne({},u);null===t||void 0===t||""===t?delete n[e]:n[e]=t,y(n)},[u,y]),N=(0,r.useCallback)(function(){return Ne({filters:u,onFilterChange:y,loading:m,error:f,clearFilters:w,updateFilter:j,generateQueryParams:v},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})},[u,y,m,f,w,j,v]),k=(0,r.useCallback)(()=>{b()},[b]),S=(0,r.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"excel",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(l||t)try{p(!0);const n=v(),r=t||"".concat(l,"/export"),a=new URL(r,window.location.origin);a.searchParams.append("format",e),Object.entries(n).forEach(e=>{let[t,n]=e;null!==n&&void 0!==n&&""!==n&&a.searchParams.append(t,n)});const s=await fetch(a.toString(),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(!s.ok)throw new Error("Export failed: ".concat(s.status));const i=await s.blob(),o=window.URL.createObjectURL(i),c=document.createElement("a");c.href=o,c.download="export_".concat(Date.now(),".").concat("excel"===e?"xlsx":e),document.body.appendChild(c),c.click(),window.URL.revokeObjectURL(o),document.body.removeChild(c)}catch(f){console.error("Export error:",f),h(f.message)}finally{p(!1)}},[l,v]);return{filters:u,loading:m,error:f,data:x,setFilters:y,clearFilters:w,updateFilter:j,refresh:k,exportData:S,generateQueryParams:v,getFilterConfig:N,hasActiveFilters:Object.keys(u).length>0,activeFilterCount:Object.keys(u).length}},Hc=async function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/[^a-zA-Z0-9]/g,"").toUpperCase().slice(0,4)||"PROD",n=Date.now().toString(36).toUpperCase(),r=Math.random().toString(36).substr(2,3).toUpperCase();let a="".concat(t,"-").concat(n,"-").concat(r),s=1;for(;e.some(e=>e.sku===a);)a="".concat(t,"-").concat(n,"-").concat(r,"-").concat(s),s++;return a},qc=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"EAN13";if(!e)return"";let n="";for(let r=0;r<e.length;r++)n+=e.charCodeAt(r).toString().slice(-1);if("EAN13"===t){n=n.padEnd(12,"0").slice(0,12);return n+$c(n)}return"CODE128"===t?e.toUpperCase().replace(/[^A-Z0-9]/g,""):n.slice(0,10)},$c=e=>{let t=0;for(let n=0;n<12;n++){const r=parseInt(e[n]);t+=n%2===0?r:3*r}return((10-t%10)%10).toString()},Wc=e=>{const t=[],n=[],r=new Set,a=new Set;return e.forEach((e,s)=>{var i;const l=[],o=Ne(Ne({},e),{},{line:s+1});e.name&&""!==e.name.trim()||l.push("Name is required"),!e.price||isNaN(parseFloat(e.price))||parseFloat(e.price)<=0?l.push("Valid price is required"):o.price=parseFloat(e.price),!e.product_cost||isNaN(parseFloat(e.product_cost))||parseFloat(e.product_cost)<0?l.push("Valid product cost is required"):o.product_cost=parseFloat(e.product_cost),!e.quantity||isNaN(parseInt(e.quantity))||parseInt(e.quantity)<0?l.push("Valid quantity is required"):o.quantity=parseInt(e.quantity),e.sku&&""!==e.sku.trim()?o.sku=e.sku.trim():o.sku=Hc(e.name),r.has(o.sku)?l.push("Duplicate SKU in import data"):r.add(o.sku),e.barcode&&""!==e.barcode.trim()&&(o.barcode=e.barcode.trim(),a.has(o.barcode)?l.push("Duplicate barcode in import data"):a.add(o.barcode)),e.status&&!["active","inactive"].includes(e.status.toLowerCase())&&l.push('Status must be "active" or "inactive"'),o.status="inactive"===(null===(i=e.status)||void 0===i?void 0:i.toLowerCase())?"inactive":"active",l.length>0?t.push({line:s+1,errors:l,data:e}):n.push(o)}),{validatedData:n,errors:t}},Kc=e=>{const t=e.split("\n").filter(e=>""!==e.trim());if(t.length<2)throw new Error("CSV must have at least a header row and one data row");const n=t[0].split(",").map(e=>e.trim().replace(/"/g,"")),r=[];for(let a=1;a<t.length;a++){const e=t[a].split(",").map(e=>e.trim().replace(/"/g,"")),s={};n.forEach((t,n)=>{s[t.toLowerCase().replace(/\s+/g,"_")]=e[n]||""}),r.push(s)}return r},Zc=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{format:n="80mm",layout:r="barcode_top",includeLogo:a=!1,fontSize:s="normal"}=t,i="58mm"===n?"58mm":"80mm",l="small"===s?"8px":"large"===s?"12px":"10px",o=e.barcode?'\n    <div class="barcode" style="text-align: center; margin: 5px 0;">\n      <div style="font-family: \'Libre Barcode 128\', monospace; font-size: 24px; line-height: 1;">\n        '.concat(e.barcode,'\n      </div>\n      <div style="font-size: 8px; margin-top: 2px;">').concat(e.barcode,"</div>\n    </div>\n  "):"";return"\n    <!DOCTYPE html>\n    <html>\n    <head>\n      <title>Product Label</title>\n      <style>\n        @import url('https://fonts.googleapis.com/css2?family=Libre+Barcode+128&display=swap');\n        body { \n          margin: 0; \n          padding: 5mm; \n          font-family: monospace; \n          font-size: ".concat(l,";\n          width: ").concat(i,';\n        }\n        .label { \n          border: 1px solid #000; \n          padding: 3mm; \n          width: 100%;\n          text-align: center;\n        }\n        .product-name { \n          font-weight: bold; \n          margin: 3px 0; \n          word-wrap: break-word;\n        }\n        .sku { \n          font-size: 8px; \n          margin: 2px 0; \n        }\n        .price { \n          font-size: 12px; \n          font-weight: bold; \n          margin: 3px 0; \n        }\n        @media print {\n          body { margin: 0; padding: 2mm; }\n          .label { border: 1px solid #000; }\n        }\n      </style>\n    </head>\n    <body>\n      <div class="label">\n        ').concat("barcode_top"===r?o:"",'\n        <div class="product-name">').concat(e.name,'</div>\n        <div class="sku">SKU: ').concat(e.sku,'</div>\n        <div class="price">\u20b1').concat(parseFloat(e.price).toFixed(2),"</div>\n        ").concat("barcode_bottom"===r?o:"","\n      </div>\n    </body>\n    </html>\n  ")},Gc=function(e){const t=Zc(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),n=window.open("","_blank","width=400,height=300");n.document.write(t),n.document.close(),setTimeout(()=>{n.print(),setTimeout(()=>{n.close()},1e3)},500)},Qc=[{value:"restock",label:"Inventory Restock"},{value:"sale_return",label:"Sale Return"},{value:"damage",label:"Damaged Items"},{value:"theft",label:"Theft/Loss"},{value:"count_correction",label:"Count Correction"},{value:"transfer_in",label:"Transfer In"},{value:"transfer_out",label:"Transfer Out"},{value:"promotion",label:"Promotional Adjustment"},{value:"other",label:"Other"}],Yc=["title","titleId"];function Jc(e,t){let{title:n,titleId:a}=e,s=xs(e,Yc);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),n?r.createElement("title",{id:a},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m6.75 12-3-3m0 0-3 3m3-3v6m-1.5-15H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const Xc=r.forwardRef(Jc),eu=["title","titleId"];function tu(e,t){let{title:n,titleId:a}=e,s=xs(e,eu);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),n?r.createElement("title",{id:a},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m.75 12 3 3m0 0 3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const nu=r.forwardRef(tu),ru=["title","titleId"];function au(e,t){let{title:n,titleId:a}=e,s=xs(e,ru);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),n?r.createElement("title",{id:a},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"}))}const su=r.forwardRef(au),iu=["title","titleId"];function lu(e,t){let{title:n,titleId:a}=e,s=xs(e,iu);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),n?r.createElement("title",{id:a},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const ou=r.forwardRef(lu),cu=["title","titleId"];function uu(e,t){let{title:n,titleId:a}=e,s=xs(e,cu);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),n?r.createElement("title",{id:a},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75"}))}const du=r.forwardRef(uu),mu=["title","titleId"];function pu(e,t){let{title:n,titleId:a}=e,s=xs(e,mu);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),n?r.createElement("title",{id:a},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0 0 21 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 0 0-1.913-.247M6.34 18H5.25A2.25 2.25 0 0 1 3 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 0 1 1.913-.247m10.5 0a48.536 48.536 0 0 0-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5Zm-3 0h.008v.008H15V10.5Z"}))}const fu=r.forwardRef(pu),hu=["title","titleId"];function xu(e,t){let{title:n,titleId:a}=e,s=xs(e,hu);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),n?r.createElement("title",{id:a},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const gu=r.forwardRef(xu),vu=["title","titleId"];function yu(e,t){let{title:n,titleId:a}=e,s=xs(e,vu);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),n?r.createElement("title",{id:a},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"}))}const bu=r.forwardRef(yu),wu=["title","titleId"];function ju(e,t){let{title:n,titleId:a}=e,s=xs(e,wu);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),n?r.createElement("title",{id:a},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const Nu=r.forwardRef(ju),ku=lo({name:Kl().required("Product name is required"),sku:Kl().required("SKU is required"),price:Gl().positive("Price must be positive").required("Price is required"),product_cost:Gl().min(0,"Product cost cannot be negative").required("Product cost is required"),quantity:Gl().min(0,"Quantity cannot be negative").required("Quantity is required"),description:Kl(),barcode:Kl(),category_id:Kl(),brand:Kl(),supplier:Kl(),low_stock_threshold:Gl().min(1,"Threshold must be at least 1").required("Low stock threshold is required")}),Su=e=>{let{product:t,onClose:n,onAdjust:a}=e;const[s,i]=(0,r.useState)("add"),[l,o]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[d,m]=(0,r.useState)(""),[p,f]=(0,r.useState)(!1);return(0,Xa.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Xa.jsx)("div",{className:"bg-white rounded-lg max-w-md w-full mx-4",children:(0,Xa.jsxs)("div",{className:"p-6",children:[(0,Xa.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Xa.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Stock Adjustment"}),(0,Xa.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:(0,Xa.jsx)(Sc,{className:"h-6 w-6"})})]}),(0,Xa.jsx)("div",{className:"mb-4",children:(0,Xa.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,Xa.jsx)("strong",{children:t.name})," - Current stock: ",(0,Xa.jsx)("strong",{children:t.quantity})]})}),(0,Xa.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!l||parseFloat(l)<=0)zr.error("Please enter a valid quantity");else{f(!0);try{await a({type:s,quantity:parseFloat(l),reason:c,notes:d})}finally{f(!1)}}},className:"space-y-4",children:[(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Adjustment Type"}),(0,Xa.jsxs)("div",{className:"flex space-x-4",children:[(0,Xa.jsxs)("label",{className:"flex items-center",children:[(0,Xa.jsx)("input",{type:"radio",value:"add",checked:"add"===s,onChange:e=>i(e.target.value),className:"mr-2"}),"Add Stock"]}),(0,Xa.jsxs)("label",{className:"flex items-center",children:[(0,Xa.jsx)("input",{type:"radio",value:"subtract",checked:"subtract"===s,onChange:e=>i(e.target.value),className:"mr-2"}),"Remove Stock"]})]})]}),(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantity"}),(0,Xa.jsx)("input",{type:"number",min:"1",value:l,onChange:e=>o(e.target.value),className:"input w-full",required:!0})]}),(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason"}),(0,Xa.jsxs)("select",{value:c,onChange:e=>u(e.target.value),className:"input w-full",required:!0,children:[(0,Xa.jsx)("option",{value:"",children:"Select reason..."}),Qc.map(e=>(0,Xa.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (Optional)"}),(0,Xa.jsx)("textarea",{rows:"3",value:d,onChange:e=>m(e.target.value),className:"input w-full",placeholder:"Additional notes..."})]}),(0,Xa.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,Xa.jsx)("button",{type:"button",onClick:n,className:"btn-secondary",children:"Cancel"}),(0,Xa.jsx)("button",{type:"submit",disabled:p,className:"btn-primary",children:p?"Processing...":"Adjust Stock"})]})]})]})})})},_u=e=>{let{products:t,onClose:n,onPrint:a}=e;const[s,i]=(0,r.useState)({format:"80mm",layout:"barcode_top",fontSize:"normal"});return(0,Xa.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Xa.jsx)("div",{className:"bg-white rounded-lg max-w-md w-full mx-4",children:(0,Xa.jsxs)("div",{className:"p-6",children:[(0,Xa.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Xa.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Print Labels"}),(0,Xa.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:(0,Xa.jsx)(Sc,{className:"h-6 w-6"})})]}),(0,Xa.jsx)("div",{className:"mb-4",children:(0,Xa.jsxs)("p",{className:"text-sm text-gray-600",children:["Printing labels for ",(0,Xa.jsx)("strong",{children:t.length})," product(s)"]})}),(0,Xa.jsxs)("div",{className:"space-y-4",children:[(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Paper Format"}),(0,Xa.jsxs)("select",{value:s.format,onChange:e=>i(t=>Ne(Ne({},t),{},{format:e.target.value})),className:"input w-full",children:[(0,Xa.jsx)("option",{value:"58mm",children:"58mm Receipt Paper"}),(0,Xa.jsx)("option",{value:"80mm",children:"80mm Receipt Paper"})]})]}),(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Layout"}),(0,Xa.jsxs)("select",{value:s.layout,onChange:e=>i(t=>Ne(Ne({},t),{},{layout:e.target.value})),className:"input w-full",children:[(0,Xa.jsx)("option",{value:"barcode_top",children:"Barcode Above Product Name"}),(0,Xa.jsx)("option",{value:"barcode_bottom",children:"Barcode Below Product Name"})]})]}),(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Font Size"}),(0,Xa.jsxs)("select",{value:s.fontSize,onChange:e=>i(t=>Ne(Ne({},t),{},{fontSize:e.target.value})),className:"input w-full",children:[(0,Xa.jsx)("option",{value:"small",children:"Small"}),(0,Xa.jsx)("option",{value:"normal",children:"Normal"}),(0,Xa.jsx)("option",{value:"large",children:"Large"})]})]})]}),(0,Xa.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,Xa.jsx)("button",{onClick:n,className:"btn-secondary",children:"Cancel"}),(0,Xa.jsx)("button",{onClick:()=>a(s),className:"btn-primary",children:"Print Labels"})]})]})})})},Eu=()=>{const{formatAmount:e}=ms(),[t,n]=(0,r.useState)([]),[a,s]=(0,r.useState)([]),[i,l]=(0,r.useState)(!0),[o,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(null),[m,p]=(0,r.useState)(null),[f,h]=(0,r.useState)([]),[x,g]=(0,r.useState)(!1),[v,y]=(0,r.useState)(!1),[b,w]=(0,r.useState)(!1),[j,N]=(0,r.useState)(null),[k,S]=(0,r.useState)([]),[_,E]=(0,r.useState)([]),[C,T]=(0,r.useState)(!1),[O,P]=(0,r.useState)(!1),[F,L]=(0,r.useState)(null),[R,A]=(0,r.useState)(!1),[D,I]=(0,r.useState)([]),[z,M]=(0,r.useState)(null),[U,B]=(0,r.useState)(""),[V,H]=(0,r.useState)(!1),[q,$]=(0,r.useState)(null),[W,K]=(0,r.useState)(!1),Z=(0,r.useRef)(null),G=(0,r.useRef)(null),Q={category:{label:"Category",placeholder:"All categories",options:a.map(e=>({value:e.id,label:e.name}))},status:{label:"Status",placeholder:"All statuses",options:[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"low_stock",label:"Low Stock"}]}},{filters:Y,setFilters:J,loading:X,generateQueryParams:ee,clearFilters:te,hasActiveFilters:ne}=Vc({defaultFilters:{},persistenceKey:"products-filter",enablePersistence:!0}),re=(0,r.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{l(!0);const t=Ne({},ee(e||Y));"low_stock"===t.status&&(t.low_stock=!0,delete t.status);const r=await Na(t);n(Array.isArray(r.data)?r.data:[])}catch(a){var t,r;console.error("Failed to fetch data:",a),n([]),zr.error("Failed to load data: ".concat((null===(t=a.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.detail)||a.message))}finally{l(!1)}},[ee]),{register:ae,handleSubmit:se,formState:{errors:ie},reset:le,setValue:oe,watch:ce}=Vi({resolver:Ki(ku)}),ue=ce("name");(0,r.useEffect)(()=>{de(),re()},[]);const de=async()=>{try{const e=await Aa();s(Array.isArray(e.data)?e.data:[])}catch(e){console.error("Failed to load categories:",e)}},me=()=>{c(!1),d(null),p(null),le()},pe=async e=>{T(!0);try{const t=await e.text();let n;if(!e.name.endsWith(".csv"))return void zr.error("Excel import not yet implemented. Please use CSV format.");n=Kc(t);const{validatedData:r,errors:a}=Wc(n);S(r),E(a),w(!0)}catch(t){zr.error("Failed to process file: "+t.message)}finally{T(!1)}},fe=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"csv";try{const t=ee(),n=await Oa(Ne(Ne({},t),{},{format:e})),r="products_export_".concat((new Date).toISOString().slice(0,10),".").concat(e),a=window.URL.createObjectURL(new Blob([n.data])),s=document.createElement("a");s.href=a,s.setAttribute("download",r),document.body.appendChild(s),s.click(),s.remove(),window.URL.revokeObjectURL(a),zr.success("Products exported successfully!")}catch(r){var t,n;zr.error("Export failed: "+((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.detail)||r.message))}},he=(e,t,n)=>{M("".concat(e,"-").concat(t)),B(n)},xe=async(e,t)=>{try{await Ra(e,{field:t,value:U}),zr.success("".concat(t.charAt(0).toUpperCase()+t.slice(1)," updated successfully")),M(null),re()}catch(n){zr.error("Failed to update ".concat(t))}},ge=()=>{M(null),B("")},ve=e=>0===e.quantity?(0,Xa.jsx)("span",{className:"badge badge-error text-xs",children:"Out of Stock"}):(e=>e.quantity<=(e.low_stock_threshold||10))(e)?(0,Xa.jsx)("span",{className:"badge badge-warning text-xs",children:"Low Stock"}):(0,Xa.jsx)("span",{className:"badge badge-success text-xs",children:"In Stock"});return i?(0,Xa.jsx)(hs,{}):(0,Xa.jsxs)("div",{className:"space-y-6",children:[(0,Xa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Product Management"}),(0,Xa.jsx)("p",{className:"text-gray-600",children:"Manage your product inventory with advanced features"})]}),(0,Xa.jsxs)("div",{className:"flex space-x-2",children:[(0,Xa.jsxs)("button",{onClick:()=>{var e;return null===(e=Z.current)||void 0===e?void 0:e.click()},className:"btn-secondary text-sm flex items-center",disabled:C,children:[(0,Xa.jsx)(Xc,{className:"h-4 w-4 mr-2"}),C?"Processing...":"Import"]}),(0,Xa.jsx)("input",{ref:Z,type:"file",accept:".csv,.xlsx,.xls",onChange:e=>{const t=e.target.files[0];t&&(t.name.match(/\.(csv|xlsx|xls)$/)?(N(t),pe(t)):zr.error("Please select a CSV or Excel file"))},className:"hidden"}),(0,Xa.jsxs)("button",{onClick:()=>fe("csv"),className:"btn-secondary text-sm flex items-center",children:[(0,Xa.jsx)(nu,{className:"h-4 w-4 mr-2"}),"Export CSV"]}),(0,Xa.jsxs)("button",{onClick:()=>fe("excel"),className:"btn-secondary text-sm flex items-center",children:[(0,Xa.jsx)(nu,{className:"h-4 w-4 mr-2"}),"Export Excel"]}),(0,Xa.jsxs)("button",{onClick:()=>c(!0),className:"btn-primary flex items-center",children:[(0,Xa.jsx)(jc,{className:"h-4 w-4 mr-2"}),"Add Product"]})]})]}),(0,Xa.jsx)(Bc,{filters:Q,onFilterChange:J,loading:X,initialFilters:Y,searchPlaceholder:"Search products by name, SKU, barcode..."}),(0,Xa.jsx)("div",{className:"card",children:(0,Xa.jsxs)("div",{className:"card-body overflow-x-auto",children:[(0,Xa.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Xa.jsx)("thead",{className:"bg-gray-50",children:(0,Xa.jsxs)("tr",{children:[(0,Xa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),(0,Xa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SKU/Barcode"}),(0,Xa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price/Cost"}),(0,Xa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock"}),(0,Xa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Xa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Xa.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(t=>(0,Xa.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Xa.jsx)("td",{className:"px-6 py-4",children:(0,Xa.jsxs)("div",{className:"flex items-center",children:[(0,Xa.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:t.image_url?(0,Xa.jsx)("img",{className:"h-10 w-10 rounded object-cover",src:t.image_url,alt:t.name}):(0,Xa.jsx)("div",{className:"h-10 w-10 rounded bg-gray-200 flex items-center justify-center",children:(0,Xa.jsx)(Go,{className:"h-6 w-6 text-gray-400"})})}),(0,Xa.jsxs)("div",{className:"ml-4",children:[(0,Xa.jsx)("div",{className:"text-sm font-medium text-gray-900",children:t.name}),(0,Xa.jsx)("div",{className:"text-sm text-gray-500",children:t.category_name||"No category"}),t.brand&&(0,Xa.jsxs)("div",{className:"text-xs text-gray-400",children:["Brand: ",t.brand]})]})]})}),(0,Xa.jsxs)("td",{className:"px-6 py-4",children:[(0,Xa.jsx)("div",{className:"text-sm text-gray-900",children:t.sku}),t.barcode&&(0,Xa.jsx)("div",{className:"text-xs text-gray-500",children:t.barcode})]}),(0,Xa.jsx)("td",{className:"px-6 py-4",children:(0,Xa.jsxs)("div",{className:"space-y-1",children:[z==="".concat(t.id,"-price")?(0,Xa.jsx)("div",{className:"flex items-center space-x-1",children:(0,Xa.jsx)("input",{type:"number",step:"0.01",value:U,onChange:e=>B(e.target.value),className:"w-20 px-2 py-1 text-xs border rounded",onBlur:()=>xe(t.id,"price"),onKeyPress:e=>{"Enter"===e.key&&xe(t.id,"price"),"Escape"===e.key&&ge()},autoFocus:!0})}):(0,Xa.jsx)("div",{className:"text-sm font-medium text-blue-600 cursor-pointer hover:text-blue-800",onClick:()=>he(t.id,"price",t.price),children:e(t.price)}),z==="".concat(t.id,"-product_cost")?(0,Xa.jsx)("div",{className:"flex items-center space-x-1",children:(0,Xa.jsx)("input",{type:"number",step:"0.01",value:U,onChange:e=>B(e.target.value),className:"w-20 px-2 py-1 text-xs border rounded",onBlur:()=>xe(t.id,"product_cost"),onKeyPress:e=>{"Enter"===e.key&&xe(t.id,"product_cost"),"Escape"===e.key&&ge()},autoFocus:!0})}):(0,Xa.jsxs)("div",{className:"text-xs text-gray-500 cursor-pointer hover:text-gray-700",onClick:()=>he(t.id,"product_cost",t.product_cost),children:["Cost: ",e(t.product_cost||0)]})]})}),(0,Xa.jsx)("td",{className:"px-6 py-4",children:(0,Xa.jsxs)("div",{className:"space-y-1",children:[z==="".concat(t.id,"-quantity")?(0,Xa.jsx)("div",{className:"flex items-center space-x-1",children:(0,Xa.jsx)("input",{type:"number",value:U,onChange:e=>B(e.target.value),className:"w-20 px-2 py-1 text-xs border rounded",onBlur:()=>xe(t.id,"quantity"),onKeyPress:e=>{"Enter"===e.key&&xe(t.id,"quantity"),"Escape"===e.key&&ge()},autoFocus:!0})}):(0,Xa.jsx)("div",{className:"text-sm text-gray-900 cursor-pointer hover:text-gray-700",onClick:()=>he(t.id,"quantity",t.quantity),children:t.quantity}),ve(t)]})}),(0,Xa.jsx)("td",{className:"px-6 py-4",children:(0,Xa.jsx)("button",{onClick:()=>(async(e,t)=>{try{const n="active"===t?"inactive":"active";await Fa(e,n),zr.success("Product ".concat("active"===n?"activated":"deactivated")),re()}catch(n){zr.error("Failed to update product status")}})(t.id,t.status),className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("active"===t.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:"active"===t.status?"Active":"Inactive"})}),(0,Xa.jsx)("td",{className:"px-6 py-4",children:(0,Xa.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Xa.jsx)("button",{onClick:()=>(e=>{d(e),le(e)})(t),className:"text-blue-600 hover:text-blue-900",title:"Edit Product",children:(0,Xa.jsx)(su,{className:"h-4 w-4"})}),(0,Xa.jsx)("button",{onClick:()=>(async e=>{p(e),g(!0);try{const t=await Ca(e.id);h(t.data)}catch(t){zr.error("Failed to load cost history"),h([])}finally{g(!1)}})(t),className:"text-green-600 hover:text-green-900",title:"View Cost History",children:(0,Xa.jsx)(ou,{className:"h-4 w-4"})}),(0,Xa.jsx)("button",{onClick:()=>(e=>{L(e),P(!0)})(t),className:"text-purple-600 hover:text-purple-900",title:"Adjust Stock",children:(0,Xa.jsx)(du,{className:"h-4 w-4"})}),(0,Xa.jsx)("button",{onClick:()=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];I(Array.isArray(e)?e:[e]),A(!0)}(t),className:"text-indigo-600 hover:text-indigo-900",title:"Print Label",children:(0,Xa.jsx)(fu,{className:"h-4 w-4"})}),(0,Xa.jsx)("button",{onClick:()=>(e=>{$(e),H(!0)})(t),className:"text-yellow-600 hover:text-yellow-900",title:"Upload Image",children:(0,Xa.jsx)(gu,{className:"h-4 w-4"})}),(0,Xa.jsx)("button",{onClick:()=>(async e=>{try{const t=await La(e,{copy_barcode:!1,copy_quantity:!1});zr.success("Product duplicated: ".concat(t.data.duplicate_name)),re()}catch(r){var t,n;zr.error("Product duplication failed: "+((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.detail)||r.message))}})(t.id),className:"text-cyan-600 hover:text-cyan-900",title:"Duplicate Product",children:(0,Xa.jsx)(bu,{className:"h-4 w-4"})}),(0,Xa.jsx)("button",{onClick:()=>(async(e,t)=>{if(window.confirm('Are you sure you want to delete "'.concat(t,'"?')))try{await _a(e),zr.success("Product deleted successfully!"),re()}catch(n){zr.error("Failed to delete product")}})(t.id,t.name),className:"text-red-600 hover:text-red-900",title:"Delete Product",children:(0,Xa.jsx)(Nu,{className:"h-4 w-4"})})]})})]},t.id))})]}),0===t.length&&(0,Xa.jsxs)("div",{className:"text-center py-8",children:[(0,Xa.jsx)(Go,{className:"h-12 w-12 mx-auto text-gray-300 mb-4"}),(0,Xa.jsx)("p",{className:"text-gray-500",children:"No products found"}),ne&&(0,Xa.jsx)("button",{onClick:te,className:"btn-secondary text-sm mt-2",children:"Clear filters"})]})]})}),(o||u)&&(0,Xa.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Xa.jsx)("div",{className:"bg-white rounded-lg max-w-2xl w-full mx-4 max-h-96 overflow-y-auto",children:(0,Xa.jsxs)("div",{className:"p-6",children:[(0,Xa.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Xa.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:u?"Edit Product":"Create Product"}),(0,Xa.jsx)("button",{onClick:me,className:"text-gray-400 hover:text-gray-600",children:(0,Xa.jsx)(Sc,{className:"h-6 w-6"})})]}),(0,Xa.jsxs)("form",{onSubmit:se(u?async e=>{y(!0);try{await Sa(u.id,e),zr.success("Product updated successfully!"),d(null),le(),re()}catch(r){var t,n;const e=(null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.detail)||"Failed to update product";zr.error(e)}finally{y(!1)}}:async e=>{y(!0);try{e.sku&&""!==e.sku.trim()||(e.sku=await Hc(e.name,t)),!e.barcode&&e.sku&&(e.barcode=qc(e.sku)),await ka(e),zr.success("Product created successfully!"),c(!1),le(),re()}catch(a){var n,r;const e=(null===(n=a.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.detail)||"Failed to create product";zr.error(e)}finally{y(!1)}}),children:[(0,Xa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Name *"}),(0,Xa.jsx)("input",Ne(Ne({type:"text"},ae("name")),{},{className:"input w-full"})),ie.name&&(0,Xa.jsx)("p",{className:"text-red-500 text-xs mt-1",children:ie.name.message})]}),(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SKU *"}),(0,Xa.jsxs)("div",{className:"flex space-x-2",children:[(0,Xa.jsx)("input",Ne(Ne({type:"text"},ae("sku")),{},{className:"input flex-1",placeholder:"Leave empty to auto-generate"})),(0,Xa.jsx)("button",{type:"button",onClick:async()=>{const e=await Hc(ue||"Product",t);oe("sku",e)},className:"btn-secondary text-xs px-3 py-2",children:"Generate"})]}),ie.sku&&(0,Xa.jsx)("p",{className:"text-red-500 text-xs mt-1",children:ie.sku.message})]}),(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price *"}),(0,Xa.jsx)("input",Ne(Ne({type:"number",step:"0.01",min:"0"},ae("price")),{},{className:"input w-full"})),ie.price&&(0,Xa.jsx)("p",{className:"text-red-500 text-xs mt-1",children:ie.price.message})]}),(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Cost *"}),(0,Xa.jsx)("input",Ne(Ne({type:"number",step:"0.01",min:"0"},ae("product_cost")),{},{className:"input w-full"})),ie.product_cost&&(0,Xa.jsx)("p",{className:"text-red-500 text-xs mt-1",children:ie.product_cost.message})]}),(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantity *"}),(0,Xa.jsx)("input",Ne(Ne({type:"number",min:"0"},ae("quantity")),{},{className:"input w-full"})),ie.quantity&&(0,Xa.jsx)("p",{className:"text-red-500 text-xs mt-1",children:ie.quantity.message})]}),(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Low Stock Alert"}),(0,Xa.jsx)("input",Ne(Ne({type:"number",min:"1"},ae("low_stock_threshold")),{},{className:"input w-full",defaultValue:10}))]}),(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Barcode"}),(0,Xa.jsxs)("div",{className:"flex space-x-2",children:[(0,Xa.jsx)("input",Ne(Ne({type:"text"},ae("barcode")),{},{className:"input flex-1",placeholder:"Optional"})),(0,Xa.jsx)("button",{type:"button",onClick:()=>{const e=ce("sku");e&&oe("barcode",qc(e))},className:"btn-secondary text-xs px-3 py-2",children:"Generate"})]})]}),(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),(0,Xa.jsxs)("select",Ne(Ne({},ae("category_id")),{},{className:"input w-full",children:[(0,Xa.jsx)("option",{value:"",children:"Select Category"}),a.map(e=>(0,Xa.jsx)("option",{value:e.id,children:e.name},e.id))]}))]}),(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Brand"}),(0,Xa.jsx)("input",Ne(Ne({type:"text"},ae("brand")),{},{className:"input w-full",placeholder:"Optional"}))]}),(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier"}),(0,Xa.jsx)("input",Ne(Ne({type:"text"},ae("supplier")),{},{className:"input w-full",placeholder:"Optional"}))]})]}),(0,Xa.jsxs)("div",{className:"mt-4",children:[(0,Xa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,Xa.jsx)("textarea",Ne(Ne({rows:"3"},ae("description")),{},{className:"input w-full",placeholder:"Product description..."}))]}),(0,Xa.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,Xa.jsx)("button",{type:"button",onClick:me,className:"btn-secondary",children:"Cancel"}),(0,Xa.jsx)("button",{type:"submit",disabled:v,className:"btn-primary",children:v?"Saving...":u?"Update":"Create"})]})]})]})})}),b&&(0,Xa.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Xa.jsx)("div",{className:"bg-white rounded-lg max-w-4xl w-full mx-4 max-h-96 overflow-y-auto",children:(0,Xa.jsxs)("div",{className:"p-6",children:[(0,Xa.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Xa.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Import Preview"}),(0,Xa.jsx)("button",{onClick:()=>w(!1),className:"text-gray-400 hover:text-gray-600",children:(0,Xa.jsx)(Sc,{className:"h-6 w-6"})})]}),_.length>0&&(0,Xa.jsxs)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded",children:[(0,Xa.jsx)("h4",{className:"font-medium text-red-800 mb-2",children:"Import Errors:"}),(0,Xa.jsx)("ul",{className:"text-sm text-red-700 space-y-1",children:_.slice(0,10).map((e,t)=>(0,Xa.jsxs)("li",{children:["Line ",e.line,": ",e.errors.join(", ")]},t))}),_.length>10&&(0,Xa.jsxs)("p",{className:"text-sm text-red-600 mt-2",children:["...and ",_.length-10," more errors"]})]}),(0,Xa.jsx)("div",{className:"mb-4",children:(0,Xa.jsxs)("p",{className:"text-sm text-gray-600",children:["Ready to import: ",(0,Xa.jsx)("strong",{children:k.length})," products",_.length>0&&(0,Xa.jsxs)("span",{className:"text-red-600 ml-2",children:["(",_.length," errors to fix)"]})]})}),(0,Xa.jsx)("div",{className:"max-h-64 overflow-y-auto border rounded",children:(0,Xa.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[(0,Xa.jsx)("thead",{className:"bg-gray-50",children:(0,Xa.jsxs)("tr",{children:[(0,Xa.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),(0,Xa.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"SKU"}),(0,Xa.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Price"}),(0,Xa.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Cost"}),(0,Xa.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Qty"})]})}),(0,Xa.jsx)("tbody",{className:"divide-y divide-gray-200",children:k.slice(0,20).map((t,n)=>(0,Xa.jsxs)("tr",{children:[(0,Xa.jsx)("td",{className:"px-4 py-2",children:t.name}),(0,Xa.jsx)("td",{className:"px-4 py-2",children:t.sku}),(0,Xa.jsx)("td",{className:"px-4 py-2",children:e(t.price)}),(0,Xa.jsx)("td",{className:"px-4 py-2",children:e(t.product_cost)}),(0,Xa.jsx)("td",{className:"px-4 py-2",children:t.quantity})]},n))})]})}),(0,Xa.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,Xa.jsx)("button",{onClick:()=>w(!1),className:"btn-secondary",children:"Cancel"}),(0,Xa.jsx)("button",{onClick:async()=>{if(0!==k.length){T(!0);try{const e=await Ta(j);zr.success("Import completed! ".concat(e.data.imported_count," products imported.")),e.data.error_count>0&&zr.error("".concat(e.data.error_count," products had errors.")),w(!1),re()}catch(n){var e,t;zr.error("Import failed: "+((null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||n.message))}finally{T(!1)}}},disabled:C||0===k.length,className:"btn-primary",children:C?"Importing...":"Import ".concat(k.length," Products")})]})]})})}),O&&F&&(0,Xa.jsx)(Su,{product:F,onClose:()=>P(!1),onAdjust:async e=>{if(F)try{const t=await Pa(F.id,e);zr.success("Stock adjusted: ".concat(t.data.old_quantity," \u2192 ").concat(t.data.new_quantity)),P(!1),re()}catch(r){var t,n;zr.error("Stock adjustment failed: "+((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.detail)||r.message))}}}),R&&(0,Xa.jsx)(_u,{products:D,onClose:()=>A(!1),onPrint:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};D.forEach(t=>{Gc(t,e)}),zr.success("Printing ".concat(D.length," label(s)")),A(!1)}}),V&&q&&(0,Xa.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Xa.jsx)("div",{className:"bg-white rounded-lg max-w-md w-full mx-4",children:(0,Xa.jsxs)("div",{className:"p-6",children:[(0,Xa.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Xa.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Upload Product Image"}),(0,Xa.jsx)("button",{onClick:()=>H(!1),className:"text-gray-400 hover:text-gray-600",children:(0,Xa.jsx)(Sc,{className:"h-6 w-6"})})]}),(0,Xa.jsxs)("div",{className:"text-center",children:[(0,Xa.jsx)("div",{className:"mb-4",children:(0,Xa.jsx)("div",{className:"mx-auto h-32 w-32 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center",children:q.image_url?(0,Xa.jsx)("img",{src:q.image_url,alt:q.name,className:"h-full w-full object-cover rounded-lg"}):(0,Xa.jsx)(gu,{className:"h-16 w-16 text-gray-400"})})}),(0,Xa.jsxs)("p",{className:"text-sm text-gray-600 mb-4",children:["Upload an image for ",(0,Xa.jsx)("strong",{children:q.name})]}),(0,Xa.jsx)("input",{ref:G,type:"file",accept:"image/*",onChange:async e=>{const t=e.target.files[0];if(t&&q)if(t.type.startsWith("image/"))if(t.size>5242880)zr.error("Image size must be less than 5MB");else{K(!0);try{const e=new FormData;e.append("image",t);if(!(await fetch("/api/products/".concat(q.id,"/image"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:e})).ok)throw new Error("Image upload failed");zr.success("Product image updated successfully"),H(!1),re()}catch(n){zr.error("Image upload failed: "+n.message)}finally{K(!1)}}else zr.error("Please select an image file")},className:"hidden"}),(0,Xa.jsxs)("div",{className:"flex space-x-3",children:[(0,Xa.jsx)("button",{onClick:()=>{var e;return null===(e=G.current)||void 0===e?void 0:e.click()},disabled:W,className:"btn-primary flex-1",children:W?"Uploading...":"Choose Image"}),(0,Xa.jsx)("button",{onClick:()=>H(!1),className:"btn-secondary flex-1",children:"Cancel"})]})]})]})})}),m&&(0,Xa.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Xa.jsx)("div",{className:"bg-white rounded-lg max-w-2xl w-full mx-4 max-h-96 overflow-y-auto",children:(0,Xa.jsxs)("div",{className:"p-6",children:[(0,Xa.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Xa.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["Cost History - ",m.name]}),(0,Xa.jsx)("button",{onClick:()=>p(null),className:"text-gray-400 hover:text-gray-600",children:(0,Xa.jsx)(Sc,{className:"h-6 w-6"})})]}),x?(0,Xa.jsx)("div",{className:"flex justify-center py-8",children:(0,Xa.jsx)(fs,{})}):(0,Xa.jsx)("div",{className:"space-y-4",children:f.length>0?f.map((t,n)=>(0,Xa.jsx)("div",{className:"border-l-4 border-blue-500 pl-4 py-2",children:(0,Xa.jsx)("div",{className:"flex justify-between items-start",children:(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("p",{className:"font-medium text-lg",children:e(t.cost)}),(0,Xa.jsx)("p",{className:"text-sm text-gray-600",children:new Date(t.effective_from).toLocaleDateString()}),t.notes&&(0,Xa.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:t.notes})]})})},n)):(0,Xa.jsx)("p",{className:"text-gray-500 text-center py-8",children:"No cost history available"})})]})})})]})},Cu=lo({name:Kl().required("Category name is required"),description:Kl(),color:Kl().required("Color is required")}),Tu=()=>{const[e,t]=(0,r.useState)([]),[n,a]=(0,r.useState)(!0),[s,i]=(0,r.useState)(!1),[l,o]=(0,r.useState)(null),[c,u]=(0,r.useState)(!1),{register:d,handleSubmit:m,formState:{errors:p},reset:f,setValue:h,watch:x}=Vi({resolver:Ki(Cu),defaultValues:{color:"#3B82F6"}}),g=x("color");(0,r.useEffect)(()=>{v()},[]);const v=async()=>{try{const e=await Aa();t(e.data)}catch(e){console.error("Failed to fetch categories:",e),da.error("Failed to load categories")}finally{a(!1)}};return n?(0,Xa.jsx)(hs,{message:"Loading categories..."}):(0,Xa.jsxs)("div",{className:"space-y-6",children:[(0,Xa.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Category Management"}),(0,Xa.jsx)("p",{className:"text-gray-600",children:"Organize your products with categories"})]}),(0,Xa.jsxs)("button",{onClick:()=>i(!0),className:"btn-primary flex items-center",children:[(0,Xa.jsx)(jc,{className:"h-5 w-5 mr-2"}),"Add Category"]})]}),e.length>0?(0,Xa.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:e.map(e=>{return(0,Xa.jsx)("div",{className:"card hover:shadow-md transition-shadow",children:(0,Xa.jsxs)("div",{className:"card-body",children:[(0,Xa.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,Xa.jsxs)("div",{className:"flex items-center",children:[(0,Xa.jsx)("div",{className:"w-4 h-4 rounded-full mr-3 ".concat((t=e.color,{"#3B82F6":"bg-blue-500","#10B981":"bg-green-500","#F59E0B":"bg-yellow-500","#EF4444":"bg-red-500","#8B5CF6":"bg-purple-500","#F97316":"bg-orange-500","#06B6D4":"bg-cyan-500","#84CC16":"bg-lime-500","#EC4899":"bg-pink-500","#6B7280":"bg-gray-500"}[t]||"bg-blue-500"))}),(0,Xa.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:e.name})]}),(0,Xa.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,Xa.jsx)("button",{onClick:()=>(e=>{o(e),h("name",e.name),h("description",e.description||""),h("color",e.color||"#3B82F6")})(e),className:"text-gray-400 hover:text-primary-600 p-1",children:(0,Xa.jsx)(su,{className:"h-4 w-4"})}),(0,Xa.jsx)("button",{onClick:()=>(async(e,t)=>{if(window.confirm('Are you sure you want to delete "'.concat(t,'"? This action cannot be undone.')))try{await za(e),da.success("Category deleted successfully!"),v()}catch(a){var n,r;const e=(null===(n=a.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.detail)||"Failed to delete category";da.error(e)}})(e.id,e.name),className:"text-gray-400 hover:text-red-600 p-1",children:(0,Xa.jsx)(Nu,{className:"h-4 w-4"})})]})]}),e.description&&(0,Xa.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:e.description}),(0,Xa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Xa.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,Xa.jsx)(Go,{className:"h-4 w-4 mr-1"}),(0,Xa.jsxs)("span",{children:[e.product_count," products"]})]}),(0,Xa.jsx)("span",{className:"text-xs text-gray-400",children:new Date(e.created_at).toLocaleDateString()})]})]})},e.id);var t})}):(0,Xa.jsx)("div",{className:"card",children:(0,Xa.jsx)("div",{className:"card-body",children:(0,Xa.jsxs)("div",{className:"text-center py-12",children:[(0,Xa.jsx)(Jo,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,Xa.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No categories"}),(0,Xa.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by creating your first product category."}),(0,Xa.jsx)("div",{className:"mt-6",children:(0,Xa.jsxs)("button",{onClick:()=>i(!0),className:"btn-primary",children:[(0,Xa.jsx)(jc,{className:"h-5 w-5 mr-2"}),"Add Category"]})})]})})}),(s||l)&&(0,Xa.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,Xa.jsxs)("div",{className:"relative top-20 mx-auto p-5 border w-full max-w-md shadow-lg rounded-md bg-white",children:[(0,Xa.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Xa.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:l?"Edit Category":"Create New Category"}),(0,Xa.jsx)("button",{onClick:()=>{i(!1),o(null),f()},className:"text-gray-400 hover:text-gray-600",children:(0,Xa.jsx)(Sc,{className:"h-6 w-6"})})]}),(0,Xa.jsxs)("form",{onSubmit:m(l?async e=>{u(!0);try{await Ia(l.id,e),da.success("Category updated successfully!"),o(null),f(),v()}catch(r){var t,n;const e=(null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.detail)||"Failed to update category";da.error(e)}finally{u(!1)}}:async e=>{u(!0);try{await Da(e),da.success("Category created successfully!"),i(!1),f(),v()}catch(r){var t,n;const e=(null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.detail)||"Failed to create category";da.error(e)}finally{u(!1)}}),className:"space-y-4",children:[(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{className:"form-label",children:"Category Name"}),(0,Xa.jsx)("input",Ne({type:"text",className:"form-input",placeholder:"e.g., Printing Services"},d("name"))),p.name&&(0,Xa.jsx)("p",{className:"form-error",children:p.name.message})]}),(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{className:"form-label",children:"Description (Optional)"}),(0,Xa.jsx)("textarea",Ne({className:"form-input",rows:"3",placeholder:"Brief description of this category"},d("description"))),p.description&&(0,Xa.jsx)("p",{className:"form-error",children:p.description.message})]}),(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{className:"form-label",children:"Category Color"}),(0,Xa.jsx)("div",{className:"grid grid-cols-5 gap-3 mt-2",children:[{value:"#3B82F6",name:"Blue",class:"bg-blue-500"},{value:"#10B981",name:"Green",class:"bg-green-500"},{value:"#F59E0B",name:"Yellow",class:"bg-yellow-500"},{value:"#EF4444",name:"Red",class:"bg-red-500"},{value:"#8B5CF6",name:"Purple",class:"bg-purple-500"},{value:"#F97316",name:"Orange",class:"bg-orange-500"},{value:"#06B6D4",name:"Cyan",class:"bg-cyan-500"},{value:"#84CC16",name:"Lime",class:"bg-lime-500"},{value:"#EC4899",name:"Pink",class:"bg-pink-500"},{value:"#6B7280",name:"Gray",class:"bg-gray-500"}].map(e=>(0,Xa.jsxs)("label",{className:"cursor-pointer",children:[(0,Xa.jsx)("input",Ne({type:"radio",className:"sr-only",value:e.value},d("color"))),(0,Xa.jsx)("div",{className:"w-8 h-8 rounded-full ".concat(e.class," ring-2 ring-offset-2 ").concat(g===e.value?"ring-gray-400":"ring-transparent"," hover:ring-gray-300 transition-all")})]},e.value))}),p.color&&(0,Xa.jsx)("p",{className:"form-error",children:p.color.message})]}),(0,Xa.jsxs)("div",{className:"flex justify-end space-x-4 pt-4",children:[(0,Xa.jsx)("button",{type:"button",onClick:()=>{i(!1),o(null),f()},className:"btn-secondary",children:"Cancel"}),(0,Xa.jsx)("button",{type:"submit",disabled:c,className:"btn-primary flex items-center",children:c?(0,Xa.jsxs)(Xa.Fragment,{children:[(0,Xa.jsx)(fs,{}),(0,Xa.jsx)("span",{className:"ml-2",children:l?"Updating...":"Creating..."})]}):l?"Update Category":"Create Category"})]})]})]})})]})},Ou=()=>{const{formatAmount:e}=ms(),[t,n]=(0,r.useState)([]),[a,s]=(0,r.useState)(!0),[i,l]=(0,r.useState)(""),[o,c]=(0,r.useState)(!1),[u,d]=(0,r.useState)(null),[m,p]=(0,r.useState)({name:"",email:"",phone:"",address:""});(0,r.useEffect)(()=>{f()},[i]);const f=async()=>{try{s(!0);const e=await Ma({search:i,limit:100});n(e.data)}catch(e){da.error("Failed to load customers"),console.error("Error loading customers:",e)}finally{s(!1)}},h=t.filter(e=>e.name.toLowerCase().includes(i.toLowerCase())||e.email&&e.email.toLowerCase().includes(i.toLowerCase())||e.phone&&e.phone.includes(i));return a?(0,Xa.jsx)(hs,{}):(0,Xa.jsxs)("div",{className:"space-y-6",children:[(0,Xa.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Customer Management"}),(0,Xa.jsx)("p",{className:"text-gray-600",children:"Manage your customer database"})]}),(0,Xa.jsx)("button",{onClick:()=>c(!0),className:"btn-primary",children:"Add Customer"})]}),(0,Xa.jsx)("div",{className:"flex space-x-4",children:(0,Xa.jsx)("div",{className:"flex-1",children:(0,Xa.jsx)("input",{type:"text",placeholder:"Search customers by name, email, or phone...",value:i,onChange:e=>l(e.target.value),className:"input w-full"})})}),(0,Xa.jsx)("div",{className:"card",children:(0,Xa.jsx)("div",{className:"card-body p-0",children:0===h.length?(0,Xa.jsxs)("div",{className:"text-center py-12",children:[(0,Xa.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Customers Found"}),(0,Xa.jsx)("p",{className:"text-gray-500 mb-4",children:i?"No customers match your search.":"Start by adding your first customer."}),(0,Xa.jsx)("button",{onClick:()=>c(!0),className:"btn-primary",children:"Add Customer"})]}):(0,Xa.jsx)("div",{className:"overflow-x-auto",children:(0,Xa.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Xa.jsx)("thead",{className:"bg-gray-50",children:(0,Xa.jsxs)("tr",{children:[(0,Xa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),(0,Xa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact Info"}),(0,Xa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stats"}),(0,Xa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Joined"}),(0,Xa.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Xa.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map(t=>(0,Xa.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Xa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("div",{className:"text-sm font-medium text-gray-900",children:t.name}),t.address&&(0,Xa.jsx)("div",{className:"text-sm text-gray-500",children:t.address})]})}),(0,Xa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Xa.jsxs)("div",{children:[t.email&&(0,Xa.jsx)("div",{className:"text-sm text-gray-900",children:t.email}),t.phone&&(0,Xa.jsx)("div",{className:"text-sm text-gray-500",children:t.phone}),!t.email&&!t.phone&&(0,Xa.jsx)("span",{className:"text-sm text-gray-400",children:"No contact info"})]})}),(0,Xa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,Xa.jsxs)("div",{children:[(0,Xa.jsxs)("div",{children:[e(t.total_spent||0)," total"]}),(0,Xa.jsxs)("div",{className:"text-gray-500",children:[t.visit_count||0," visits"]})]})}),(0,Xa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(t.created_at).toLocaleDateString()}),(0,Xa.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:[(0,Xa.jsx)("button",{onClick:()=>(e=>{d(e),p({name:e.name||"",email:e.email||"",phone:e.phone||"",address:e.address||""}),c(!0)})(t),className:"text-blue-600 hover:text-blue-900",children:"Edit"}),(0,Xa.jsx)("button",{onClick:()=>(async e=>{if(window.confirm('Are you sure you want to delete "'.concat(e.name,'"?')))try{await Va(e.id),da.success("Customer deleted successfully"),f()}catch(r){var t,n;const e=(null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.detail)||"Failed to delete customer";da.error(e)}})(t),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},t.id))})]})})})}),o&&(0,Xa.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,Xa.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,Xa.jsxs)("div",{className:"mt-3",children:[(0,Xa.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:u?"Edit Customer":"Add New Customer"}),(0,Xa.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),m.name.trim())try{u?(await Ba(u.id,m),da.success("Customer updated successfully")):(await Ua(m),da.success("Customer created successfully")),c(!1),d(null),p({name:"",email:"",phone:"",address:""}),f()}catch(r){var t,n;const e=(null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.detail)||"Failed to save customer";da.error(e)}else da.error("Customer name is required")},className:"space-y-4",children:[(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),(0,Xa.jsx)("input",{type:"text",value:m.name,onChange:e=>p(Ne(Ne({},m),{},{name:e.target.value})),className:"input w-full",required:!0,placeholder:"Customer name"})]}),(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,Xa.jsx)("input",{type:"email",value:m.email,onChange:e=>p(Ne(Ne({},m),{},{email:e.target.value})),className:"input w-full",placeholder:"customer@example.com"})]}),(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),(0,Xa.jsx)("input",{type:"tel",value:m.phone,onChange:e=>p(Ne(Ne({},m),{},{phone:e.target.value})),className:"input w-full",placeholder:"Phone number"})]}),(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),(0,Xa.jsx)("textarea",{value:m.address,onChange:e=>p(Ne(Ne({},m),{},{address:e.target.value})),className:"input w-full",rows:"3",placeholder:"Customer address"})]}),(0,Xa.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,Xa.jsx)("button",{type:"submit",className:"btn-primary flex-1",children:u?"Update Customer":"Add Customer"}),(0,Xa.jsx)("button",{type:"button",onClick:()=>{c(!1),d(null),p({name:"",email:"",phone:"",address:""})},className:"btn-secondary flex-1",children:"Cancel"})]})]})]})})})]})},Pu=()=>(0,Xa.jsxs)("div",{className:"space-y-6",children:[(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Staff Management"}),(0,Xa.jsx)("p",{className:"text-gray-600",children:"Manage cashiers and staff members"})]}),(0,Xa.jsx)("div",{className:"card",children:(0,Xa.jsx)("div",{className:"card-body",children:(0,Xa.jsxs)("div",{className:"text-center py-12",children:[(0,Xa.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Coming Soon"}),(0,Xa.jsx)("p",{className:"text-gray-500",children:"Staff management interface will be available soon."})]})})})]});const Fu=new class{constructor(){this.device=null,this.server=null,this.service=null,this.characteristic=null,this.isConnected=!1,this.printerModel="POS-9200-L",this.commands={INIT:[27,64],CUT:[29,86,66,0],FEED_LINE:[10],CENTER:[27,97,1],LEFT:[27,97,0],BOLD_ON:[27,69,1],BOLD_OFF:[27,69,0],SMALL_FONT:[27,77,1],NORMAL_FONT:[27,77,0],LARGE_FONT:[29,33,17]}}isBluetoothSupported(){return"undefined"!==typeof navigator&&void 0!==navigator.bluetooth}async connect(){if(!this.isBluetoothSupported())throw new Error("Web Bluetooth API is not supported in this browser");try{return this.device=await navigator.bluetooth.requestDevice({filters:[{name:"POS-9200-L"},{namePrefix:"POS-"},{services:["000018f0-0000-1000-8000-00805f9b34fb"]}],optionalServices:["000018f0-0000-1000-8000-00805f9b34fb"]}),this.server=await this.device.gatt.connect(),this.service=await this.server.getPrimaryService("000018f0-0000-1000-8000-00805f9b34fb"),this.characteristic=await this.service.getCharacteristic("00002af1-0000-1000-8000-00805f9b34fb"),this.isConnected=!0,await this.sendCommand(this.commands.INIT),{success:!0,deviceName:this.device.name||"POS-9200-L",deviceId:this.device.id,message:"Successfully connected to POS-9200-L printer"}}catch(e){throw this.isConnected=!1,new Error("Failed to connect to printer: ".concat(e.message))}}async disconnect(){try{return this.server&&this.server.connected&&await this.server.disconnect(),this.device=null,this.server=null,this.service=null,this.characteristic=null,this.isConnected=!1,{success:!0,message:"Printer disconnected successfully"}}catch(e){throw new Error("Failed to disconnect: ".concat(e.message))}}async sendCommand(e){if(!this.isConnected||!this.characteristic)throw new Error("Printer not connected");try{const t=new Uint8Array(e);await this.characteristic.writeValue(t)}catch(t){throw new Error("Failed to send command: ".concat(t.message))}}async printText(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isConnected)throw new Error("Printer not connected");try{const{align:n="left",bold:r=!1,fontSize:a="normal",lineFeed:s=!0}=t;switch("center"===n?await this.sendCommand(this.commands.CENTER):await this.sendCommand(this.commands.LEFT),a){case"small":await this.sendCommand(this.commands.SMALL_FONT);break;case"large":await this.sendCommand(this.commands.LARGE_FONT);break;default:await this.sendCommand(this.commands.NORMAL_FONT)}r&&await this.sendCommand(this.commands.BOLD_ON);const i=(new TextEncoder).encode(e);await this.characteristic.writeValue(i),r&&await this.sendCommand(this.commands.BOLD_OFF),await this.sendCommand(this.commands.NORMAL_FONT),await this.sendCommand(this.commands.LEFT),s&&await this.sendCommand(this.commands.FEED_LINE)}catch(n){throw new Error("Failed to print text: ".concat(n.message))}}async printReceipt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isConnected)throw new Error("Printer not connected");try{var n,r,a,s;const{paper_size:l="80",characters_per_line:o=32,cut_paper:c=!0,open_drawer:u=!1}=t,d=(null===(n=e.business)||void 0===n||null===(r=n.settings)||void 0===r?void 0:r.currency)||"USD",m={USD:"$",EUR:"\u20ac",GBP:"\xa3",JPY:"\xa5",AUD:"A$",CAD:"C$",CHF:"CHF ",CNY:"\xa5",SEK:"kr",NZD:"NZ$",MXN:"$",SGD:"S$",HKD:"HK$",NOK:"kr",PHP:"\u20b1",THB:"\u0e3f",TRY:"\u20ba",RUB:"\u20bd",INR:"\u20b9",KRW:"\u20a9",BRL:"R$"}[d]||d+" ",p=e=>{const t=parseFloat(e)||0;return["NOK","SEK","CHF"].includes(d)?"".concat(t.toFixed(2)," ").concat(m.trim()):"".concat(m).concat(t.toFixed(2))};if(await this.sendCommand(this.commands.INIT),e.business){var i;if(await this.printText(e.business.name,{align:"center",bold:!0,fontSize:"large"}),e.business.address&&await this.printText(e.business.address,{align:"center"}),e.business.contact_email&&await this.printText(e.business.contact_email,{align:"center"}),e.business.phone&&await this.printText(e.business.phone,{align:"center"}),null!==(i=e.business.settings)&&void 0!==i&&i.receipt_header){await this.printText("");const t=e.business.settings.receipt_header.split("\n");for(const e of t)e.trim()&&await this.printText(e.trim(),{align:"center"})}await this.printText("-".repeat(o),{align:"center"})}await this.printText("".concat(e.transaction_type||"SALE",": ").concat(e.transaction_number),{bold:!0}),await this.printText("Date: ".concat(new Date(e.timestamp).toLocaleString())),e.customer&&await this.printText("Customer: ".concat(e.customer.name)),await this.printText("-".repeat(o));for(const t of e.items){const e=t.product_name.substring(0,o);await this.printText(e);const n="".concat(t.quantity,"x"),r=p(t.unit_price),a=p(t.total_price),s="".concat(n," ").concat(r).padEnd(o-a.length)+a;await this.printText(s)}await this.printText("-".repeat(o));const f="Subtotal:".padEnd(o-12)+p(e.subtotal).padStart(12);if(await this.printText(f),e.tax_amount>0){const t="Tax:".padEnd(o-12)+p(e.tax_amount).padStart(12);await this.printText(t)}if(e.discount_amount>0){const t="Discount:".padEnd(o-12)+"-".concat(p(e.discount_amount)).padStart(12);await this.printText(t)}await this.printText("=".repeat(o));const h="TOTAL:".padEnd(o-12)+p(e.total_amount).padStart(12);if(await this.printText(h,{bold:!0,fontSize:"large"}),e.payment_method&&e.received_amount){await this.printText("Payment: ".concat(e.payment_method.toUpperCase()));const t="Paid:".padEnd(o-12)+p(e.received_amount).padStart(12);await this.printText(t);const n="Change:".padEnd(o-12)+p(e.change_amount||0).padStart(12);await this.printText(n)}if(await this.printText(""),await this.printText("Thank you for your business!",{align:"center"}),null!==(a=e.business)&&void 0!==a&&null!==(s=a.settings)&&void 0!==s&&s.receipt_footer){await this.printText("");const t=e.business.settings.receipt_footer.split("\n");for(const e of t)e.trim()&&await this.printText(e.trim(),{align:"center"})}return e.notes&&(await this.printText(""),await this.printText("Note: ".concat(e.notes),{align:"center"})),e.reprint&&(await this.printText(""),await this.printText("REPRINT - ".concat((new Date).toLocaleString()),{align:"center",fontSize:"small"})),await this.sendCommand(this.commands.FEED_LINE),await this.sendCommand(this.commands.FEED_LINE),c&&await this.sendCommand(this.commands.CUT),u&&await this.openCashDrawer(),{success:!0,message:"Receipt printed successfully",charactersPerLine:o,paperSize:l}}catch(l){throw new Error("Failed to print receipt: ".concat(l.message))}}async openCashDrawer(){try{const e=[27,112,0,25,250];await this.sendCommand(e)}catch(e){console.error("Failed to open cash drawer:",e)}}async testPrinter(){if(!this.isConnected)throw new Error("Printer not connected");try{return await this.printText("=".repeat(32),{align:"center"}),await this.printText("PRINTER TEST",{align:"center",bold:!0,fontSize:"large"}),await this.printText("POS-9200-L Thermal Printer",{align:"center"}),await this.printText("=".repeat(32),{align:"center"}),await this.printText(""),await this.printText("Connection: OK",{bold:!0}),await this.printText("Device: ".concat(this.device.name||"POS-9200-L")),await this.printText("Status: Connected"),await this.printText("Test Time: ".concat((new Date).toLocaleString())),await this.printText(""),await this.printText("Font Sizes:",{bold:!0}),await this.printText("Small font size",{fontSize:"small"}),await this.printText("Normal font size",{fontSize:"normal"}),await this.printText("Large font size",{fontSize:"large"}),await this.printText(""),await this.printText("Test completed successfully!",{align:"center",bold:!0}),await this.sendCommand(this.commands.FEED_LINE),await this.sendCommand(this.commands.CUT),{success:!0,message:"Printer test completed successfully",device:this.device.name||"POS-9200-L"}}catch(e){throw new Error("Printer test failed: ".concat(e.message))}}getStatus(){var e;return{isConnected:this.isConnected,device:this.device?{name:this.device.name||"POS-9200-L",id:this.device.id,connected:(null===(e=this.server)||void 0===e?void 0:e.connected)||!1}:null,printerModel:this.printerModel}}},Lu=Fu;const Ru=new class{constructor(){this.printerTypes={LOCAL:"local",NETWORK:"network",BLUETOOTH:"bluetooth"},this.currentPrinter=null,this.printerSettings=null,this.supportedPrinters=this.detectSupportedPrinters()}detectSupportedPrinters(){const e={};return e.bluetooth="undefined"!==typeof navigator&&void 0!==navigator.bluetooth,e.serial="undefined"!==typeof navigator&&void 0!==navigator.serial,e.local="undefined"!==typeof window&&"function"===typeof window.print,e.network=!0,e}getAvailablePrinters(){const e=[];return this.supportedPrinters.local&&(e.push({id:"local-default",name:"Default System Printer",type:this.printerTypes.LOCAL,description:"Use browser's default print dialog",icon:"\ud83d\udda8\ufe0f",capabilities:["text","graphics","color"],recommended:!0}),e.push({id:"local-receipt",name:"Local Receipt Printer",type:this.printerTypes.LOCAL,description:"Local thermal receipt printer",icon:"\ud83e\uddfe",capabilities:["text","monochrome"],settings:{paper_size:"80mm",characters_per_line:32}})),e.push({id:"network-thermal",name:"Network Thermal Printer",type:this.printerTypes.NETWORK,description:"Wi-Fi or Ethernet connected thermal printer",icon:"\ud83d\udce1",capabilities:["text","monochrome","fast"],settings:{ip_address:"192.168.1.100",port:9100,paper_size:"80mm"}}),e.push({id:"network-inkjet",name:"Network Inkjet/Laser",type:this.printerTypes.NETWORK,description:"Wi-Fi connected inkjet or laser printer",icon:"\ud83d\udda8\ufe0f",capabilities:["text","graphics","color"],settings:{ip_address:"192.168.1.101",port:631}}),this.supportedPrinters.bluetooth&&(e.push({id:"bluetooth-pos9200l",name:"POS-9200-L (Bluetooth)",type:this.printerTypes.BLUETOOTH,description:"POS-9200-L thermal printer via Bluetooth",icon:"\ud83d\udcf6",capabilities:["text","monochrome","portable"],recommended:!0,settings:{device_name:"POS-9200-L",paper_size:"80mm",characters_per_line:32}}),e.push({id:"bluetooth-generic",name:"Generic Bluetooth Printer",type:this.printerTypes.BLUETOOTH,description:"Any Bluetooth-enabled thermal printer",icon:"\ud83d\udcf6",capabilities:["text","monochrome"],settings:{device_name:"",paper_size:"80mm",auto_detect:!0}}),e.push({id:"bluetooth-mobile",name:"Mobile Bluetooth Printer",type:this.printerTypes.BLUETOOTH,description:"Portable Bluetooth receipt printer",icon:"\ud83d\udcf1",capabilities:["text","monochrome","battery"],settings:{device_name:"",paper_size:"58mm",characters_per_line:24}})),e}async configurePrinter(e){return this.currentPrinter=e,this.printerSettings=e.settings||{},e.type===this.printerTypes.BLUETOOTH?await this.initializeBluetoothPrinter(e):e.type===this.printerTypes.NETWORK?await this.initializeNetworkPrinter(e):e.type===this.printerTypes.LOCAL&&await this.initializeLocalPrinter(e),{success:!0,message:"Configured ".concat(e.name," successfully"),printer:e}}async initializeBluetoothPrinter(e){if(!this.supportedPrinters.bluetooth)throw new Error("Bluetooth not supported in this browser");return"bluetooth-pos9200l"===e.id?Lu:null}async initializeNetworkPrinter(e){return console.log("Initializing network printer at ".concat(e.settings.ip_address,":").concat(e.settings.port)),{type:"network",config:e,status:"initialized"}}async initializeLocalPrinter(e){return console.log("Initializing local printer: ".concat(e.name)),{type:"local",config:e,status:"initialized"}}async testPrint(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"connection";if(!this.currentPrinter)throw new Error("No printer configured");const t=this.generateTestData(e);switch(this.currentPrinter.type){case this.printerTypes.BLUETOOTH:return await this.testBluetoothPrint(t);case this.printerTypes.NETWORK:return await this.testNetworkPrint(t);case this.printerTypes.LOCAL:return await this.testLocalPrint(t);default:throw new Error("Unsupported printer type")}}async testBluetoothPrint(e){return"bluetooth-pos9200l"===this.currentPrinter.id?(Lu.isConnected||await Lu.connect(),await Lu.testPrinter()):await this.testGenericBluetoothPrint(e)}async testGenericBluetoothPrint(e){try{const e=await navigator.bluetooth.requestDevice({acceptAllDevices:!0,optionalServices:["000018f0-0000-1000-8000-00805f9b34fb","0000ff00-0000-1000-8000-00805f9b34fb"]}),t=await e.gatt.connect(),n=await t.getPrimaryServices();let r=null;for(const a of n){const e=await a.getCharacteristics();for(const t of e)if(t.properties.write||t.properties.writeWithoutResponse){r=t;break}if(r)break}if(r){const n=(new TextEncoder).encode("TEST PRINT - Generic Bluetooth Printer\n\n");return await r.writeValue(n),await t.disconnect(),{success:!0,message:"Generic Bluetooth printer test completed",device:e.name||"Generic Bluetooth Printer"}}throw new Error("No writable characteristic found")}catch(t){throw new Error("Generic Bluetooth test failed: ".concat(t.message))}}async testNetworkPrint(e){try{if((await fetch("/api/printer/network/test",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({printer:this.currentPrinter,testData:e})})).ok)return{success:!0,message:"Network printer test sent to ".concat(this.currentPrinter.settings.ip_address),details:"Check printer for test output"};throw new Error("Network printer test failed")}catch(t){return{success:!0,message:"Network printer test simulated for ".concat(this.currentPrinter.name),details:"Test would be sent to ".concat(this.currentPrinter.settings.ip_address,":").concat(this.currentPrinter.settings.port),simulated:!0}}}async testLocalPrint(e){try{const t=window.open("","_blank","width=400,height=600"),n='\n        <!DOCTYPE html>\n        <html>\n        <head>\n          <title>Printer Test</title>\n          <style>\n            body { font-family: monospace; margin: 20px; }\n            .header { text-align: center; font-weight: bold; }\n            .separator { border-bottom: 1px solid #000; margin: 10px 0; }\n            .test-item { margin: 5px 0; }\n          </style>\n        </head>\n        <body>\n          <div class="header">\n            <h2>PRINTER TEST</h2>\n            <div>'.concat(this.currentPrinter.name,'</div>\n          </div>\n          <div class="separator"></div>\n          <div class="test-item"><strong>Test Type:</strong> ').concat(e.type,'</div>\n          <div class="test-item"><strong>Date:</strong> ').concat(e.timestamp,'</div>\n          <div class="test-item"><strong>Printer:</strong> ').concat(this.currentPrinter.description,'</div>\n          <div class="separator"></div>\n          <div class="test-item">Font Size Test:</div>\n          <div style="font-size: 10px;">Small Font (10px)</div>\n          <div style="font-size: 12px;">Normal Font (12px)</div>\n          <div style="font-size: 14px;">Large Font (14px)</div>\n          <div class="separator"></div>\n          <div class="test-item">Alignment Test:</div>\n          <div style="text-align: left;">Left Aligned Text</div>\n          <div style="text-align: center;">Center Aligned Text</div>\n          <div style="text-align: right;">Right Aligned Text</div>\n          <div class="separator"></div>\n          <div class="header">Test Completed Successfully!</div>\n          <script>\n            window.onload = function() {\n              setTimeout(function() {\n                window.print();\n                setTimeout(function() {\n                  window.close();\n                }, 1000);\n              }, 500);\n            };\n          <\/script>\n        </body>\n        </html>\n      ');return t.document.write(n),t.document.close(),{success:!0,message:"Local printer test initiated - Check print dialog",details:"Test page sent to system print dialog"}}catch(t){throw new Error("Local printer test failed: ".concat(t.message))}}async printReceipt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.currentPrinter)throw new Error("No printer configured");const n=Ne(Ne({},this.printerSettings),t);switch(this.currentPrinter.type){case this.printerTypes.BLUETOOTH:return await this.printBluetoothReceipt(e,n);case this.printerTypes.NETWORK:return await this.printNetworkReceipt(e,n);case this.printerTypes.LOCAL:return await this.printLocalReceipt(e,n);default:throw new Error("Unsupported printer type")}}async printBluetoothReceipt(e,t){if("bluetooth-pos9200l"===this.currentPrinter.id)return await Lu.printReceipt(e,t);throw new Error("Generic Bluetooth receipt printing not yet implemented")}async printNetworkReceipt(e,t){try{if((await fetch("/api/printer/network/receipt",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({printer:this.currentPrinter,receiptData:e,settings:t})})).ok)return{success:!0,message:"Receipt sent to network printer",printer:this.currentPrinter.name};throw new Error("Network printing failed")}catch(n){throw new Error("Network receipt printing failed: ".concat(n.message))}}async printLocalReceipt(e,t){const n=this.generateReceiptHTML(e,t),r=window.open("","_blank","width=400,height=600");return r.document.write(n),r.document.close(),{success:!0,message:"Receipt sent to local printer",details:"Check print dialog"}}generateTestData(e){var t;const n={type:e,timestamp:(new Date).toLocaleString(),printer:null===(t=this.currentPrinter)||void 0===t?void 0:t.name};switch(e){case"connection":return Ne(Ne({},n),{},{title:"Connection Test",content:"Testing printer connection and basic functionality"});case"formatting":return Ne(Ne({},n),{},{title:"Formatting Test",content:"Testing fonts, alignment, and text formatting"});case"receipt":return Ne(Ne({},n),{},{title:"Receipt Test",content:"Testing complete receipt printing functionality"});default:return n}}generateReceiptHTML(e,t){var n,r,a,s,i,l,o,c,u;const d=t.characters_per_line||32,m=(null===(n=e.business)||void 0===n||null===(r=n.settings)||void 0===r?void 0:r.currency)||"USD",p={USD:"$",EUR:"\u20ac",GBP:"\xa3",JPY:"\xa5",AUD:"A$",CAD:"C$",CHF:"CHF ",CNY:"\xa5",SEK:"kr",NZD:"NZ$",MXN:"$",SGD:"S$",HKD:"HK$",NOK:"kr",PHP:"\u20b1",THB:"\u0e3f",TRY:"\u20ba",RUB:"\u20bd",INR:"\u20b9",KRW:"\u20a9",BRL:"R$"}[m]||m+" ",f=e=>{const t=parseFloat(e)||0;return["NOK","SEK","CHF"].includes(m)?"".concat(t.toFixed(2)," ").concat(p.trim()):"".concat(p).concat(t.toFixed(2))};return"\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <title>Receipt</title>\n        <style>\n          body { \n            font-family: monospace; \n            font-size: 12px;\n            margin: 0;\n            padding: 20px;\n            width: ".concat(8*d,'px;\n          }\n          .center { text-align: center; }\n          .bold { font-weight: bold; }\n          .separator { border-bottom: 1px solid #000; margin: 5px 0; }\n          .item-line { display: flex; justify-content: space-between; }\n          @media print {\n            body { margin: 0; padding: 5mm; }\n          }\n        </style>\n      </head>\n      <body>\n        <div class="center bold">\n          ').concat((null===(a=e.business)||void 0===a?void 0:a.name)||"BUSINESS NAME",'\n        </div>\n        <div class="center">\n          ').concat((null===(s=e.business)||void 0===s?void 0:s.address)||"",'\n        </div>\n        <div class="center">\n          ').concat((null===(i=e.business)||void 0===i?void 0:i.contact_email)||"","\n        </div>\n        ").concat(null!==(l=e.business)&&void 0!==l&&null!==(o=l.settings)&&void 0!==o&&o.receipt_header?'\n          <div class="center" style="margin: 10px 0; white-space: pre-line;">\n            '.concat(e.business.settings.receipt_header,"\n          </div>\n        "):"",'\n        <div class="separator"></div>\n        <div><strong>').concat(e.transaction_type||"SALE",":</strong> ").concat(e.transaction_number,"</div>\n        <div><strong>Date:</strong> ").concat(new Date(e.timestamp).toLocaleString(),"</div>\n        ").concat(e.customer?"<div><strong>Customer:</strong> ".concat(e.customer.name,"</div>"):"",'\n        <div class="separator"></div>\n        ').concat(e.items.map(e=>"\n          <div>".concat(e.product_name,'</div>\n          <div class="item-line">\n            <span>').concat(e.quantity,"x ").concat(f(e.unit_price),"</span>\n            <span>").concat(f(e.total_price),"</span>\n          </div>\n        ")).join(""),'\n        <div class="separator"></div>\n        <div class="item-line">\n          <span>Subtotal:</span>\n          <span>').concat(f(e.subtotal),"</span>\n        </div>\n        ").concat(e.tax_amount>0?'\n          <div class="item-line">\n            <span>Tax:</span>\n            <span>'.concat(f(e.tax_amount),"</span>\n          </div>\n        "):"","\n        ").concat(e.discount_amount>0?'\n          <div class="item-line">\n            <span>Discount:</span>\n            <span>-'.concat(f(e.discount_amount),"</span>\n          </div>\n        "):"",'\n        <div class="separator"></div>\n        <div class="item-line bold">\n          <span>TOTAL:</span>\n          <span>').concat(f(e.total_amount),"</span>\n        </div>\n        ").concat("cash"===e.payment_method?'\n          <div class="item-line">\n            <span>Cash Received:</span>\n            <span>'.concat(f(e.received_amount),'</span>\n          </div>\n          <div class="item-line">\n            <span>Change:</span>\n            <span>').concat(f(e.change_amount),"</span>\n          </div>\n        "):'\n          <div class="item-line">\n            <span>Payment Method:</span>\n            <span>'.concat(e.payment_method,"</span>\n          </div>\n        "),'\n        <div class="center">\n          Thank you for your business!\n        </div>\n        ').concat(null!==(c=e.business)&&void 0!==c&&null!==(u=c.settings)&&void 0!==u&&u.receipt_footer?'\n          <div class="center" style="margin: 10px 0; white-space: pre-line;">\n            '.concat(e.business.settings.receipt_footer,"\n          </div>\n        "):"","\n        <script>\n          window.onload = function() {\n            setTimeout(function() {\n              window.print();\n            }, 500);\n          };\n        <\/script>\n      </body>\n      </html>\n    ")}getStatus(){if(!this.currentPrinter)return{configured:!1,message:"No printer configured"};const e={configured:!0,printer:this.currentPrinter,settings:this.printerSettings};return this.currentPrinter.type===this.printerTypes.BLUETOOTH?Ne(Ne({},e),Lu.getStatus()):Ne(Ne({},e),{},{isConnected:!0,status:"Ready"})}getSupportedFeatures(){return{printerTypes:Object.values(this.printerTypes),browserSupport:this.supportedPrinters,testTypes:["connection","formatting","receipt"],capabilities:["text","graphics","color","monochrome","network","bluetooth","local"]}}},Au=Ru,Du=["title","titleId"];function Iu(e,t){let{title:n,titleId:a}=e,s=xs(e,Du);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),n?r.createElement("title",{id:a},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const zu=r.forwardRef(Iu),Mu=["title","titleId"];function Uu(e,t){let{title:n,titleId:a}=e,s=xs(e,Mu);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),n?r.createElement("title",{id:a},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17.25v1.007a3 3 0 0 1-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0 1 15 18.257V17.25m6-12V15a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 15V5.25m18 0A2.25 2.25 0 0 0 18.75 3H5.25A2.25 2.25 0 0 0 3 5.25m18 0V12a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 12V5.25"}))}const Bu=r.forwardRef(Uu),Vu=["title","titleId"];function Hu(e,t){let{title:n,titleId:a}=e,s=xs(e,Vu);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),n?r.createElement("title",{id:a},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.288 15.038a5.25 5.25 0 0 1 7.424 0M5.106 11.856c3.807-3.808 9.98-3.808 13.788 0M1.924 8.674c5.565-5.565 14.587-5.565 20.152 0M12.53 18.22l-.53.53-.53-.53a.75.75 0 0 1 1.06 0Z"}))}const qu=r.forwardRef(Hu),$u=["title","titleId"];function Wu(e,t){let{title:n,titleId:a}=e,s=xs(e,$u);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),n?r.createElement("title",{id:a},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 1.5H8.25A2.25 2.25 0 0 0 6 3.75v16.5a2.25 2.25 0 0 0 2.25 2.25h7.5A2.25 2.25 0 0 0 18 20.25V3.75a2.25 2.25 0 0 0-2.25-2.25H13.5m-3 0V3h3V1.5m-3 0h3m-3 18.75h3"}))}const Ku=r.forwardRef(Wu),Zu=["title","titleId"];function Gu(e,t){let{title:n,titleId:a}=e,s=xs(e,Zu);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),n?r.createElement("title",{id:a},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Qu=r.forwardRef(Gu),Yu=()=>{const{refreshCurrency:e,formatAmount:t}=ms(),[n,a]=(0,r.useState)(!0),[s,i]=(0,r.useState)(!1),[l,o]=(0,r.useState)(null),[c,u]=(0,r.useState)("general"),[d,m]=(0,r.useState)(!1),[p,f]=(0,r.useState)(null),[h,x]=(0,r.useState)(null),[g]=(0,r.useState)(us()),[v,y]=(0,r.useState)([]),[b,w]=(0,r.useState)(null),[j,N]=(0,r.useState)(!1),[k,S]=(0,r.useState)(null),[_,E]=(0,r.useState)({name:"",description:"",address:"",phone:"",contact_email:"",logo_url:null}),[C,T]=(0,r.useState)({currency:"USD",tax_rate:0,receipt_header:"",receipt_footer:"",low_stock_threshold:10,printer_type:"bluetooth",selected_printer:null,printer_settings:{paper_size:"80",characters_per_line:32,enable_logo:!0,enable_barcode:!1,auto_print:!1,font_size:"normal",cut_paper:!0,open_drawer:!1,printer_name:"default",ip_address:"192.168.1.100",port:9100,device_name:"POS-9200-L"}}),O=[{id:"general",name:"General",icon:lc},{id:"business",name:"Business Details",icon:Po},{id:"printer",name:"Printer Settings",icon:fu},{id:"receipts",name:"Receipts",icon:zu}],P=[{value:"58",label:"58mm",chars:24},{value:"80",label:"80mm",chars:32},{value:"112",label:"112mm (4 inch)",chars:48}];(0,r.useEffect)(()=>{(async()=>{await R(),L(),F();const e=(await va()).data.settings||{};if(e.selected_printer){const n=Au.getAvailablePrinters().find(t=>t.id===e.selected_printer);if(n){w(n);try{await Au.configurePrinter(n)}catch(t){console.error("Failed to configure saved printer:",t)}}}})()},[]);const F=()=>{const e=Au.getAvailablePrinters();if(y(e),!b&&e.length>0){const t=e.find(e=>e.recommended)||e[0];w(t)}},L=()=>{const e=Lu.getStatus();x(e)},R=async()=>{try{a(!0);const e=await va();o(e.data),E({name:e.data.name||"",description:e.data.description||"",address:e.data.address||"",phone:e.data.phone||"",contact_email:e.data.contact_email||"",logo_url:e.data.logo_url||null}),e.data.logo_url&&f(e.data.logo_url);const t=e.data.settings||{};T(e=>Ne(Ne(Ne({},e),t),{},{printer_settings:Ne(Ne({},e.printer_settings),t.printer_settings||{})}))}catch(e){da.error("Failed to load business information"),console.error("Error loading business info:",e)}finally{a(!1)}},A=async e=>{const t=e.target.files[0];if(!t)return;if(["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(t.type))if(t.size>5242880)da.error("File size must be less than 5MB");else{m(!0);try{const e=(await wa(t)).data.logo_url;E(t=>Ne(Ne({},t),{},{logo_url:e})),f("".concat(e,"?t=").concat(Date.now())),da.success("Logo uploaded successfully!")}catch(a){var n,r;da.error("Failed to upload logo: "+((null===(n=a.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.detail)||a.message)),console.error("Error uploading logo:",a)}finally{m(!1)}}else da.error("Invalid file type. Only JPEG, PNG, GIF, WebP allowed.")},D=async()=>{m(!0);try{await ja(),E(e=>Ne(Ne({},e),{},{logo_url:null})),f(null),da.success("Logo removed successfully!")}catch(n){var e,t;da.error("Failed to remove logo: "+((null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||n.message)),console.error("Error removing logo:",n)}finally{m(!1)}},I=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"connection";if(b)try{N(!0),S(null),await Au.configurePrinter(b);const t=await Au.testPrint(e);S(t),da.success(t.message)}catch(t){const e=t.message||"Printer test failed";da.error(e),S({success:!1,message:e,error:!0})}finally{N(!1)}else da.error("Please select a printer first")},z=(e,t)=>{T(n=>Ne(Ne({},n),{},{printer_settings:Ne(Ne({},n.printer_settings),{},{[e]:t})}))},M=(e,t)=>{if(T(n=>Ne(Ne({},n),{},{printer_settings:Ne(Ne({},n.printer_settings),{},{[e]:t})})),"paper_size"===e){const e=P.find(e=>e.value===t);e&&T(t=>Ne(Ne({},t),{},{printer_settings:Ne(Ne({},t.printer_settings),{},{characters_per_line:e.chars})}))}};return n?(0,Xa.jsx)(hs,{}):(0,Xa.jsxs)("div",{className:"space-y-6",children:[(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Business Settings"}),(0,Xa.jsx)("p",{className:"text-gray-600",children:"Configure your business and enhanced receipt printer options"})]}),l&&(0,Xa.jsx)("div",{className:"card",children:(0,Xa.jsx)("div",{className:"card-body",children:(0,Xa.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Xa.jsx)("div",{className:"flex-shrink-0",children:l.logo_url||p?(0,Xa.jsx)("img",{src:p||l.logo_url,alt:"Business Logo",className:"w-16 h-16 rounded-lg object-cover border"}):(0,Xa.jsx)(Po,{className:"h-16 w-16 text-blue-500"})}),(0,Xa.jsxs)("div",{className:"flex-1",children:[(0,Xa.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:l.name}),(0,Xa.jsx)("p",{className:"text-gray-600",children:l.description}),(0,Xa.jsxs)("p",{className:"text-sm text-gray-500",children:["Contact: ",l.contact_email," | Phone: ",l.phone||"Not set"]})]}),(0,Xa.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,Xa.jsxs)("label",{className:"btn-primary text-xs px-3 py-1 cursor-pointer relative overflow-hidden",children:[d?"Uploading...":"Upload Logo",(0,Xa.jsx)("input",{type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",accept:"image/*",onChange:A,disabled:d})]}),(l.logo_url||p)&&(0,Xa.jsx)("button",{onClick:D,className:"btn-secondary text-xs px-3 py-1",disabled:s,children:"Remove Logo"})]})]})})}),(0,Xa.jsx)("div",{className:"border-b border-gray-200",children:(0,Xa.jsx)("nav",{className:"-mb-px flex space-x-8",children:O.map(e=>(0,Xa.jsxs)("button",{onClick:()=>u(e.id),className:"flex items-center py-2 px-1 border-b-2 font-medium text-sm ".concat(c===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,Xa.jsx)(e.icon,{className:"h-5 w-5 mr-2"}),e.name]},e.id))})}),(0,Xa.jsxs)("div",{className:"space-y-6",children:["general"===c&&(0,Xa.jsx)("div",{className:"card",children:(0,Xa.jsxs)("div",{className:"card-body space-y-6",children:[(0,Xa.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"General Settings"}),(0,Xa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Xa.jsxs)("div",{children:[(0,Xa.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Currency ",(0,Xa.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Xa.jsxs)("select",{value:C.currency,onChange:e=>T(Ne(Ne({},C),{},{currency:e.target.value})),className:"input w-full ".concat(C.currency?"":"border-red-300"),required:!0,children:[(0,Xa.jsx)("option",{value:"",children:"Select currency..."}),g.map(e=>(0,Xa.jsxs)("option",{value:e.code,children:[e.code," (",e.symbol,") - ",e.name]},e.code))]}),!C.currency&&(0,Xa.jsx)("p",{className:"text-red-500 text-xs mt-1",children:"Currency is required"}),(0,Xa.jsx)("p",{className:"text-gray-500 text-xs mt-1",children:"Selected currency will be used throughout the POS system"})]}),(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tax Rate (%)"}),(0,Xa.jsx)("input",{type:"number",min:"0",max:"100",step:"0.01",value:C.tax_rate,onChange:e=>T(Ne(Ne({},C),{},{tax_rate:parseFloat(e.target.value)||0})),className:"input w-full",placeholder:"0.00"})]}),(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Low Stock Threshold"}),(0,Xa.jsx)("input",{type:"number",min:"1",value:C.low_stock_threshold,onChange:e=>T(Ne(Ne({},C),{},{low_stock_threshold:parseInt(e.target.value)||10})),className:"input w-full",placeholder:"10"}),(0,Xa.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Alert when product quantity falls below this number"})]})]})]})}),"business"===c&&(0,Xa.jsx)("div",{className:"card",children:(0,Xa.jsxs)("div",{className:"card-body space-y-6",children:[(0,Xa.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Xa.jsx)(Po,{className:"h-6 w-6 text-gray-600"}),(0,Xa.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Business Details"})]}),(0,Xa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Name *"}),(0,Xa.jsx)("input",{type:"text",value:_.name,onChange:e=>E(Ne(Ne({},_),{},{name:e.target.value})),className:"input w-full",placeholder:"Enter business name",required:!0})]}),(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Email *"}),(0,Xa.jsx)("input",{type:"email",value:_.contact_email,onChange:e=>E(Ne(Ne({},_),{},{contact_email:e.target.value})),className:"input w-full",placeholder:"Enter contact email",required:!0})]}),(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),(0,Xa.jsx)("input",{type:"tel",value:_.phone,onChange:e=>E(Ne(Ne({},_),{},{phone:e.target.value})),className:"input w-full",placeholder:"Enter phone number"})]}),(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),(0,Xa.jsx)("textarea",{rows:"3",value:_.address,onChange:e=>E(Ne(Ne({},_),{},{address:e.target.value})),className:"input w-full",placeholder:"Enter business address"})]}),(0,Xa.jsxs)("div",{className:"md:col-span-2",children:[(0,Xa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,Xa.jsx)("textarea",{rows:"3",value:_.description,onChange:e=>E(Ne(Ne({},_),{},{description:e.target.value})),className:"input w-full",placeholder:"Enter business description"})]})]}),(0,Xa.jsxs)("div",{className:"border-t pt-6",children:[(0,Xa.jsx)("h4",{className:"font-medium text-gray-900 mb-4",children:"Business Logo"}),(0,Xa.jsxs)("div",{className:"flex items-start space-x-6",children:[(0,Xa.jsx)("div",{className:"flex-1",children:(0,Xa.jsxs)("div",{className:"flex items-center justify-center w-32 h-32 border-2 border-dashed border-gray-300 rounded-lg relative overflow-hidden",children:[p?(0,Xa.jsx)("img",{src:p,alt:"Business Logo",className:"w-full h-full object-contain"}):(0,Xa.jsxs)("div",{className:"text-center",children:[(0,Xa.jsx)(Po,{className:"mx-auto h-8 w-8 text-gray-400"}),(0,Xa.jsx)("span",{className:"text-xs text-gray-500 mt-2",children:"No Logo"})]}),(0,Xa.jsx)("input",{type:"file",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",accept:"image/*",onChange:A,disabled:d})]})}),(0,Xa.jsxs)("div",{className:"flex-1",children:[(0,Xa.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Upload a logo for your business. This will appear on receipts and reports."}),(0,Xa.jsxs)("div",{className:"space-y-2",children:[(0,Xa.jsx)("p",{className:"text-xs text-gray-500",children:"\u2022 Supported formats: JPEG, PNG, GIF, WebP"}),(0,Xa.jsx)("p",{className:"text-xs text-gray-500",children:"\u2022 Maximum size: 5MB"}),(0,Xa.jsx)("p",{className:"text-xs text-gray-500",children:"\u2022 Recommended: Square aspect ratio (1:1)"})]}),(0,Xa.jsxs)("div",{className:"flex space-x-3 mt-4",children:[(0,Xa.jsx)("button",{type:"button",onClick:()=>document.querySelector('input[type="file"]').click(),disabled:d,className:"btn-secondary text-sm",children:d?"Uploading...":"Choose File"}),p&&(0,Xa.jsx)("button",{type:"button",onClick:D,disabled:d,className:"btn-danger text-sm",children:"Remove Logo"})]})]})]})]}),(0,Xa.jsx)("div",{className:"flex justify-end",children:(0,Xa.jsx)("button",{onClick:async()=>{i(!0);try{await ba(_),await R(),da.success("Business details updated successfully!")}catch(n){var e,t;da.error("Failed to save business details: "+((null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||n.message)),console.error("Error saving business details:",n)}finally{i(!1)}},disabled:s,className:"btn-primary",children:s?"Saving...":"Save Business Details"})})]})}),"printer"===c&&(0,Xa.jsxs)("div",{className:"space-y-6",children:[(0,Xa.jsx)("div",{className:"card",children:(0,Xa.jsxs)("div",{className:"card-body",children:[(0,Xa.jsxs)("div",{className:"flex items-center space-x-2 mb-6",children:[(0,Xa.jsx)(fu,{className:"h-6 w-6 text-gray-600"}),(0,Xa.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Enhanced Printer Options"})]}),(0,Xa.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:v.map(e=>{var t;const n=(e=>{switch(e){case"local":return Bu;case"network":return qu;case"bluetooth":return Ku;default:return fu}})(e.type);return(0,Xa.jsx)("div",{className:"border-2 rounded-lg p-4 cursor-pointer transition-all ".concat((null===b||void 0===b?void 0:b.id)===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),onClick:()=>(async e=>{w(e),T(t=>Ne(Ne({},t),{},{printer_type:e.type,selected_printer:e.id,printer_settings:Ne(Ne({},t.printer_settings),e.settings)})),S(null);try{await Au.configurePrinter(e),da.success("Selected ".concat(e.name))}catch(t){console.error("Failed to configure printer:",t)}})(e),children:(0,Xa.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,Xa.jsx)(n,{className:"h-8 w-8 text-gray-600 mt-1 flex-shrink-0"}),(0,Xa.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Xa.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Xa.jsx)("h4",{className:"font-medium text-gray-900 truncate",children:e.name}),e.recommended&&(0,Xa.jsx)("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:"Recommended"})]}),(0,Xa.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:e.description}),(0,Xa.jsx)("div",{className:"flex flex-wrap gap-1",children:null===(t=e.capabilities)||void 0===t?void 0:t.map(e=>(0,Xa.jsx)("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded",children:e},e))})]}),(null===b||void 0===b?void 0:b.id)===e.id&&(0,Xa.jsx)(Qu,{className:"h-5 w-5 text-green-500 flex-shrink-0"})]})},e.id)})}),"network"===(null===b||void 0===b?void 0:b.type)&&(0,Xa.jsxs)("div",{className:"border-t pt-6",children:[(0,Xa.jsx)("h4",{className:"font-medium text-gray-900 mb-4",children:"Network Configuration"}),(0,Xa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"IP Address"}),(0,Xa.jsx)("input",{type:"text",value:C.printer_settings.ip_address,onChange:e=>z("ip_address",e.target.value),className:"input w-full",placeholder:"192.168.1.100"})]}),(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Port"}),(0,Xa.jsx)("input",{type:"number",value:C.printer_settings.port,onChange:e=>z("port",parseInt(e.target.value)),className:"input w-full",placeholder:"9100"})]})]})]}),(0,Xa.jsxs)("div",{className:"border-t pt-6",children:[(0,Xa.jsx)("h4",{className:"font-medium text-gray-900 mb-4",children:"Test Print Functions"}),(0,Xa.jsxs)("div",{className:"flex flex-wrap gap-3 mb-4",children:[(0,Xa.jsxs)("button",{onClick:()=>I("connection"),disabled:j||!b,className:"btn-primary text-sm",children:[(0,Xa.jsx)(fu,{className:"h-4 w-4 mr-2"}),j?"Testing...":"Test Connection"]}),(0,Xa.jsx)("button",{onClick:()=>I("formatting"),disabled:j||!b,className:"btn-secondary text-sm",children:"\ud83d\udcdd Test Formatting"}),(0,Xa.jsx)("button",{onClick:()=>I("receipt"),disabled:j||!b,className:"btn-secondary text-sm",children:"\ud83e\uddfe Test Receipt"})]}),k&&(0,Xa.jsx)("div",{className:"p-3 rounded-lg border ".concat(k.success?"bg-green-50 border-green-200":"bg-red-50 border-red-200"),children:(0,Xa.jsxs)("div",{className:"flex items-start space-x-2",children:[k.success?(0,Xa.jsx)(Qu,{className:"h-5 w-5 text-green-500 mt-0.5"}):(0,Xa.jsx)(Uc,{className:"h-5 w-5 text-red-500 mt-0.5"}),(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("p",{className:"text-sm font-medium ".concat(k.success?"text-green-800":"text-red-800"),children:k.message}),k.details&&(0,Xa.jsx)("p",{className:"text-xs mt-1 ".concat(k.success?"text-green-600":"text-red-600"),children:k.details}),k.simulated&&(0,Xa.jsx)("p",{className:"text-xs mt-1 text-blue-600",children:"\u26a0\ufe0f This was a simulated test. Actual network printing requires backend configuration."})]})]})}),(0,Xa.jsxs)("p",{className:"text-xs text-gray-500 mt-3",children:["Selected Printer: ",(0,Xa.jsx)("strong",{children:(null===b||void 0===b?void 0:b.name)||"None"}),(null===b||void 0===b?void 0:b.type)&&(0,Xa.jsxs)(Xa.Fragment,{children:[" \u2022 Type: ",(0,Xa.jsx)("strong",{children:b.type})]})]})]})]})}),(0,Xa.jsx)("div",{className:"card",children:(0,Xa.jsxs)("div",{className:"card-body space-y-6",children:[(0,Xa.jsx)("h4",{className:"font-medium text-gray-900",children:"Basic Configuration"}),(0,Xa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Paper Size"}),(0,Xa.jsx)("select",{value:C.printer_settings.paper_size,onChange:e=>M("paper_size",e.target.value),className:"input w-full",children:P.map(e=>(0,Xa.jsxs)("option",{value:e.value,children:[e.label," (",e.chars," characters per line)"]},e.value))})]}),(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Font Size"}),(0,Xa.jsxs)("select",{value:C.printer_settings.font_size,onChange:e=>M("font_size",e.target.value),className:"input w-full",children:[(0,Xa.jsx)("option",{value:"small",children:"Small"}),(0,Xa.jsx)("option",{value:"normal",children:"Normal"}),(0,Xa.jsx)("option",{value:"large",children:"Large"})]})]})]}),(0,Xa.jsxs)("div",{className:"space-y-3",children:[(0,Xa.jsxs)("label",{className:"flex items-center",children:[(0,Xa.jsx)("input",{type:"checkbox",checked:C.printer_settings.auto_print,onChange:e=>M("auto_print",e.target.checked),className:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"}),(0,Xa.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Auto-print receipts after sale completion"})]}),(0,Xa.jsxs)("label",{className:"flex items-center",children:[(0,Xa.jsx)("input",{type:"checkbox",checked:C.printer_settings.cut_paper,onChange:e=>M("cut_paper",e.target.checked),className:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"}),(0,Xa.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Auto cut paper after printing"})]}),(0,Xa.jsxs)("label",{className:"flex items-center",children:[(0,Xa.jsx)("input",{type:"checkbox",checked:C.printer_settings.open_drawer,onChange:e=>M("open_drawer",e.target.checked),className:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"}),(0,Xa.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Open cash drawer after printing"})]})]})]})})]}),"receipts"===c&&(0,Xa.jsx)("div",{className:"card",children:(0,Xa.jsxs)("div",{className:"card-body space-y-6",children:[(0,Xa.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Xa.jsx)(zu,{className:"h-6 w-6 text-gray-600"}),(0,Xa.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Receipt Content"})]}),(0,Xa.jsxs)("div",{className:"space-y-4",children:[(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Receipt Header"}),(0,Xa.jsx)("textarea",{rows:"3",value:C.receipt_header,onChange:e=>T(Ne(Ne({},C),{},{receipt_header:e.target.value})),className:"input w-full",placeholder:"Welcome to our store!\nThank you for shopping with us."}),(0,Xa.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Text displayed at the top of receipts (after business name)"})]}),(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Receipt Footer"}),(0,Xa.jsx)("textarea",{rows:"3",value:C.receipt_footer,onChange:e=>T(Ne(Ne({},C),{},{receipt_footer:e.target.value})),className:"input w-full",placeholder:"Visit us again!\nFollow us on social media @ourstore"}),(0,Xa.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Text displayed at the bottom of receipts"})]})]}),(0,Xa.jsxs)("div",{className:"bg-gray-50 p-4 rounded-md",children:[(0,Xa.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Receipt Preview"}),(0,Xa.jsxs)("div",{className:"font-mono text-xs bg-white p-3 rounded border",style:{width:"".concat(8*C.printer_settings.characters_per_line,"px"),fontSize:"small"===C.printer_settings.font_size?"10px":"large"===C.printer_settings.font_size?"14px":"12px"},children:[(0,Xa.jsxs)("div",{className:"text-center border-b pb-2 mb-2",children:[(0,Xa.jsx)("div",{className:"font-bold",children:(null===l||void 0===l?void 0:l.name)||"BUSINESS NAME"}),C.receipt_header&&(0,Xa.jsx)("div",{className:"mt-1",children:C.receipt_header})]}),(0,Xa.jsxs)("div",{className:"space-y-1",children:[(0,Xa.jsxs)("div",{className:"flex justify-between",children:[(0,Xa.jsx)("span",{children:"Sample Item"}),(0,Xa.jsx)("span",{children:t(10)})]}),(0,Xa.jsxs)("div",{className:"flex justify-between",children:[(0,Xa.jsx)("span",{children:"Test Product"}),(0,Xa.jsx)("span",{children:t(5.5)})]}),(0,Xa.jsx)("div",{className:"border-t pt-1 mt-2",children:(0,Xa.jsxs)("div",{className:"flex justify-between font-bold",children:[(0,Xa.jsx)("span",{children:"TOTAL"}),(0,Xa.jsx)("span",{children:t(15.5)})]})})]}),C.receipt_footer&&(0,Xa.jsx)("div",{className:"text-center border-t pt-2 mt-2",children:C.receipt_footer})]})]})]})})]}),(0,Xa.jsx)("div",{className:"flex justify-end",children:(0,Xa.jsx)("button",{onClick:async()=>{if(C.currency&&""!==C.currency.trim()){i(!0);try{await ya(C),await e(),da.success("Settings saved successfully!")}catch(r){var t,n;da.error("Failed to save settings: "+((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.detail)||r.message)),console.error("Error saving settings:",r)}finally{i(!1)}}else da.error("Currency is required")},disabled:s,className:"btn-primary",children:s?"Saving...":"Save Settings"})})]})},Ju=["title","titleId"];function Xu(e,t){let{title:n,titleId:a}=e,s=xs(e,Ju);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),n?r.createElement("title",{id:a},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const ed=r.forwardRef(Xu),td=()=>{var e,t,n,a;const{formatAmount:s}=ms(),[i,l]=(0,r.useState)(null),[o,c]=(0,r.useState)([]),[u,d]=(0,r.useState)({}),m={category:{label:"Category",placeholder:"All categories",options:o.map(e=>({value:e.id,label:e.name}))},payment_method:{label:"Payment Method",placeholder:"All payment methods",options:[{value:"cash",label:"Cash"},{value:"card",label:"Card"},{value:"bank_transfer",label:"Bank Transfer"}]},status:{label:"Status",placeholder:"All statuses",options:[{value:"completed",label:"Completed"},{value:"pending",label:"Pending"},{value:"cancelled",label:"Cancelled"}]}},{filters:p,setFilters:f,loading:h,generateQueryParams:x,clearFilters:g,hasActiveFilters:v}=Vc({defaultFilters:{date_preset:"last30days"},persistenceKey:"reports-filter",enablePersistence:!0});(0,r.useEffect)(()=>{y(),b()},[]);const y=async()=>{try{const e=await Aa();c(Array.isArray(e.data)?e.data:[])}catch(e){console.error("Failed to load categories:",e)}},b=async()=>{try{const e=await Ja();l(e.data)}catch(e){console.error("Failed to load daily summary:",e)}},w=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"excel";const n="".concat(e,"-").concat(t);try{d(e=>Ne(Ne({},e),{},{[n]:!0}));const r=x();let a,s;switch(e){case"sales":a=await Za(Ne({format:t},r)),s="sales_report.".concat("excel"===t?"xlsx":t);break;case"inventory":a=await Ga(Ne({format:t},r)),s="inventory_report.".concat("excel"===t?"xlsx":t);break;case"customers":a=await Qa(Ne({format:t},r)),s="customers_report.".concat("excel"===t?"xlsx":t);break;default:throw new Error("Invalid report type")}const i=new Blob([a.data]),l=window.URL.createObjectURL(i),o=document.createElement("a");o.href=l,o.download=s,document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(l),da.success("".concat(e.charAt(0).toUpperCase()+e.slice(1)," report downloaded successfully with current filters applied"))}catch(s){var r,a;console.error("Download error:",s);const t=(null===(r=s.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.detail)||"Failed to download ".concat(e," report");da.error(t)}finally{d(e=>Ne(Ne({},e),{},{[n]:!1}))}},j=(e,t)=>u["".concat(e,"-").concat(t)];return(0,Xa.jsxs)("div",{className:"space-y-6",children:[(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Reports & Analytics"}),(0,Xa.jsx)("p",{className:"text-gray-600",children:"Generate and download business reports with advanced filtering"})]}),i&&(0,Xa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,Xa.jsx)("div",{className:"card",children:(0,Xa.jsx)("div",{className:"card-body",children:(0,Xa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Today's Sales"}),(0,Xa.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null===(e=i.sales)||void 0===e?void 0:e.total_sales)||0})]}),(0,Xa.jsx)(Co,{className:"h-8 w-8 text-blue-500"})]})})}),(0,Xa.jsx)("div",{className:"card",children:(0,Xa.jsx)("div",{className:"card-body",children:(0,Xa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Today's Revenue"}),(0,Xa.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:s((null===(t=i.sales)||void 0===t?void 0:t.total_revenue)||0)})]}),(0,Xa.jsx)(nu,{className:"h-8 w-8 text-green-500"})]})})}),(0,Xa.jsx)("div",{className:"card",children:(0,Xa.jsx)("div",{className:"card-body",children:(0,Xa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Items Sold"}),(0,Xa.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null===(n=i.products)||void 0===n?void 0:n.total_items_sold)||0})]}),(0,Xa.jsx)(Go,{className:"h-8 w-8 text-purple-500"})]})})}),(0,Xa.jsx)("div",{className:"card",children:(0,Xa.jsx)("div",{className:"card-body",children:(0,Xa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Customers Served"}),(0,Xa.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null===(a=i.customers)||void 0===a?void 0:a.unique_customers_served)||0})]}),(0,Xa.jsx)(ac,{className:"h-8 w-8 text-orange-500"})]})})})]}),(0,Xa.jsx)(Bc,{filters:m,onFilterChange:f,loading:h,initialFilters:p,className:"mb-6",searchPlaceholder:"Search reports by customer, product, SKU..."}),(0,Xa.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:[(0,Xa.jsx)("div",{className:"card",children:(0,Xa.jsxs)("div",{className:"card-body",children:[(0,Xa.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,Xa.jsxs)("div",{className:"flex items-center",children:[(0,Xa.jsx)(Co,{className:"h-6 w-6 text-blue-500 mr-3"}),(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Sales Reports"}),(0,Xa.jsx)("p",{className:"text-sm text-gray-500",children:"Detailed sales transaction reports"})]})]})}),(0,Xa.jsxs)("div",{className:"space-y-3",children:[(0,Xa.jsxs)("p",{className:"text-sm text-gray-600",children:[v?"Filtered sales data":"All sales data"," \u2022 Export with current filters applied"]}),(0,Xa.jsxs)("div",{className:"flex space-x-2",children:[(0,Xa.jsxs)("button",{onClick:()=>w("sales","excel"),disabled:j("sales","excel"),className:"btn-primary text-sm flex items-center",children:[(0,Xa.jsx)(ed,{className:"h-4 w-4 mr-1"}),j("sales","excel")?"Downloading...":"Download Excel"]}),(0,Xa.jsxs)("button",{onClick:()=>w("sales","pdf"),disabled:j("sales","pdf"),className:"btn-secondary text-sm flex items-center",children:[(0,Xa.jsx)(ed,{className:"h-4 w-4 mr-1"}),j("sales","pdf")?"Downloading...":"Download PDF"]})]})]})]})}),(0,Xa.jsx)("div",{className:"card",children:(0,Xa.jsxs)("div",{className:"card-body",children:[(0,Xa.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,Xa.jsxs)("div",{className:"flex items-center",children:[(0,Xa.jsx)(Go,{className:"h-6 w-6 text-green-500 mr-3"}),(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Inventory Reports"}),(0,Xa.jsx)("p",{className:"text-sm text-gray-500",children:"Stock levels and product analytics"})]})]})}),(0,Xa.jsxs)("div",{className:"space-y-3",children:[(0,Xa.jsxs)("p",{className:"text-sm text-gray-600",children:[v?"Filtered inventory data":"All inventory data"," \u2022 Export with current filters applied"]}),(0,Xa.jsxs)("div",{className:"flex space-x-2",children:[(0,Xa.jsxs)("button",{onClick:()=>w("inventory","excel"),disabled:j("inventory","excel"),className:"btn-primary text-sm flex items-center",children:[(0,Xa.jsx)(ed,{className:"h-4 w-4 mr-1"}),j("inventory","excel")?"Downloading...":"Download Excel"]}),(0,Xa.jsxs)("button",{onClick:()=>w("inventory","pdf"),disabled:j("inventory","pdf"),className:"btn-secondary text-sm flex items-center",children:[(0,Xa.jsx)(ed,{className:"h-4 w-4 mr-1"}),j("inventory","pdf")?"Downloading...":"Download PDF"]})]})]})]})}),(0,Xa.jsx)("div",{className:"card",children:(0,Xa.jsxs)("div",{className:"card-body",children:[(0,Xa.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,Xa.jsxs)("div",{className:"flex items-center",children:[(0,Xa.jsx)(ac,{className:"h-6 w-6 text-purple-500 mr-3"}),(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Customer Reports"}),(0,Xa.jsx)("p",{className:"text-sm text-gray-500",children:"Customer analytics and purchase history"})]})]})}),(0,Xa.jsxs)("div",{className:"space-y-3",children:[(0,Xa.jsxs)("p",{className:"text-sm text-gray-600",children:[v?"Filtered customer data":"All customer data"," \u2022 Export with current filters applied"]}),(0,Xa.jsxs)("div",{className:"flex space-x-2",children:[(0,Xa.jsxs)("button",{onClick:()=>w("customers","excel"),disabled:j("customers","excel"),className:"btn-primary text-sm flex items-center",children:[(0,Xa.jsx)(ed,{className:"h-4 w-4 mr-1"}),j("customers","excel")?"Downloading...":"Download Excel"]}),(0,Xa.jsxs)("button",{onClick:()=>w("customers","pdf"),disabled:j("customers","pdf"),className:"btn-secondary text-sm flex items-center",children:[(0,Xa.jsx)(ed,{className:"h-4 w-4 mr-1"}),j("customers","pdf")?"Downloading...":"Download PDF"]})]})]})]})})]}),v&&(0,Xa.jsx)("div",{className:"card",children:(0,Xa.jsx)("div",{className:"card-body",children:(0,Xa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Xa.jsx)("div",{className:"flex items-center",children:(0,Xa.jsxs)("div",{className:"flex items-center text-sm text-blue-600",children:[(0,Xa.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),"Filters are active - All exports will include filtered data only"]})}),(0,Xa.jsx)("button",{onClick:g,className:"text-sm text-gray-500 hover:text-gray-700",children:"Clear all filters"})]})})})]})},nd=["title","titleId"];function rd(e,t){let{title:n,titleId:a}=e,s=xs(e,nd);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),n?r.createElement("title",{id:a},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6 9 12.75l4.286-4.286a11.948 11.948 0 0 1 4.306 6.43l.776 2.898m0 0 3.182-5.511m-3.182 5.51-5.511-3.181"}))}const ad=r.forwardRef(rd),sd=["title","titleId"];function id(e,t){let{title:n,titleId:a}=e,s=xs(e,sd);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),n?r.createElement("title",{id:a},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18 9 11.25l4.306 4.306a11.95 11.95 0 0 1 5.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941"}))}const ld=r.forwardRef(id),od=()=>{const{user:e}=as(),[t,n]=(0,r.useState)(!1),[a,s]=(0,r.useState)({}),[i,l]=(0,r.useState)("last30days"),[o,c]=(0,r.useState)(""),[u,d]=(0,r.useState)(""),m=e&&("business_admin"===e.role||"super_admin"===e.role);(0,r.useEffect)(()=>{const e=new Date,t=new Date(e.getTime()-2592e6);c(t.toISOString().split("T")[0]),d(e.toISOString().split("T")[0])},[]);const p=async e=>{if(!m)return void da.error("You don't have permission to access profit reports");if("custom"===i&&(!o||!u))return void da.error("Please select both start and end dates");if(o&&u&&o>u)return void da.error("Start date cannot be later than end date");const t="profit-".concat(e);try{s(e=>Ne(Ne({},e),{},{[t]:!0}));const n=(()=>{const e=new Date,t=new Date(e.getTime()-864e5);switch(i){case"today":return{start_date:e.toISOString().split("T")[0],end_date:e.toISOString().split("T")[0]};case"yesterday":return{start_date:t.toISOString().split("T")[0],end_date:t.toISOString().split("T")[0]};case"last7days":return{start_date:new Date(e.getTime()-6048e5).toISOString().split("T")[0],end_date:e.toISOString().split("T")[0]};case"thismonth":return{start_date:new Date(e.getFullYear(),e.getMonth(),1).toISOString().split("T")[0],end_date:e.toISOString().split("T")[0]};case"last30days":return{start_date:new Date(e.getTime()-2592e6).toISOString().split("T")[0],end_date:e.toISOString().split("T")[0]};default:return{start_date:o,end_date:u}}})(),r=await Ya(Ne({format:e},n)),a=r.headers["content-disposition"];let l="profit-report.".concat("excel"===e?"xlsx":e);if(a){const e=a.match(/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/);e&&e[1]&&(l=e[1].replace(/['"]/g,""))}const c=new Blob([r.data]),d=window.URL.createObjectURL(c),m=document.createElement("a");m.href=d,m.download=l,document.body.appendChild(m),m.click(),document.body.removeChild(m),window.URL.revokeObjectURL(d),da.success("Profit report downloaded successfully (".concat(e.toUpperCase(),")"))}catch(l){var n,r,a;console.error("Download error:",l);let e="Failed to download profit report";403===(null===(n=l.response)||void 0===n?void 0:n.status)?e="You don't have permission to access profit reports":null!==(r=l.response)&&void 0!==r&&null!==(a=r.data)&&void 0!==a&&a.detail&&(e=l.response.data.detail),da.error(e)}finally{s(e=>Ne(Ne({},e),{},{[t]:!1}))}},f=e=>a["profit-".concat(e)];return m?t?(0,Xa.jsx)(hs,{message:"Loading profit report..."}):(0,Xa.jsxs)("div",{className:"space-y-6",children:[(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Profit Report"}),(0,Xa.jsx)("p",{className:"text-gray-600",children:"Analyze your business profitability with detailed cost and revenue insights"})]}),(0,Xa.jsx)("div",{className:"card",children:(0,Xa.jsxs)("div",{className:"card-body",children:[(0,Xa.jsxs)("div",{className:"flex items-center mb-4",children:[(0,Xa.jsx)(Rc,{className:"h-6 w-6 text-blue-500 mr-2"}),(0,Xa.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Date Range Filter"})]}),(0,Xa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{className:"form-label",children:"Quick Presets"}),(0,Xa.jsxs)("select",{className:"form-input",value:i,onChange:e=>l(e.target.value),children:[(0,Xa.jsx)("option",{value:"today",children:"Today"}),(0,Xa.jsx)("option",{value:"yesterday",children:"Yesterday"}),(0,Xa.jsx)("option",{value:"last7days",children:"Last 7 Days"}),(0,Xa.jsx)("option",{value:"thismonth",children:"This Month"}),(0,Xa.jsx)("option",{value:"last30days",children:"Last 30 Days"}),(0,Xa.jsx)("option",{value:"custom",children:"Custom Range"})]})]}),"custom"===i&&(0,Xa.jsxs)(Xa.Fragment,{children:[(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{className:"form-label",children:"Start Date"}),(0,Xa.jsx)("input",{type:"date",className:"form-input",value:o,onChange:e=>c(e.target.value)})]}),(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{className:"form-label",children:"End Date"}),(0,Xa.jsx)("input",{type:"date",className:"form-input",value:u,onChange:e=>d(e.target.value)})]})]})]}),(0,Xa.jsx)("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:(0,Xa.jsxs)("p",{className:"text-sm text-blue-700",children:[(0,Xa.jsx)(ou,{className:"inline h-4 w-4 mr-1"}),"Selected Range: ",(0,Xa.jsx)("strong",{children:(()=>{switch(i){case"today":return"Today";case"yesterday":return"Yesterday";case"last7days":return"Last 7 Days";case"thismonth":return"This Month";case"last30days":default:return"Last 30 Days";case"custom":return"".concat(o," to ").concat(u)}})()})]})})]})}),(0,Xa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,Xa.jsx)("div",{className:"card",children:(0,Xa.jsx)("div",{className:"card-body",children:(0,Xa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Gross Sales"}),(0,Xa.jsx)("p",{className:"text-2xl font-bold text-green-600",children:"Available in Export"}),(0,Xa.jsx)("p",{className:"text-xs text-gray-500",children:"Total revenue from sales"})]}),(0,Xa.jsx)(vc,{className:"h-8 w-8 text-green-500"})]})})}),(0,Xa.jsx)("div",{className:"card",children:(0,Xa.jsx)("div",{className:"card-body",children:(0,Xa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Cost of Goods Sold"}),(0,Xa.jsx)("p",{className:"text-2xl font-bold text-orange-600",children:"Available in Export"}),(0,Xa.jsx)("p",{className:"text-xs text-gray-500",children:"Total cost of sold items"})]}),(0,Xa.jsx)(ad,{className:"h-8 w-8 text-orange-500"})]})})}),(0,Xa.jsx)("div",{className:"card",children:(0,Xa.jsx)("div",{className:"card-body",children:(0,Xa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Net Profit"}),(0,Xa.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:"Available in Export"}),(0,Xa.jsx)("p",{className:"text-xs text-gray-500",children:"Gross Sales - COGS"})]}),(0,Xa.jsx)(ld,{className:"h-8 w-8 text-blue-500"})]})})})]}),(0,Xa.jsx)("div",{className:"card",children:(0,Xa.jsxs)("div",{className:"card-body",children:[(0,Xa.jsxs)("div",{className:"flex items-center mb-6",children:[(0,Xa.jsx)(nu,{className:"h-6 w-6 text-purple-500 mr-2"}),(0,Xa.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Export Profit Report"})]}),(0,Xa.jsx)("div",{className:"space-y-4",children:(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("h3",{className:"font-medium text-gray-900 mb-3",children:"Detailed Profit Analysis"}),(0,Xa.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Comprehensive profit report with line-by-line analysis including:"}),(0,Xa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600 mb-6",children:[(0,Xa.jsxs)("ul",{className:"list-disc pl-5 space-y-1",children:[(0,Xa.jsx)("li",{children:"Date/Time of each transaction"}),(0,Xa.jsx)("li",{children:"Invoice/Transaction ID"}),(0,Xa.jsx)("li",{children:"Item name and SKU"}),(0,Xa.jsx)("li",{children:"Quantity sold"})]}),(0,Xa.jsxs)("ul",{className:"list-disc pl-5 space-y-1",children:[(0,Xa.jsx)("li",{children:"Unit price and unit cost"}),(0,Xa.jsx)("li",{children:"Line profit calculations"}),(0,Xa.jsx)("li",{children:"KPIs: Gross Sales, COGS, Profit"}),(0,Xa.jsx)("li",{children:"Historical cost snapshots"})]})]}),(0,Xa.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,Xa.jsx)("button",{onClick:()=>p("excel"),disabled:f("excel"),className:"btn-primary flex items-center",children:f("excel")?(0,Xa.jsxs)(Xa.Fragment,{children:[(0,Xa.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Generating Excel..."]}):(0,Xa.jsxs)(Xa.Fragment,{children:[(0,Xa.jsx)(nu,{className:"h-4 w-4 mr-2"}),"Export to Excel"]})}),(0,Xa.jsx)("button",{onClick:()=>p("csv"),disabled:f("csv"),className:"btn-secondary flex items-center",children:f("csv")?(0,Xa.jsxs)(Xa.Fragment,{children:[(0,Xa.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-600 mr-2"}),"Generating CSV..."]}):(0,Xa.jsxs)(Xa.Fragment,{children:[(0,Xa.jsx)(nu,{className:"h-4 w-4 mr-2"}),"Export to CSV"]})}),(0,Xa.jsx)("button",{onClick:()=>p("pdf"),disabled:f("pdf"),className:"btn-outline flex items-center",children:f("pdf")?(0,Xa.jsxs)(Xa.Fragment,{children:[(0,Xa.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-600 mr-2"}),"Generating PDF..."]}):(0,Xa.jsxs)(Xa.Fragment,{children:[(0,Xa.jsx)(nu,{className:"h-4 w-4 mr-2"}),"Export to PDF"]})})]})]})})]})}),(0,Xa.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-md p-4",children:(0,Xa.jsx)("div",{className:"flex",children:(0,Xa.jsxs)("div",{className:"ml-3",children:[(0,Xa.jsx)("h3",{className:"text-sm font-medium text-green-800",children:"Profit Report Features"}),(0,Xa.jsx)("div",{className:"mt-2 text-sm text-green-700",children:(0,Xa.jsxs)("ul",{className:"list-disc pl-5 space-y-1",children:[(0,Xa.jsxs)("li",{children:[(0,Xa.jsx)("strong",{children:"Historical Accuracy:"})," Uses cost snapshots from time of sale for precise profit calculations"]}),(0,Xa.jsxs)("li",{children:[(0,Xa.jsx)("strong",{children:"Comprehensive Data:"})," Includes line-by-line profit analysis with all transaction details"]}),(0,Xa.jsxs)("li",{children:[(0,Xa.jsx)("strong",{children:"Multiple Formats:"})," Excel (with formulas), CSV (data analysis), PDF (presentation)"]}),(0,Xa.jsxs)("li",{children:[(0,Xa.jsx)("strong",{children:"Business Headers:"})," All exports include your business information and logo"]}),(0,Xa.jsxs)("li",{children:[(0,Xa.jsx)("strong",{children:"KPI Summary:"})," Gross Sales, Cost of Goods Sold, and Net Profit totals"]}),(0,Xa.jsxs)("li",{children:[(0,Xa.jsx)("strong",{children:"Date Filtering:"})," Flexible date range selection with quick presets"]}),(0,Xa.jsxs)("li",{children:[(0,Xa.jsx)("strong",{children:"Admin Only:"})," Secure access restricted to business administrators"]})]})})]})})})]}):(0,Xa.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,Xa.jsxs)("div",{className:"text-center",children:[(0,Xa.jsx)(Vo,{className:"mx-auto h-12 w-12 text-red-500"}),(0,Xa.jsx)("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"Access Denied"}),(0,Xa.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"You don't have permission to view this section. Profit reports are only available to administrators."})]})})},cd=["title","titleId"];function ud(e,t){let{title:n,titleId:a}=e,s=xs(e,cd);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),n?r.createElement("title",{id:a},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"}))}const dd=r.forwardRef(ud),md=["title","titleId"];function pd(e,t){let{title:n,titleId:a}=e,s=xs(e,md);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),n?r.createElement("title",{id:a},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 0 0-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 0 0-16.536-1.84M7.5 14.25 5.106 5.272M6 20.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Zm12.75 0a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"}))}const fd=r.forwardRef(pd),hd=["title","titleId"];function xd(e,t){let{title:n,titleId:a}=e,s=xs(e,hd);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),n?r.createElement("title",{id:a},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h14"}))}const gd=r.forwardRef(xd),vd=["title","titleId"];function yd(e,t){let{title:n,titleId:a}=e,s=xs(e,vd);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),n?r.createElement("title",{id:a},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18.75a60.07 60.07 0 0 1 15.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 0 1 3 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 0 0-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 0 1-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 0 0 3 15h-.75M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm3 0h.008v.008H18V10.5Zm-12 0h.008v.008H6V10.5Z"}))}const bd=r.forwardRef(yd),wd=["title","titleId"];function jd(e,t){let{title:n,titleId:a}=e,s=xs(e,wd);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),n?r.createElement("title",{id:a},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"}))}const Nd=r.forwardRef(jd),kd=()=>{const{business:e,user:t}=as(),{formatAmount:n,currency:a}=ms(),s=X(),[i,l]=(0,r.useState)(new Date),[o,c]=(0,r.useState)(null),[u,d]=(0,r.useState)(Intl.DateTimeFormat().resolvedOptions().timeZone),[m,p]=(0,r.useState)([]),[f,h]=(0,r.useState)([]),[x,g]=(0,r.useState)([]),[v,y]=(0,r.useState)(!0),[b,w]=(0,r.useState)([]),[j,N]=(0,r.useState)(null),[k,S]=(0,r.useState)("sale"),[_,E]=(0,r.useState)("cash"),[C,T]=(0,r.useState)(""),[O,P]=(0,r.useState)(""),[F,L]=(0,r.useState)(""),[R,A]=(0,r.useState)(""),[D,I]=(0,r.useState)(0),[z,M]=(0,r.useState)(!1),[U,B]=(0,r.useState)(!1),[V,H]=(0,r.useState)(""),[q,$]=(0,r.useState)([]),[W,K]=(0,r.useState)(!1),[Z,G]=(0,r.useState)("cash"),[Q,Y]=(0,r.useState)(""),[J,ee]=(0,r.useState)(""),[te,ne]=(0,r.useState)("amount"),[re,ae]=(0,r.useState)(""),[se,ie]=(0,r.useState)(""),[le,oe]=(0,r.useState)(""),[ce,ue]=(0,r.useState)(!1),[de,me]=(0,r.useState)(""),[pe,fe]=(0,r.useState)(null),[he,xe]=(0,r.useState)([]),ge=(0,r.useRef)(null),ve=(0,r.useRef)(null),ye=(0,r.useCallback)(async()=>{try{const e={};F&&(e.category_id=F);const[t,n,r]=await Promise.all([Na(e),Aa(),Ma()]);p(t.data),h(n.data),g(r.data)}catch(e){console.error("Failed to fetch data:",e),zr.error("Failed to load POS data")}finally{y(!1)}},[F]),be=(0,r.useCallback)(async e=>{if(e&&!(e.length<3))try{const t=(await Ea(e.trim())).data;je(t),A(""),ge.current&&(ge.current.value="",ge.current.focus()),zr.success("\u2705 ".concat(t.name," added to cart"),{duration:2e3,position:"top-center"}),ge.current&&(ge.current.style.backgroundColor="#c6f6d5",setTimeout(()=>{ge.current&&(ge.current.style.backgroundColor="",ge.current.focus())},800))}catch(t){console.error("Barcode scan error:",t),zr.error("Item not found",{duration:3e3,position:"top-center"}),A(""),ge.current&&(ge.current.style.backgroundColor="#fed7d7",ge.current.value="",setTimeout(()=>{ge.current&&(ge.current.style.backgroundColor="",ge.current.focus())},1200))}},[]);(0,r.useEffect)(()=>{var t,n;console.log("\ud83c\udfe2 POS Business Context Debug:",{businessExists:!!e,businessName:null===e||void 0===e?void 0:e.name,hasSettings:!(null===e||void 0===e||!e.settings),settingsKeys:null!==e&&void 0!==e&&e.settings?Object.keys(e.settings):[],receiptHeader:null===e||void 0===e||null===(t=e.settings)||void 0===t?void 0:t.receipt_header,receiptFooter:null===e||void 0===e||null===(n=e.settings)||void 0===n?void 0:n.receipt_footer,fullBusiness:e})},[e]),(0,r.useEffect)(()=>{ye();const e=localStorage.getItem("pos-held-orders");e&&xe(JSON.parse(e)),we()},[ye]);const we=async()=>{try{navigator.geolocation?navigator.geolocation.getCurrentPosition(async e=>{const{latitude:t,longitude:n}=e.coords;c({latitude:t,longitude:n});try{const e=await fetch("https://api.timezonedb.com/v2.1/get-zone?key=demo&format=json&by=position&lat=".concat(t,"&lng=").concat(n));if(e.ok){const t=await e.json();t.zoneName&&(d(t.zoneName),zr.success("\ud83d\udccd Location detected: ".concat(t.zoneName),{duration:3e3}))}}catch(r){console.log("Using browser timezone as fallback"),zr("\ud83d\udccd Using browser timezone",{duration:2e3})}},e=>{console.log("Location access denied or failed:",e),zr("\ud83d\udccd Using system timezone (location access denied)",{duration:3e3})},{timeout:1e4,enableHighAccuracy:!0}):zr("\ud83d\udccd Using system timezone (location not supported)",{duration:3e3})}catch(t){console.error("Location initialization error:",t)}const e=setInterval(()=>{l(new Date)},1e3);return()=>clearInterval(e)};(0,r.useEffect)(()=>{var t;null!==e&&void 0!==e&&null!==(t=e.settings)&&void 0!==t&&t.tax_rate&&I(e.settings.tax_rate)},[e]),(0,r.useEffect)(()=>{const e=setInterval(()=>{var e,t,n,r,a,s,i,l;!ge.current||W||document.activeElement===ge.current||null!==(e=document.activeElement)&&void 0!==e&&null!==(t=e.tagName)&&void 0!==t&&t.toLowerCase().includes("input")||null!==(n=document.activeElement)&&void 0!==n&&null!==(r=n.tagName)&&void 0!==r&&r.toLowerCase().includes("select")||null!==(a=document.activeElement)&&void 0!==a&&null!==(s=a.tagName)&&void 0!==s&&s.toLowerCase().includes("textarea")||null!==(i=document.activeElement)&&void 0!==i&&null!==(l=i.tagName)&&void 0!==l&&l.toLowerCase().includes("button")||ge.current.focus()},500);return()=>{clearInterval(e)}},[W]),(0,r.useEffect)(()=>{const e=e=>{if("Enter"===e.key&&ge.current===document.activeElement&&R.trim()){e.preventDefault();const t=R.trim();be(t)}};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[R,be]),(0,r.useEffect)(()=>{const e=e=>{var t,n,r;const a=document.activeElement,s="input"===(null===a||void 0===a||null===(t=a.tagName)||void 0===t?void 0:t.toLowerCase())||"textarea"===(null===a||void 0===a||null===(n=a.tagName)||void 0===n?void 0:n.toLowerCase())||"select"===(null===a||void 0===a||null===(r=a.tagName)||void 0===r?void 0:r.toLowerCase());if(W&&(null===a||void 0===a||!a.closest(".payment-modal")))return;if(U)return;const i=a===ge.current;if(!s||W||i)switch(e.key){case"F6":if(e.preventDefault(),0===b.length||z)return;Me();break;case"F7":if(e.preventDefault(),0===b.length)return;Ce();break;case"F8":if(e.preventDefault(),0===b.length)return;_e();break;case"F9":e.preventDefault(),B(!0)}};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[b.length,z,W,U]),(0,r.useEffect)(()=>{ge.current&&!v&&ge.current.focus()},[v]),(0,r.useEffect)(()=>{v||(()=>{const e=localStorage.getItem("pos-settle-data");if(e)try{const t=JSON.parse(e);if(console.log("Settle mode detected:",t),localStorage.removeItem("pos-settle-data"),t.items&&t.items.length>0){const e=t.items.map(e=>({product_id:e.product_id,product_name:e.product_name,product_sku:e.sku,quantity:e.quantity,unit_price:e.unit_price,total_price:e.total_price,unit_cost_snapshot:e.unit_cost_snapshot||0}));w(e)}t.customer&&N({id:t.customer.id,name:t.customer.name}),fe({isSettling:!0,originalSaleId:t.saleId,remainingBalance:t.remainingBalance,originalSale:t.originalSale}),setTimeout(()=>{Y(t.remainingBalance.toString()),K(!0),zr.success("Settlement mode: Balance due ".concat(n(t.remainingBalance)))},1e3)}catch(t){console.error("Error handling settle mode:",t),zr.error("Error loading settlement data")}})()},[v,n]);const je=e=>{w(t=>t.find(t=>t.product_id===e.id)?t.map(t=>t.product_id===e.id?Ne(Ne({},t),{},{quantity:t.quantity+1,total_price:(t.quantity+1)*t.unit_price}):t):[...t,{product_id:e.id,product_name:e.name,product_sku:e.sku,quantity:1,unit_price:e.price,total_price:e.price,unit_cost_snapshot:e.product_cost||0}])},ke=(e,t)=>{t<=0?Se(e):w(n=>n.map(n=>n.product_id===e?Ne(Ne({},n),{},{quantity:t,total_price:t*n.unit_price}):n))},Se=e=>{w(t=>t.filter(t=>t.product_id!==e))},_e=()=>{w([]),N(null),T(""),P(""),zr.success("Cart cleared")},Ee=()=>{B(!1),H(""),$([])},Ce=()=>{if(0===b.length)return void zr.error("Cart is empty");const e={id:Date.now(),timestamp:new Date,cart:[...b],customer:j,discount:C,notes:O},t=[...he,e];xe(t),localStorage.setItem("pos-held-orders",JSON.stringify(t)),_e(),zr.success("Order held successfully")},Te=()=>{const e=b.reduce((e,t)=>e+t.total_price,0),t=parseFloat(C)||0,n=e-t,r=n*(D/100),a=n+r;return{subtotal:e.toFixed(2),discount:t.toFixed(2),taxAmount:r.toFixed(2),total:a.toFixed(2)}},Oe=()=>{const e=b.reduce((e,t)=>e+t.total_price,0);let t=0;const n=parseFloat(J)||0;n>0&&(t="percentage"===te?Math.min(e*(n/100),e):Math.min(n,e));const r=e-t,a=r*(D/100),s=r+a;return{subtotal:e.toFixed(2),discount:t.toFixed(2),taxAmount:a.toFixed(2),total:s.toFixed(2),change:"cash"===Z&&Q?Math.max(0,parseFloat(Q)-parseFloat(s)).toFixed(2):"0.00"}},Pe=()=>{const e=Oe(),t=parseFloat(le)||0,r=parseFloat(e.total),a=ve.current,s=a?a.value:"",i=document.querySelector('input[placeholder="0.00"]'),l=i?i.value:"";console.log("Payment validation - comprehensive debug:",{modalReceivedAmount:Q,inputRefValue:s,fallbackInputValue:l,modalPaymentMethod:Z,modalDownpayment:le,downpaymentAmount:t,totals:e});let o=null,c=!1;if(t>0)t>=r?(o=t,c=!1):(o=t,c=!0);else if("cash"===Z){const e=Q||s||l||"0",t=parseFloat(e)||0;console.log("Payment validation final:",{receivedStr:e,received:t,total:r,comparison:t>=r,sources:{state:Q,ref:s,fallback:l}});if(t<r-.01)return zr.error("Insufficient payment. Required: ".concat(n(r),", Received: ").concat(n(t))),void console.log("Payment failed - insufficient amount");o=t,me(t)}else o=r;E(Z),T(parseFloat(e.discount)),P(re),localStorage.setItem("pos-discount-type",te),K(!1),console.log("Payment confirmed successfully",{isDownpaymentSale:c,receivedAmountForTransaction:o}),Fe(o,c,t)},Fe=async function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(console.log("handleTransaction called with:",{cartLength:b.length,transactionMode:k,paymentMethod:_,receivedAmount:de,validatedReceivedAmount:r,modalReceivedAmount:Q,modalPaymentMethod:Z,isDownpaymentSale:a,downpaymentAmount:s}),0===b.length)return zr.error("Cart is empty"),void console.log("Transaction failed: Cart is empty");const i=Te();console.log("Transaction totals calculated:",i);const l=r||parseFloat(de)||0;if("sale"!==k||"cash"!==_||a)a&&console.log("Skipping secondary payment validation for downpayment sale",{isDownpaymentSale:a,finalReceivedAmount:l,downpaymentAmount:s});else{const e=parseFloat(i.subtotal),t=parseFloat(i.discount)||0,s=parseFloat(i.taxAmount),o=e-t+s;console.log("Secondary payment validation:",{subtotal:e,discount:t,taxAmount:s,requiredAmount:o,finalReceivedAmount:l,originalReceivedAmount:de,validatedReceivedAmount:r,isDownpaymentSale:a});const c=Math.round(100*o)/100,u=Math.round(100*l)/100;if(u<c)return console.log("Transaction failed: Secondary payment validation failed"),void zr.error("Insufficient payment. Required: ".concat(n(c),", Received: ").concat(n(u)))}console.log("Starting transaction processing..."),M(!0);try{const r={customer_id:(null===j||void 0===j?void 0:j.id)||null,cashier_id:(null===t||void 0===t?void 0:t.id)||null,cashier_name:(null===t||void 0===t?void 0:t.email)||(null===t||void 0===t?void 0:t.name)||"Unknown Cashier",items:b.map(e=>Ne(Ne({},e),{},{sku:e.product_sku||e.sku,unit_price_snapshot:e.unit_price,unit_cost_snapshot:e.unit_cost_snapshot||0})),subtotal:parseFloat(i.subtotal),tax_amount:parseFloat(i.taxAmount),discount_amount:parseFloat(i.discount)||0,total_amount:parseFloat(i.total),payment_method:_,payment_ref_code:"ewallet"===_&&null!==se&&void 0!==se&&se.trim()?se.trim():null,received_amount:l,change_amount:a||"cash"!==_?0:Math.max(0,l-parseFloat(i.total)),notes:O.trim()||null,created_at:(new Date).toISOString(),status:a?"ongoing":"completed",downpayment_amount:a?s:null,balance_due:a?parseFloat(i.total)-s:null,finalized_at:a?null:(new Date).toISOString()};let S;if("sale"===k){var o,c,u,d,m,p,f,h,x,g,v,y,w;if(S=await qa(r),zr.success(a?"Downpayment recorded! Sale #".concat(S.data.sale_number," - Balance Due: ").concat(n(r.balance_due)):"Sale completed! Sale #".concat(S.data.sale_number)),console.log("Autoprint debug - Business settings structure:",{business:e,settings:null===e||void 0===e?void 0:e.settings,printer_settings:null===e||void 0===e||null===(o=e.settings)||void 0===o?void 0:o.printer_settings,auto_print_path1:null===e||void 0===e||null===(c=e.settings)||void 0===c||null===(u=c.printer_settings)||void 0===u?void 0:u.auto_print,auto_print_path2:null===e||void 0===e||null===(d=e.settings)||void 0===d?void 0:d.auto_print,condition1:null===e||void 0===e||null===(m=e.settings)||void 0===m||null===(p=m.printer_settings)||void 0===p?void 0:p.auto_print,condition2:null===e||void 0===e||null===(f=e.settings)||void 0===f?void 0:f.auto_print,finalCondition:(null===e||void 0===e||null===(h=e.settings)||void 0===h||null===(x=h.printer_settings)||void 0===x?void 0:x.auto_print)||(null===e||void 0===e||null===(g=e.settings)||void 0===g?void 0:g.auto_print)}),null!==e&&void 0!==e&&null!==(v=e.settings)&&void 0!==v&&null!==(y=v.printer_settings)&&void 0!==y&&y.auto_print||null!==e&&void 0!==e&&null!==(w=e.settings)&&void 0!==w&&w.auto_print){console.log("Auto-print enabled, attempting to print...",null===e||void 0===e?void 0:e.settings);Ie(S.data,"sale");await Le(S.data,"sale")}else{var N;console.log("Auto-print disabled or setting not found",{businessSettings:null===e||void 0===e?void 0:e.settings,printerSettings:null===e||void 0===e||null===(N=e.settings)||void 0===N?void 0:N.printer_settings,reason:"Condition evaluated to false"})}ce&&(console.log("Printing order slip for transaction:",S.data),await Re(S.data,a))}else S=await Ka(r),zr.success("Invoice created! Invoice #".concat(S.data.invoice_number));_e(),me(""),E("cash"),ye()}catch(T){var S,C;let e;if(console.error("Transaction error:",T),null!==(S=T.response)&&void 0!==S&&null!==(C=S.data)&&void 0!==C&&C.detail){const t=T.response.data.detail;e="string"===typeof t?t:Array.isArray(t)?t.map(e=>{var t;return"".concat(null===(t=e.loc)||void 0===t?void 0:t.join("."),": ").concat(e.msg)}).join(", "):"object"===typeof t?JSON.stringify(t):"Validation error occurred"}else e="Failed to ".concat("sale"===k?"complete sale":"create invoice");zr.error(e)}finally{M(!1)}},Le=async(t,n)=>{try{var r;const m=(null===e||void 0===e||null===(r=e.settings)||void 0===r?void 0:r.printer_type)||"local",p=Ie(t,n);if(console.log("Auto-print attempt:",{printerType:m,attempt:(new Date).toISOString(),transactionId:t.sale_number||t.invoice_number}),"bluetooth"===m){var a;if(!Lu.getStatus().isConnected)return console.log("Auto-print skipped - Bluetooth printer not connected"),void zr("Auto-print skipped - Bluetooth printer not connected");await Lu.printReceipt(p,null===e||void 0===e||null===(a=e.settings)||void 0===a?void 0:a.printer_settings),console.log("Auto-print success via Bluetooth"),zr.success("Receipt auto-printed via Bluetooth")}else if("local"===m)try{var s,i,l;console.log("Configuring local printer for auto-print..."),await Au.configurePrinter({id:"system-default",name:(null===e||void 0===e||null===(s=e.settings)||void 0===s?void 0:s.selected_printer)||"Default System Printer",type:"local",settings:null===e||void 0===e||null===(i=e.settings)||void 0===i?void 0:i.printer_settings}),await Au.printReceipt(p,null===e||void 0===e||null===(l=e.settings)||void 0===l?void 0:l.printer_settings),console.log("Auto-print success via enhanced printer service"),zr.success("Receipt auto-printed to system printer")}catch(d){console.log("Direct printing failed, using browser fallback:",d),await Ae(p),console.log("Auto-print fallback completed"),zr.success("Receipt auto-printed (browser fallback)")}else{var o,c,u;console.log("Configuring network printer for auto-print..."),await Au.configurePrinter({id:"network-printer",name:(null===e||void 0===e||null===(o=e.settings)||void 0===o?void 0:o.selected_printer)||"Network Printer",type:m,settings:null===e||void 0===e||null===(c=e.settings)||void 0===c?void 0:c.printer_settings}),await Au.printReceipt(p,null===e||void 0===e||null===(u=e.settings)||void 0===u?void 0:u.printer_settings),console.log("Auto-print success via network printer"),zr.success("Receipt auto-printed to network printer")}}catch(m){console.error("Auto-print failed:",m);try{console.log("Attempting emergency fallback print...");const e=Ie(t,n);await Ae(e),console.log("Emergency fallback print completed"),zr("Receipt printed (emergency fallback)")}catch(p){console.error("All auto-print methods failed:",p),console.log("Auto-print failed silently, transaction still completed successfully")}}},Re=async(t,n)=>{try{var r;console.log("Order slip print requested:",{transactionData:t,isDownpaymentSale:n});const m=Ne(Ne({},Ie(t,"sale")),{},{isOrderSlip:!0,isDownpayment:n}),p=(null===e||void 0===e||null===(r=e.settings)||void 0===r?void 0:r.printer_type)||"local";if("bluetooth"===p){var a;if(!Lu.getStatus().isConnected)return console.log("Order slip print skipped - Bluetooth printer not connected"),void zr("Order slip print skipped - Bluetooth printer not connected");await Lu.printReceipt(m,null===e||void 0===e||null===(a=e.settings)||void 0===a?void 0:a.printer_settings),console.log("Order slip printed via Bluetooth"),zr.success("Order slip printed via Bluetooth")}else if("local"===p)try{var s,i,l;await Au.configurePrinter({id:"system-default",name:(null===e||void 0===e||null===(s=e.settings)||void 0===s?void 0:s.selected_printer)||"Default System Printer",type:"local",settings:null===e||void 0===e||null===(i=e.settings)||void 0===i?void 0:i.printer_settings}),await Au.printReceipt(m,null===e||void 0===e||null===(l=e.settings)||void 0===l?void 0:l.printer_settings),console.log("Order slip printed via enhanced printer service"),zr.success("Order slip printed to system printer")}catch(d){console.log("Direct order slip printing failed, using browser fallback:",d),await Ae(m),console.log("Order slip print fallback completed"),zr.success("Order slip printed (browser fallback)")}else{var o,c,u;await Au.configurePrinter({id:"network-printer",name:(null===e||void 0===e||null===(o=e.settings)||void 0===o?void 0:o.selected_printer)||"Network Printer",type:p,settings:null===e||void 0===e||null===(c=e.settings)||void 0===c?void 0:c.printer_settings}),await Au.printReceipt(m,null===e||void 0===e||null===(u=e.settings)||void 0===u?void 0:u.printer_settings),console.log("Order slip printed via network printer"),zr.success("Order slip printed to network printer")}}catch(m){console.error("Order slip print failed:",m);try{console.log("Attempting emergency fallback for order slip...");const e=Ne(Ne({},Ie(t,"sale")),{},{isOrderSlip:!0,isDownpayment:n});await Ae(e),console.log("Emergency order slip fallback completed"),zr("Order slip printed (emergency fallback)")}catch(p){console.error("All order slip print methods failed:",p),zr.error("Failed to print order slip")}}},Ae=async e=>new Promise((t,n)=>{try{const r=De(e);document.querySelectorAll('iframe[data-print-frame="true"]').forEach(e=>{try{document.body.removeChild(e)}catch(Jn){console.log("Frame already removed:",Jn)}});const a=document.createElement("iframe");a.setAttribute("data-print-frame","true"),a.style.position="absolute",a.style.left="-9999px",a.style.top="-9999px",a.style.width="1px",a.style.height="1px",a.style.border="none",document.body.appendChild(a);const s=a.contentDocument||a.contentWindow.document;s.open(),s.write(r),s.close();const i=()=>{setTimeout(()=>{try{a.contentWindow&&"function"===typeof a.contentWindow.print?(a.contentWindow.print(),console.log("Browser print initiated successfully"),setTimeout(()=>{try{a&&a.parentNode&&document.body.removeChild(a)}catch(e){console.log("Print frame cleanup error (non-critical):",e)}},3e3),t()):n(new Error("Print function not available"))}catch(e){console.error("Print execution error:",e);try{a&&a.parentNode&&document.body.removeChild(a)}catch(r){console.log("Error cleanup failed:",r)}n(e)}},500)};a.contentDocument&&"complete"===a.contentDocument.readyState?i():(a.onload=i,setTimeout(i,2e3))}catch(r){console.error("Browser print fallback setup failed:",r),n(r)}}),De=t=>{var r,a;const s=(null===e||void 0===e?void 0:e.name)||"Business Name",i=(null===e||void 0===e?void 0:e.address)||"",l=(null===e||void 0===e?void 0:e.contact_email)||"",o=(null===e||void 0===e?void 0:e.phone)||"",c=(null===e||void 0===e?void 0:e.logo_url)||"",u=(null===e||void 0===e||null===(r=e.settings)||void 0===r?void 0:r.receipt_header)||"",d=(null===e||void 0===e||null===(a=e.settings)||void 0===a?void 0:a.receipt_footer)||"";return console.log("\ud83e\uddfe Receipt Generation Debug:",{businessExists:!!e,settingsExists:!(null===e||void 0===e||!e.settings),receiptHeader:u,receiptFooter:d,fullSettings:null===e||void 0===e?void 0:e.settings}),"\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <meta charset=\"utf-8\">\n          <title>Receipt</title>\n          <style>\n            @media print {\n              @page { margin: 0; size: 80mm auto; }\n              body { margin: 0; }\n            }\n            body {\n              font-family: 'Courier New', 'Consolas', 'Monaco', monospace;\n              font-size: 10px;\n              font-stretch: condensed;\n              line-height: 1.1;\n              margin: 0;\n              padding: 15px;\n              width: 280px;\n              color: #000;\n            }\n            .center { text-align: center; }\n            .bold { font-weight: bold; }\n            .line { border-bottom: 1px dashed #000; margin: 4px 0; }\n            .flex { display: flex; justify-content: space-between; }\n            .logo { \n              max-width: 120px; \n              max-height: 80px; \n              margin: 0 auto 8px auto; \n              display: block;\n            }\n            .header { \n              border-bottom: 1px solid #000; \n              padding-bottom: 8px; \n              margin-bottom: 8px; \n            }\n            .total { \n              border-top: 1px solid #000; \n              padding-top: 4px; \n              margin-top: 4px; \n            }\n            .receipt-header {\n              font-size: 9px;\n              margin: 6px 0;\n              white-space: pre-line;\n            }\n            .receipt-footer {\n              font-size: 9px;\n              margin: 6px 0;\n              white-space: pre-line;\n            }\n            .business-info {\n              font-size: 9px;\n              margin: 2px 0;\n            }\n          </style>\n        </head>\n        <body>\n          <div class=\"header center\">\n            ".concat(c?'<img src="'.concat(c,'" alt="Logo" class="logo" />'):"",'\n            <div class="bold" style="font-size: 14px;">').concat(s,"</div>\n            ").concat(i?'<div class="business-info">'.concat(i,"</div>"):"","\n            ").concat(o?'<div class="business-info">Tel: '.concat(o,"</div>"):"","\n            ").concat(l?'<div class="business-info">Email: '.concat(l,"</div>"):"",'\n            <div class="business-info">TIN: ').concat((null===e||void 0===e?void 0:e.tin)||"N/A","</div>\n            ").concat(u?'<div class="receipt-header">'.concat(u,"</div>"):"",'\n          </div>\n\n          <div>\n            <div class="bold">').concat(t.isOrderSlip?"ORDER SLIP":t.transaction_type,": ").concat(t.transaction_number,"</div>\n            ").concat(t.isOrderSlip&&t.isDownpayment?'<div class="bold" style="font-size: 10px; color: #d97706;">DOWNPAYMENT ORDER</div>':"",'\n            <div style="font-size: 9px;">Date: ').concat(new Date(t.timestamp).toLocaleString(),'</div>\n            <div style="font-size: 9px;">Cashier: ').concat(t.cashier_name||"System","</div>\n            ").concat(t.customer?'<div style="font-size: 9px;">Customer: '.concat(t.customer.name,"</div>"):'<div style="font-size: 9px;">Customer: Walk-in</div>','\n          </div>\n\n          <div class="line"></div>\n\n          ').concat(t.items.map(e=>'\n            <div style="font-size: 9px; margin: 2px 0;">\n              <div class="bold">'.concat(e.product_name,'</div>\n              <div class="flex">\n                <span>').concat(e.quantity," x ").concat(n(e.unit_price),"</span>\n                <span>").concat(n(e.total_price),"</span>\n              </div>\n            </div>\n          ")).join(""),'\n\n          <div class="line"></div>\n\n          <div class="flex" style="font-size: 9px;">\n            <span>Subtotal:</span>\n            <span>').concat(n(t.subtotal),"</span>\n          </div>\n          ").concat(t.tax_amount>0?'\n            <div class="flex" style="font-size: 9px;">\n              <span>Tax:</span>\n              <span>'.concat(n(t.tax_amount),"</span>\n            </div>\n          "):"","\n          ").concat(t.discount_amount>0?'\n            <div class="flex" style="font-size: 9px;">\n              <span>Discount:</span>\n              <span>-'.concat(n(t.discount_amount),"</span>\n            </div>\n          "):"",'\n          \n          <div class="flex total bold" style="font-size: 11px;">\n            <span>TOTAL:</span>\n            <span>').concat(n(t.total_amount),"</span>\n          </div>\n\n          ").concat("cash"===t.payment_method?'\n            <div class="flex" style="font-size: 9px;">\n              <span>Cash Received:</span>\n              <span>'.concat(n(t.received_amount),'</span>\n            </div>\n            <div class="flex" style="font-size: 9px;">\n              <span>Change:</span>\n              <span>').concat(n(t.change_amount),"</span>\n            </div>\n          "):'\n            <div class="flex" style="font-size: 9px;">\n              <span>Payment Method:</span>\n              <span>'.concat(t.payment_method,"</span>\n            </div>\n          "),"\n\n          ").concat(t.notes?'\n            <div class="line"></div>\n            <div style="font-size: 9px;">Notes: '.concat(t.notes,"</div>\n          "):"",'\n\n          <div class="line"></div>\n          <div class="center" style="font-size: 9px;">\n            ').concat(t.isOrderSlip?t.isDownpayment?"Order Slip - Downpayment Received":"Order Slip - Kitchen Copy":"Thank you for your business!","\n          </div>\n          ").concat(d?'<div class="center receipt-footer">'.concat(d,"</div>"):"","\n        </body>\n      </html>\n    ")},Ie=function(n){var r,a;let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sale";return console.log("\ud83e\uddfe Receipt Data Generation Debug:",{businessExists:!!e,hasSettings:!(null===e||void 0===e||!e.settings),receiptHeader:null===e||void 0===e||null===(r=e.settings)||void 0===r?void 0:r.receipt_header,receiptFooter:null===e||void 0===e||null===(a=e.settings)||void 0===a?void 0:a.receipt_footer}),{business:e,transaction_number:n.sale_number||n.invoice_number,transaction_type:s.toUpperCase(),timestamp:new Date(n.created_at||new Date),customer:j,cashier_name:n.cashier_name||(null===t||void 0===t?void 0:t.email)||(null===t||void 0===t?void 0:t.name)||"System",items:n.items||b,subtotal:n.subtotal,tax_amount:n.tax_amount,discount_amount:n.discount_amount,total_amount:n.total_amount,payment_method:n.payment_method,received_amount:n.received_amount,change_amount:n.change_amount,notes:n.notes||O}},ze=m.filter(e=>{const t=!R||e.name.toLowerCase().includes(R.toLowerCase())||e.sku.toLowerCase().includes(R.toLowerCase())||e.barcode&&e.barcode.includes(R),n=!F||e.category_id===F;return t&&n}),Me=()=>{0!==b.length?(G("cash"),Y(""),ee(C),ne(localStorage.getItem("pos-discount-type")||"amount"),ae(O),ie(""),oe(""),ue(!1),K(!0)):zr.error("Cart is empty")};return v?(0,Xa.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,Xa.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):(0,Xa.jsxs)("div",{className:"h-screen flex bg-gray-50",children:[(0,Xa.jsxs)("div",{className:"w-2/3 bg-white border-r flex flex-col",children:[(0,Xa.jsxs)("div",{className:"p-3 border-b bg-white flex-shrink-0",children:[(0,Xa.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Xa.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Products"}),(0,Xa.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Xa.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600 bg-gray-50 px-3 py-1 rounded-lg",children:[(0,Xa.jsx)(dd,{className:"h-4 w-4"}),(0,Xa.jsxs)("span",{children:[i.toLocaleDateString("en-US",{timeZone:u,weekday:"short",month:"short",day:"numeric"})," \u2022 ",i.toLocaleTimeString("en-US",{timeZone:u,hour:"numeric",minute:"2-digit",second:"2-digit"})]})]}),(0,Xa.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Xa.jsxs)("button",{onClick:()=>s("/pos/sales-history"),className:"flex items-center space-x-1 px-3 py-1 bg-blue-100 hover:bg-blue-200 text-blue-700 rounded-lg text-sm transition-colors",title:"View Sales History",children:[(0,Xa.jsx)(dc,{className:"h-4 w-4"}),(0,Xa.jsx)("span",{children:"Sales History"})]}),(0,Xa.jsxs)("button",{onClick:()=>B(!0),className:"flex items-center space-x-1 px-3 py-1 bg-green-100 hover:bg-green-200 text-green-700 rounded-lg text-sm transition-colors",title:"Price Inquiry (F9)",children:[(0,Xa.jsx)(Ic,{className:"h-4 w-4"}),(0,Xa.jsx)("span",{children:"Price Inquiry"})]})]})]})]}),(0,Xa.jsxs)("div",{className:"flex space-x-2",children:[(0,Xa.jsxs)("div",{className:"flex-1 relative",children:[(0,Xa.jsx)(Ic,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,Xa.jsx)("input",{ref:ge,type:"text",placeholder:"Search products or scan barcode...",value:R,onChange:e=>A(e.target.value),className:"input pl-10 text-sm",autoFocus:!0})]}),(0,Xa.jsxs)("select",{value:F,onChange:e=>L(e.target.value),className:"input text-sm min-w-0",children:[(0,Xa.jsx)("option",{value:"",children:"All Categories"}),f.map(e=>(0,Xa.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,Xa.jsx)("div",{className:"p-3 border-b bg-gray-50 flex-shrink-0",children:(0,Xa.jsxs)("div",{className:"flex space-x-1 overflow-x-auto",children:[(0,Xa.jsx)("button",{onClick:()=>L(""),className:"category-tab text-xs whitespace-nowrap ".concat(F?"":"active"),children:"All"}),f.map(e=>(0,Xa.jsx)("button",{onClick:()=>L(e.id),className:"category-tab text-xs whitespace-nowrap ".concat(F===e.id?"active":""),children:e.name},e.id))]})}),(0,Xa.jsxs)("div",{className:"flex-1 overflow-y-auto p-3",children:[(0,Xa.jsx)("div",{className:"grid grid-cols-2 gap-2",children:ze.map(e=>(0,Xa.jsx)("div",{onClick:()=>je(e),className:"product-card cursor-pointer",children:(0,Xa.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Xa.jsx)(Go,{className:"h-6 w-6 text-blue-500 flex-shrink-0"}),(0,Xa.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Xa.jsx)("h4",{className:"font-medium text-sm text-gray-900 truncate",children:e.name}),(0,Xa.jsxs)("p",{className:"text-xs text-gray-500 truncate",children:["SKU: ",e.sku]}),(0,Xa.jsxs)("div",{className:"flex items-center justify-between mt-1",children:[(0,Xa.jsx)("span",{className:"text-sm font-semibold text-blue-600",children:n(e.price)}),(0,Xa.jsxs)("span",{className:"text-xs text-gray-500",children:["Stock: ",e.quantity]})]})]})]})},e.id))}),0===ze.length&&(0,Xa.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,Xa.jsx)(Go,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),(0,Xa.jsx)("p",{children:"No products found"})]})]})]}),(0,Xa.jsxs)("div",{className:"w-1/3 bg-white flex flex-col",children:[(0,Xa.jsx)("div",{className:"p-3 border-b bg-white flex-shrink-0",children:(0,Xa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Xa.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,Xa.jsx)(fd,{className:"h-5 w-5 mr-2"}),"Cart (",b.length,")"]}),(0,Xa.jsxs)("div",{className:"flex space-x-1",children:[(0,Xa.jsx)("button",{onClick:()=>S("sale"),className:"text-xs px-2 py-1 rounded ".concat("sale"===k?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"Sale"}),(0,Xa.jsx)("button",{onClick:()=>S("invoice"),className:"text-xs px-2 py-1 rounded ".concat("invoice"===k?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"Invoice"})]})]})}),(0,Xa.jsx)("div",{className:"flex-1 overflow-y-auto min-h-0",children:0===b.length?(0,Xa.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:(0,Xa.jsxs)("div",{className:"text-center",children:[(0,Xa.jsx)(fd,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),(0,Xa.jsx)("p",{children:"Cart is empty"}),(0,Xa.jsx)("p",{className:"text-xs",children:"Add products to get started"})]})}):(0,Xa.jsx)("div",{className:"p-3 space-y-2",children:b.map(e=>(0,Xa.jsxs)("div",{className:"cart-item",children:[(0,Xa.jsxs)("div",{className:"flex items-start justify-between",children:[(0,Xa.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Xa.jsx)("h4",{className:"font-medium text-sm text-gray-900 truncate",children:e.product_name}),(0,Xa.jsxs)("p",{className:"text-xs text-gray-500",children:[n(e.unit_price)," each"]})]}),(0,Xa.jsx)("button",{onClick:()=>Se(e.product_id),className:"text-red-500 hover:text-red-700 ml-2",children:(0,Xa.jsx)(Nu,{className:"h-4 w-4"})})]}),(0,Xa.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,Xa.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Xa.jsx)("button",{onClick:()=>ke(e.product_id,e.quantity-1),className:"w-6 h-6 rounded-full bg-gray-200 flex items-center justify-center hover:bg-gray-300",children:(0,Xa.jsx)(gd,{className:"h-2 w-2"})}),(0,Xa.jsx)("span",{className:"text-sm font-medium w-8 text-center",children:e.quantity}),(0,Xa.jsx)("button",{onClick:()=>ke(e.product_id,e.quantity+1),className:"w-6 h-6 rounded-full bg-gray-200 flex items-center justify-center hover:bg-gray-300",children:(0,Xa.jsx)(jc,{className:"h-2 w-2"})})]}),(0,Xa.jsx)("span",{className:"text-sm font-semibold text-blue-600",children:n(e.total_price)})]})]},e.product_id))})}),(0,Xa.jsxs)("div",{className:"border-t bg-white flex-shrink-0",style:{overflow:"visible"},children:[(0,Xa.jsx)("div",{className:"p-3 border-b",style:{overflow:"visible"},children:(0,Xa.jsxs)("select",{value:(null===j||void 0===j?void 0:j.id)||"",onChange:e=>{const t=x.find(t=>t.id===e.target.value);N(t||null)},className:"input text-sm w-full",children:[(0,Xa.jsx)("option",{value:"",children:"Walk-in Customer"}),x.map(e=>(0,Xa.jsx)("option",{value:e.id,children:e.name},e.id))]})}),(0,Xa.jsx)("div",{className:"p-3 border-b",style:{overflow:"visible"},children:(0,Xa.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,Xa.jsxs)("div",{className:"flex justify-between",children:[(0,Xa.jsx)("span",{children:"Subtotal:"}),(0,Xa.jsx)("span",{children:n(Te().subtotal)})]}),parseFloat(Te().discount)>0&&(0,Xa.jsxs)("div",{className:"flex justify-between text-green-600",children:[(0,Xa.jsx)("span",{children:"Discount:"}),(0,Xa.jsxs)("span",{children:["-",n(Te().discount)]})]}),(0,Xa.jsxs)("div",{className:"flex justify-between",children:[(0,Xa.jsxs)("span",{children:["Tax (",(100*D).toFixed(1),"%):"]}),(0,Xa.jsx)("span",{children:n(Te().taxAmount)})]}),(0,Xa.jsxs)("div",{className:"flex justify-between font-semibold text-lg border-t pt-2",children:[(0,Xa.jsx)("span",{children:"Total:"}),(0,Xa.jsx)("span",{className:"text-blue-600",children:n(Te().total)})]})]})}),(0,Xa.jsxs)("div",{className:"p-3 space-y-2",style:{overflow:"visible"},children:[(0,Xa.jsxs)("button",{onClick:Me,disabled:0===b.length||z,className:"btn-primary w-full flex items-center justify-center",children:[(0,Xa.jsx)(bd,{className:"h-4 w-4 mr-2"}),z?"Processing...":"Pay ".concat(n(Te().total))]}),(0,Xa.jsxs)("div",{className:"flex space-x-2",children:[(0,Xa.jsxs)("button",{onClick:Ce,disabled:0===b.length,className:"btn-secondary flex-1 flex items-center justify-center text-sm",children:[(0,Xa.jsx)(ou,{className:"h-4 w-4 mr-1"}),"Hold"]}),(0,Xa.jsxs)("button",{onClick:_e,disabled:0===b.length,className:"btn-secondary flex-1 flex items-center justify-center text-sm",children:[(0,Xa.jsx)(Nu,{className:"h-4 w-4 mr-1"}),"Clear"]})]}),(0,Xa.jsx)("div",{className:"text-xs text-gray-500 mt-2 text-center",children:(0,Xa.jsxs)("div",{className:"grid grid-cols-2 gap-1",children:[(0,Xa.jsx)("span",{children:"F6 Pay"}),(0,Xa.jsx)("span",{children:"F7 Hold"}),(0,Xa.jsx)("span",{children:"F8 Clear"}),(0,Xa.jsx)("span",{children:"F9 Price Inquiry"})]})})]}),he.length>0&&(0,Xa.jsxs)("div",{className:"p-3 border-t",children:[(0,Xa.jsxs)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:["Held Orders (",he.length,")"]}),(0,Xa.jsx)("div",{className:"space-y-1 max-h-20 overflow-y-auto",children:he.map(e=>{var t;return(0,Xa.jsxs)("button",{onClick:()=>(e=>{w(e.cart),N(e.customer),T(e.discount||""),P(e.notes||"");const t=he.filter(t=>t.id!==e.id);xe(t),localStorage.setItem("pos-held-orders",JSON.stringify(t)),zr.success("Order resumed")})(e),className:"w-full text-left p-2 text-xs bg-yellow-50 border border-yellow-200 rounded hover:bg-yellow-100",children:[(0,Xa.jsxs)("div",{className:"flex justify-between",children:[(0,Xa.jsxs)("span",{children:["Order #",e.id]}),(0,Xa.jsx)("span",{children:new Date(e.timestamp).toLocaleTimeString()})]}),(0,Xa.jsxs)("div",{className:"text-gray-600",children:[e.cart.length," items \u2022 ",(null===(t=e.customer)||void 0===t?void 0:t.name)||"Walk-in"]})]},e.id)})})]})]})]}),U&&(0,Xa.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,Xa.jsxs)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[80vh] flex flex-col",children:[(0,Xa.jsxs)("div",{className:"p-6 border-b",children:[(0,Xa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Xa.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Price Inquiry"}),(0,Xa.jsx)("button",{onClick:Ee,className:"text-gray-400 hover:text-gray-600",children:(0,Xa.jsx)(Sc,{className:"h-6 w-6"})})]}),(0,Xa.jsx)("div",{className:"mt-4",children:(0,Xa.jsxs)("div",{className:"relative",children:[(0,Xa.jsx)(Ic,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,Xa.jsx)("input",{type:"text",placeholder:"Search by product name, SKU, or barcode...",value:V,onChange:e=>{H(e.target.value),(async e=>{if(!e||e.length<2)$([]);else try{const t=(await Na({search:e,status:"active"})).data.map(e=>({id:e.id,name:e.name,sku:e.sku,barcode:e.barcode,price:e.price,cost:e.cost,quantity:e.quantity,status:e.status}));$(t)}catch(t){console.error("Price inquiry search failed:",t),$([])}})(e.target.value)},onKeyDown:e=>{"Escape"===e.key&&Ee()},className:"input pl-10 w-full",autoFocus:!0})]})})]}),(0,Xa.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:0===q.length?(0,Xa.jsx)("div",{className:"text-center text-gray-500 py-8",children:V.length<2?(0,Xa.jsx)("p",{children:"Type at least 2 characters to search..."}):(0,Xa.jsxs)("p",{children:['No products found matching "',V,'"']})}):(0,Xa.jsx)("div",{className:"space-y-3",children:q.map(e=>(0,Xa.jsx)("div",{className:"border rounded-lg p-4 hover:bg-gray-50",children:(0,Xa.jsxs)("div",{className:"flex justify-between items-start",children:[(0,Xa.jsxs)("div",{className:"flex-1",children:[(0,Xa.jsx)("h4",{className:"font-medium text-gray-900",children:e.name}),(0,Xa.jsxs)("div",{className:"text-sm text-gray-500 mt-1",children:[(0,Xa.jsxs)("p",{children:["SKU: ",e.sku]}),e.barcode&&(0,Xa.jsxs)("p",{children:["Barcode: ",e.barcode]})]})]}),(0,Xa.jsxs)("div",{className:"text-right ml-4",children:[(0,Xa.jsx)("div",{className:"text-lg font-semibold text-blue-600",children:n(e.price)}),(0,Xa.jsxs)("div",{className:"text-sm text-gray-500",children:["Stock: ",e.quantity||0]}),e.cost&&(0,Xa.jsxs)("div",{className:"text-xs text-gray-400",children:["Cost: ",n(e.cost)]})]})]})},e.id))})})]})}),W&&(0,Xa.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,Xa.jsx)("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] flex flex-col",children:(0,Xa.jsxs)("div",{className:"p-6 flex-1 overflow-visible",children:[(0,Xa.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Xa.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Payment"}),(0,Xa.jsx)("button",{onClick:()=>K(!1),className:"text-gray-400 hover:text-gray-600",children:(0,Xa.jsx)(Sc,{className:"h-6 w-6"})})]}),(0,Xa.jsxs)("div",{className:"space-y-4",children:[(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Method"}),(0,Xa.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,Xa.jsxs)("button",{onClick:()=>G("cash"),className:"p-2 text-sm border rounded-md ".concat("cash"===Z?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50"),children:[(0,Xa.jsx)(bd,{className:"h-4 w-4 mx-auto mb-1"}),"Cash"]}),(0,Xa.jsxs)("button",{onClick:()=>G("card"),className:"p-2 text-sm border rounded-md ".concat("card"===Z?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50"),children:[(0,Xa.jsx)(Nd,{className:"h-4 w-4 mx-auto mb-1"}),"Card"]}),(0,Xa.jsxs)("button",{onClick:()=>G("ewallet"),className:"p-2 text-sm border rounded-md ".concat("ewallet"===Z?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50"),children:[(0,Xa.jsx)(Nd,{className:"h-4 w-4 mx-auto mb-1"}),"EWallet/Bank"]})]})]}),(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Discount"}),(0,Xa.jsxs)("div",{className:"flex space-x-2",children:[(0,Xa.jsx)("input",{type:"number",min:"0",step:"0.01",value:J,onChange:e=>ee(e.target.value),className:"input flex-1 text-sm",placeholder:"0.00"}),(0,Xa.jsxs)("select",{value:te,onChange:e=>ne(e.target.value),className:"input text-sm",children:[(0,Xa.jsx)("option",{value:"amount",children:"Amount"}),(0,Xa.jsx)("option",{value:"percentage",children:"%"})]})]})]}),(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Downpayment (Optional)"}),(0,Xa.jsx)("input",{type:"number",min:"0",step:"0.01",value:le,onChange:e=>oe(e.target.value),className:"input w-full text-sm",placeholder:"0.00 - Leave empty for full payment",onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),Pe())}}),le&&parseFloat(le)>0&&(0,Xa.jsxs)("p",{className:"text-xs text-amber-600 mt-1",children:["Balance Due: ",n(Oe().total-parseFloat(le))]})]}),"cash"===Z&&(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount Received"}),(0,Xa.jsx)("input",{ref:ve,type:"number",min:"0",step:"0.01",value:Q,onChange:e=>{const t=e.target.value;console.log("Amount input changed:",t,"Previous:",Q),Y(t),setTimeout(()=>{console.log("State after onChange:",Q,"Input value:",e.target.value)},0)},onInput:e=>{console.log("onInput triggered:",e.target.value),Y(e.target.value)},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),Pe())},className:"input w-full text-sm",placeholder:"0.00",autoFocus:!0}),(0,Xa.jsx)("div",{className:"flex space-x-2 mt-2",children:[10,20,50,100].map(e=>(0,Xa.jsxs)("button",{type:"button",onClick:()=>{console.log("Quick amount clicked:",e);const t=e.toString();Y(t);const n=document.querySelector('input[placeholder="0.00"]');n&&(n.value=t)},className:"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded",children:["\u20b1",e]},e))})]}),"ewallet"===Z&&(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reference Code (Optional)"}),(0,Xa.jsx)("input",{type:"text",value:se,onChange:e=>ie(e.target.value),className:"input w-full text-sm",placeholder:"Enter reference code...",onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),Pe())}})]}),(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (Optional)"}),(0,Xa.jsx)("textarea",{rows:"2",value:re,onChange:e=>ae(e.target.value),className:"input w-full text-sm",placeholder:"Order notes..."})]}),(0,Xa.jsxs)("div",{className:"flex items-center",children:[(0,Xa.jsx)("input",{type:"checkbox",id:"printOrderSlip",checked:ce,onChange:e=>ue(e.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,Xa.jsx)("label",{htmlFor:"printOrderSlip",className:"ml-2 block text-sm text-gray-700",children:"Print Order Slip"})]}),(0,Xa.jsx)("div",{className:"bg-gray-50 p-3 rounded-md",children:(0,Xa.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,Xa.jsxs)("div",{className:"flex justify-between",children:[(0,Xa.jsx)("span",{children:"Subtotal:"}),(0,Xa.jsx)("span",{children:n(Oe().subtotal)})]}),parseFloat(Oe().discount)>0&&(0,Xa.jsxs)("div",{className:"flex justify-between text-green-600",children:[(0,Xa.jsx)("span",{children:"Discount:"}),(0,Xa.jsxs)("span",{children:["-",n(Oe().discount)]})]}),(0,Xa.jsxs)("div",{className:"flex justify-between",children:[(0,Xa.jsx)("span",{children:"Tax:"}),(0,Xa.jsx)("span",{children:n(Oe().taxAmount)})]}),(0,Xa.jsxs)("div",{className:"flex justify-between font-semibold text-base border-t pt-1",children:[(0,Xa.jsx)("span",{children:"Total:"}),(0,Xa.jsx)("span",{className:"text-blue-600",children:n(Oe().total)})]}),"cash"===Z&&Q&&(0,Xa.jsxs)("div",{className:"flex justify-between font-semibold text-green-600",children:[(0,Xa.jsx)("span",{children:"Change:"}),(0,Xa.jsx)("span",{children:n((()=>{if("cash"!==Z||!Q)return 0;const e=Oe(),t=(parseFloat(Q)||0)-parseFloat(e.total);return Math.max(0,t)})())})]})]})})]}),(0,Xa.jsx)("div",{className:"border-t p-4 bg-white rounded-b-lg",children:(0,Xa.jsxs)("div",{className:"flex space-x-3",children:[(0,Xa.jsx)("button",{onClick:()=>K(!1),className:"btn-secondary flex-1",children:"Cancel"}),(0,Xa.jsx)("button",{onClick:Pe,className:"btn-primary flex-1",children:"Confirm Payment"})]})})]})})})]})},Sd=["title","titleId"];function _d(e,t){let{title:n,titleId:a}=e,s=xs(e,Sd);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),n?r.createElement("title",{id:a},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const Ed=r.forwardRef(_d),Cd=()=>{var e,t,n;const{formatAmount:a}=ms(),{business:s,user:i}=as(),l=X(),[o,c]=(0,r.useState)("sales"),[u,d]=(0,r.useState)([]),[m,p]=(0,r.useState)([]),[f,h]=(0,r.useState)([]),[x,g]=(0,r.useState)([]),[v,y]=(0,r.useState)(!0),[b,w]=(0,r.useState)(null),[j,N]=(0,r.useState)(!1),[k,S]=(0,r.useState)(null),[_,E]=(0,r.useState)(null),[C,T]=(0,r.useState)("today"),O=(0,r.useCallback)(async()=>{try{y(!0);const e={date_preset:C};console.log("Sales History simple fetch with params:",e);const t=[Ma()];"sales"===o?(t.push(Ha(Ne(Ne({},e),{},{status:"completed"}))),t.push(Promise.resolve({data:[]})),t.push(Promise.resolve({data:[]}))):"ongoing"===o?(t.push(Promise.resolve({data:[]})),t.push(Promise.resolve({data:[]})),t.push(Ha(Ne(Ne({},e),{},{status:"ongoing"})))):(t.push(Promise.resolve({data:[]})),t.push(Wa(e)),t.push(Promise.resolve({data:[]})));const[n,r,a,s]=await Promise.all(t);g(Array.isArray(n.data)?n.data:[]),d(Array.isArray(r.data)?r.data:[]),h(Array.isArray(a.data)?a.data:[]),p(Array.isArray(s.data)?s.data:[])}catch(e){console.error("Failed to fetch sales history:",e),da.error("Failed to load sales history"),d([]),h([]),p([])}finally{y(!1)}},[o,C]);(0,r.useEffect)(()=>{O()},[O]);const P=e=>{if(!e)return"Walk-in Customer";const t=x.find(t=>t.id===e);return t?t.name:"Unknown Customer"},F=(e,t)=>{const n=((e,t)=>{const n=e.customer_id?x.find(t=>t.id===e.customer_id):null;return{business:s,transaction_number:"sale"===t?e.sale_number:e.invoice_number,transaction_type:t.toUpperCase(),timestamp:new Date(e.created_at),customer:n,items:e.items,subtotal:e.subtotal,tax_amount:e.tax_amount,discount_amount:e.discount_amount,total_amount:e.total_amount,payment_method:e.payment_method,received_amount:e.received_amount,change_amount:e.change_amount,notes:e.notes,reprint:!0,reprint_timestamp:new Date}})(e,t);S(Ne(Ne({},e),{},{type:t})),E(n),N(!0)},L=()=>({business:s,transaction_number:"sale"===k.type?k.sale_number:k.invoice_number,transaction_type:k.type.toUpperCase(),timestamp:new Date(k.created_at),customer:k.customer_id?x.find(e=>e.id===k.customer_id):null,cashier_name:k.cashier_name||(null===i||void 0===i?void 0:i.email)||"Staff",items:k.items,subtotal:k.subtotal,tax_amount:k.tax_amount,discount_amount:k.discount_amount,total_amount:k.total_amount,payment_method:k.payment_method,received_amount:k.received_amount,change_amount:k.change_amount,notes:k.notes,reprint:!0,reprint_timestamp:new Date}),R=async e=>new Promise(t=>{try{const n=A(e),r=document.createElement("iframe");r.style.position="absolute",r.style.left="-9999px",r.style.width="1px",r.style.height="1px",document.body.appendChild(r);const a=r.contentDocument;a.open(),a.write(n),a.close(),setTimeout(()=>{try{r.contentWindow.print(),setTimeout(()=>{r.contentWindow&&r.contentWindow.close()},1e3),setTimeout(()=>{try{document.body.removeChild(r)}catch(Jn){console.log("Iframe cleanup error (non-critical)")}t()},2e3)}catch(e){console.error("Print error:",e),t()}},500)}catch(n){console.error("Browser print setup failed:",n),t()}}),A=e=>{var t,n,r,i,l,o,c;const u=(null===(t=e.business)||void 0===t?void 0:t.logo_url)||"",d=(null===(n=e.business)||void 0===n||null===(r=n.settings)||void 0===r?void 0:r.receipt_header)||(null===s||void 0===s||null===(i=s.settings)||void 0===i?void 0:i.receipt_header)||"",m=(null===(l=e.business)||void 0===l||null===(o=l.settings)||void 0===o?void 0:o.receipt_footer)||(null===s||void 0===s||null===(c=s.settings)||void 0===c?void 0:c.receipt_footer)||"";return"\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <meta charset=\"utf-8\">\n          <title>Receipt Reprint</title>\n          <style>\n            @media print {\n              @page { margin: 0; size: 80mm auto; }\n              body { margin: 0; }\n            }\n            body {\n              font-family: 'Courier New', 'Consolas', monospace;\n              font-size: 10px;\n              line-height: 1.1;\n              margin: 0;\n              padding: 15px;\n              width: 280px;\n            }\n            .center { text-align: center; }\n            .bold { font-weight: bold; }\n            .line { border-bottom: 1px dashed #000; margin: 4px 0; }\n            .flex { display: flex; justify-content: space-between; }\n            .logo { max-width: 120px; max-height: 80px; margin: 0 auto 8px auto; display: block; }\n            .header { border-bottom: 1px solid #000; padding-bottom: 8px; margin-bottom: 8px; }\n            .total { border-top: 1px solid #000; padding-top: 4px; margin-top: 4px; }\n            .reprint-notice { \n              background-color: #fee; \n              border: 1px solid #fcc; \n              padding: 4px; \n              margin: 8px 0; \n              font-size: 9px;\n              font-weight: bold;\n            }\n          </style>\n        </head>\n        <body>\n          <div class=\"header center\">\n            ".concat(u?'<img src="'.concat(u,'" alt="Logo" class="logo" />'):"",'\n            <div class="bold" style="font-size: 14px;">').concat(e.business.name,"</div>\n            ").concat(e.business.address?'<div style="font-size: 9px;">'.concat(e.business.address,"</div>"):"","\n            ").concat(e.business.phone?'<div style="font-size: 9px;">Tel: '.concat(e.business.phone,"</div>"):"","\n            ").concat(e.business.contact_email?'<div style="font-size: 9px;">Email: '.concat(e.business.contact_email,"</div>"):"","\n            ").concat(d?'<div style="font-size: 9px; margin: 6px 0; white-space: pre-line;">'.concat(d,"</div>"):"",'\n          </div>\n\n          <div class="reprint-notice center">\n            *** REPRINT ***<br>\n            ').concat(e.reprint_timestamp.toLocaleString(),'\n          </div>\n\n          <div>\n            <div class="bold">').concat(e.transaction_type,": ").concat(e.transaction_number,'</div>\n            <div style="font-size: 9px;">Date: ').concat(e.timestamp.toLocaleString(),'</div>\n            <div style="font-size: 9px;">Cashier: ').concat(e.cashier_name,"</div>\n            ").concat(e.customer?'<div style="font-size: 9px;">Customer: '.concat(e.customer.name,"</div>"):'<div style="font-size: 9px;">Customer: Walk-in</div>','\n          </div>\n\n          <div class="line"></div>\n\n          ').concat(e.items.map(e=>'\n            <div style="font-size: 9px; margin: 2px 0;">\n              <div class="bold">'.concat(e.product_name,'</div>\n              <div class="flex">\n                <span>').concat(e.quantity," x ").concat(a(e.unit_price),"</span>\n                <span>").concat(a(e.total_price),"</span>\n              </div>\n            </div>\n          ")).join(""),'\n\n          <div class="line"></div>\n\n          <div class="flex" style="font-size: 9px;">\n            <span>Subtotal:</span>\n            <span>').concat(a(e.subtotal),"</span>\n          </div>\n          ").concat(e.tax_amount>0?'\n            <div class="flex" style="font-size: 9px;">\n              <span>Tax:</span>\n              <span>'.concat(a(e.tax_amount),"</span>\n            </div>\n          "):"","\n          ").concat(e.discount_amount>0?'\n            <div class="flex" style="font-size: 9px;">\n              <span>Discount:</span>\n              <span>-'.concat(a(e.discount_amount),"</span>\n            </div>\n          "):"",'\n          \n          <div class="flex total bold" style="font-size: 11px;">\n            <span>TOTAL:</span>\n            <span>').concat(a(e.total_amount),"</span>\n          </div>\n\n          ").concat("cash"===e.payment_method?'\n            <div class="flex" style="font-size: 9px;">\n              <span>Cash Received:</span>\n              <span>'.concat(a(e.received_amount),'</span>\n            </div>\n            <div class="flex" style="font-size: 9px;">\n              <span>Change:</span>\n              <span>').concat(a(e.change_amount),"</span>\n            </div>\n          "):'\n            <div class="flex" style="font-size: 9px;">\n              <span>Payment Method:</span>\n              <span>'.concat(e.payment_method,"</span>\n            </div>\n          "),"\n\n          ").concat(e.notes?'\n            <div class="line"></div>\n            <div style="font-size: 9px;">Notes: '.concat(e.notes,"</div>\n          "):"",'\n\n          <div class="line"></div>\n          <div class="center" style="font-size: 9px;">Thank you for your business!</div>\n          ').concat(m?'<div class="center" style="font-size: 9px; margin: 6px 0; white-space: pre-line;">'.concat(m,"</div>"):"","\n        </body>\n      </html>\n    ")},D=e=>{var t,n,r,i,l,o,c;const u=(null===(t=e.business)||void 0===t?void 0:t.logo_url)||"",d=(null===(n=e.business)||void 0===n||null===(r=n.settings)||void 0===r?void 0:r.receipt_header)||(null===s||void 0===s||null===(i=s.settings)||void 0===i?void 0:i.receipt_header)||"",m=(null===(l=e.business)||void 0===l||null===(o=l.settings)||void 0===o?void 0:o.receipt_footer)||(null===s||void 0===s||null===(c=s.settings)||void 0===c?void 0:c.receipt_footer)||"";return'\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <meta charset="utf-8">\n          <title>Receipt PDF - '.concat(e.transaction_type," ").concat(e.transaction_number,"</title>\n          <style>\n            @media print {\n              @page { \n                size: A4; \n                margin: 20mm;\n              }\n              body { margin: 0; }\n            }\n            body {\n              font-family: 'Courier New', monospace;\n              font-size: 12px;\n              line-height: 1.4;\n              margin: 0;\n              padding: 20px;\n              max-width: 400px;\n              margin: 0 auto;\n            }\n            .center { text-align: center; }\n            .bold { font-weight: bold; }\n            .line { border-bottom: 1px dashed #000; margin: 8px 0; }\n            .flex { display: flex; justify-content: space-between; }\n            .logo { \n              max-width: 150px; \n              max-height: 100px; \n              margin: 0 auto 10px auto; \n              display: block; \n            }\n            .header { \n              border-bottom: 2px solid #000; \n              padding-bottom: 15px; \n              margin-bottom: 15px; \n            }\n            .total { \n              border-top: 2px solid #000; \n              padding-top: 8px; \n              margin-top: 8px; \n              font-size: 14px;\n              font-weight: bold;\n            }\n            .reprint-notice { \n              background-color: #ffe6e6; \n              border: 2px solid #ff9999; \n              padding: 10px; \n              margin: 15px 0; \n              font-weight: bold;\n              text-align: center;\n            }\n            .item-row {\n              margin: 5px 0;\n              border-bottom: 1px dotted #ccc;\n              padding-bottom: 3px;\n            }\n          </style>\n        </head>\n        <body>\n          <div class=\"header center\">\n            ").concat(u?'<img src="'.concat(u,'" alt="Business Logo" class="logo" />'):"",'\n            <div class="bold" style="font-size: 18px;">').concat(e.business.name,"</div>\n            ").concat(e.business.address?"<div>".concat(e.business.address,"</div>"):"","\n            ").concat(e.business.phone?"<div>Tel: ".concat(e.business.phone,"</div>"):"","\n            ").concat(e.business.contact_email?"<div>Email: ".concat(e.business.contact_email,"</div>"):"","\n            ").concat(d?'<div style="margin: 10px 0; white-space: pre-line; font-style: italic;">'.concat(d,"</div>"):"",'\n          </div>\n\n          <div class="reprint-notice">\n            *** RECEIPT REPRINT ***<br>\n            Printed: ').concat(e.reprint_timestamp.toLocaleString(),'\n          </div>\n\n          <div style="margin: 15px 0;">\n            <div class="bold" style="font-size: 16px;">').concat(e.transaction_type,": ").concat(e.transaction_number,"</div>\n            <div>Original Date: ").concat(e.timestamp.toLocaleString(),"</div>\n            <div>Cashier: ").concat(e.cashier_name,"</div>\n            ").concat(e.customer?"<div>Customer: ".concat(e.customer.name,"</div>"):"<div>Customer: Walk-in Customer</div>",'\n          </div>\n\n          <div class="line"></div>\n\n          <div style="margin: 15px 0;">\n            <div class="bold" style="margin-bottom: 10px;">ITEMS:</div>\n            ').concat(e.items.map(e=>'\n              <div class="item-row">\n                <div class="bold">'.concat(e.product_name,'</div>\n                <div class="flex" style="margin-top: 3px;">\n                  <span>').concat(e.quantity," x ").concat(a(e.unit_price),'</span>\n                  <span class="bold">').concat(a(e.total_price),"</span>\n                </div>\n              </div>\n            ")).join(""),'\n          </div>\n\n          <div class="line"></div>\n\n          <div style="margin: 15px 0;">\n            <div class="flex">\n              <span>Subtotal:</span>\n              <span>').concat(a(e.subtotal),"</span>\n            </div>\n            ").concat(e.tax_amount>0?'\n              <div class="flex">\n                <span>Tax:</span>\n                <span>'.concat(a(e.tax_amount),"</span>\n              </div>\n            "):"","\n            ").concat(e.discount_amount>0?'\n              <div class="flex">\n                <span>Discount:</span>\n                <span style="color: green;">-'.concat(a(e.discount_amount),"</span>\n              </div>\n            "):"",'\n            \n            <div class="flex total">\n              <span>TOTAL AMOUNT:</span>\n              <span>').concat(a(e.total_amount),"</span>\n            </div>\n\n            ").concat("cash"===e.payment_method?'\n              <div style="margin-top: 10px;">\n                <div class="flex">\n                  <span>Cash Received:</span>\n                  <span>'.concat(a(e.received_amount),'</span>\n                </div>\n                <div class="flex">\n                  <span>Change Given:</span>\n                  <span>').concat(a(e.change_amount),"</span>\n                </div>\n              </div>\n            "):'\n              <div style="margin-top: 10px;">\n                <div class="flex">\n                  <span>Payment Method:</span>\n                  <span>'.concat(e.payment_method.toUpperCase(),"</span>\n                </div>\n              </div>\n            "),"\n          </div>\n\n          ").concat(e.notes?'\n            <div class="line"></div>\n            <div style="margin: 15px 0;">\n              <div class="bold">Notes:</div>\n              <div style="margin-top: 5px; font-style: italic;">'.concat(e.notes,"</div>\n            </div>\n          "):"",'\n\n          <div class="line"></div>\n          <div class="center" style="margin: 20px 0;">\n            <div class="bold">Thank you for your business!</div>\n            ').concat(m?'<div style="margin-top: 10px; white-space: pre-line; font-style: italic;">'.concat(m,"</div>"):"",'\n          </div>\n          \n          <div class="center" style="font-size: 10px; color: #666; margin-top: 30px;">\n            <div>This is a computer-generated receipt reprint.</div>\n            <div>Generated on: ').concat((new Date).toLocaleString(),"</div>\n          </div>\n        </body>\n      </html>\n    ")};if(v)return(0,Xa.jsx)(hs,{message:"Loading transaction history..."});return(0,Xa.jsxs)("div",{className:"space-y-6",children:[(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Sales History"}),(0,Xa.jsx)("p",{className:"text-gray-600",children:"View and manage your transaction history with advanced filtering"})]}),(0,Xa.jsxs)("div",{className:"mb-6 flex items-center space-x-4",children:[(0,Xa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Filter by Date:"}),(0,Xa.jsxs)("select",{value:C,onChange:e=>T(e.target.value),className:"border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,Xa.jsx)("option",{value:"today",children:"Today"}),(0,Xa.jsx)("option",{value:"yesterday",children:"Yesterday"}),(0,Xa.jsx)("option",{value:"this_week",children:"This Week"}),(0,Xa.jsx)("option",{value:"this_month",children:"This Month"})]}),(0,Xa.jsx)("button",{onClick:O,className:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Refresh"})]}),(0,Xa.jsx)("div",{className:"border-b border-gray-200",children:(0,Xa.jsxs)("nav",{className:"-mb-px flex space-x-8",children:[(0,Xa.jsxs)("button",{onClick:()=>c("sales"),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat("sales"===o?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:["Sales (",u.length,")"]}),(0,Xa.jsxs)("button",{onClick:()=>c("ongoing"),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat("ongoing"===o?"border-amber-500 text-amber-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:["On-Going (",m.length,")"]}),(0,Xa.jsxs)("button",{onClick:()=>c("invoices"),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat("invoices"===o?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:["Invoices (",f.length,")"]})]})}),(0,Xa.jsx)("div",{className:"bg-white shadow-sm rounded-lg",children:(0,Xa.jsx)("div",{className:"overflow-x-auto",children:"sales"===o?u.length>0?(0,Xa.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Xa.jsx)("thead",{className:"bg-gray-50",children:(0,Xa.jsxs)("tr",{children:[(0,Xa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sale #"}),(0,Xa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,Xa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),(0,Xa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Items"}),(0,Xa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),(0,Xa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment"}),(0,Xa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Xa.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Xa.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(e=>(0,Xa.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Xa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.sale_number}),(0,Xa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.created_at).toLocaleString()}),(0,Xa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:P(e.customer_id)}),(0,Xa.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[e.items.length," items"]}),(0,Xa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:a(e.total_amount)}),(0,Xa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Xa.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("cash"===e.payment_method?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"),children:e.payment_method})}),(0,Xa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Xa.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("completed"===e.status?"bg-green-100 text-green-800":"ongoing"===e.status?"bg-amber-100 text-amber-800":"bg-red-100 text-red-800"),children:"completed"===e.status?"Completed":"ongoing"===e.status?"On-Going":"Cancelled"})}),(0,Xa.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:[(0,Xa.jsx)("button",{onClick:()=>F(e,"sale"),className:"text-green-600 hover:text-green-900",title:"Reprint Receipt",children:(0,Xa.jsx)(fu,{className:"h-4 w-4"})}),(0,Xa.jsx)("button",{onClick:()=>{da("Detail view not yet implemented")},className:"text-blue-600 hover:text-blue-900",title:"View Details",children:(0,Xa.jsx)(Ed,{className:"h-4 w-4"})})]})]},e.id))})]}):(0,Xa.jsxs)("div",{className:"text-center py-12",children:[(0,Xa.jsx)(dc,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,Xa.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No sales found"}),(0,Xa.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by making your first sale."})]}):"ongoing"===o?m.length>0?(0,Xa.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Xa.jsx)("thead",{className:"bg-gray-50",children:(0,Xa.jsxs)("tr",{children:[(0,Xa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sale #"}),(0,Xa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,Xa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),(0,Xa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Items"}),(0,Xa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),(0,Xa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Paid"}),(0,Xa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Balance Due"}),(0,Xa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Xa.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Xa.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:m.map(e=>(0,Xa.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Xa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.sale_number}),(0,Xa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.created_at).toLocaleString()}),(0,Xa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:P(e.customer_id)}),(0,Xa.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[e.items.length," items"]}),(0,Xa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:a(e.total_amount)}),(0,Xa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:a(e.downpayment_amount||0)}),(0,Xa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-red-600",children:a(e.balance_due||0)}),(0,Xa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Xa.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-amber-100 text-amber-800",children:"On-Going"})}),(0,Xa.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:[(0,Xa.jsx)("button",{onClick:()=>(e=>{const t={mode:"settle",saleId:e.id,originalSale:e,remainingBalance:e.balance_due||0,items:e.items||[],customer:e.customer_id?{id:e.customer_id,name:e.customer_name}:null};localStorage.setItem("pos-settle-data",JSON.stringify(t)),l("/pos",{state:{settleMode:!0,settleData:t}}),da.success("Redirecting to POS to complete payment...")})(e),className:"text-green-600 hover:text-green-900 font-medium",title:"Settle Payment",children:"Settle"}),(0,Xa.jsx)("button",{onClick:()=>F(e,"sale"),className:"text-blue-600 hover:text-blue-900",title:"Reprint Receipt",children:(0,Xa.jsx)(fu,{className:"h-4 w-4"})})]})]},e.id))})]}):(0,Xa.jsxs)("div",{className:"text-center py-12",children:[(0,Xa.jsx)(dc,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,Xa.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No ongoing sales found"}),(0,Xa.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Ongoing sales will appear here when customers make partial payments."})]}):f.length>0?(0,Xa.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Xa.jsx)("thead",{className:"bg-gray-50",children:(0,Xa.jsxs)("tr",{children:[(0,Xa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Invoice #"}),(0,Xa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,Xa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),(0,Xa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Items"}),(0,Xa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),(0,Xa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Xa.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Xa.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map(e=>(0,Xa.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Xa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.invoice_number}),(0,Xa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.created_at).toLocaleString()}),(0,Xa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:P(e.customer_id)}),(0,Xa.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[e.items.length," items"]}),(0,Xa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:a(e.total_amount)}),(0,Xa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Xa.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("draft"===e.status?"bg-yellow-100 text-yellow-800":"sent"===e.status?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"),children:e.status})}),(0,Xa.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:[(0,Xa.jsx)("button",{onClick:()=>F(e,"invoice"),className:"text-green-600 hover:text-green-900",title:"Reprint Receipt",children:(0,Xa.jsx)(fu,{className:"h-4 w-4"})}),(0,Xa.jsx)("button",{onClick:()=>{da("Detail view not yet implemented")},className:"text-blue-600 hover:text-blue-900",title:"View Details",children:(0,Xa.jsx)(Ed,{className:"h-4 w-4"})})]})]},e.id))})]}):(0,Xa.jsxs)("div",{className:"text-center py-12",children:[(0,Xa.jsx)(zu,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,Xa.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No invoices found"}),(0,Xa.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Create invoices from the POS interface."})]})})}),j&&_&&(0,Xa.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,Xa.jsxs)("div",{className:"relative top-10 mx-auto p-5 border w-full max-w-2xl shadow-lg rounded-md bg-white",children:[(0,Xa.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Xa.jsxs)("h3",{className:"text-lg font-medium text-gray-900",children:["Reprint Receipt - ",_.transaction_type," #",_.transaction_number]}),(0,Xa.jsx)("button",{onClick:()=>N(!1),className:"text-gray-400 hover:text-gray-600",children:(0,Xa.jsx)(Sc,{className:"h-6 w-6"})})]}),(0,Xa.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,Xa.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Xa.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Receipt Preview"}),(0,Xa.jsxs)("div",{className:"bg-white p-4 rounded border font-mono text-xs max-h-96 overflow-y-auto",children:[(0,Xa.jsxs)("div",{className:"text-center border-b pb-2 mb-3",children:[(null===(e=_.business.settings)||void 0===e?void 0:e.receipt_header)&&(0,Xa.jsx)("div",{className:"text-xs mb-2 font-bold border-b pb-1",children:_.business.settings.receipt_header.split("\n").map((e,t)=>(0,Xa.jsx)("div",{children:e},t))}),(0,Xa.jsx)("h2",{className:"font-bold text-sm",children:_.business.name}),(0,Xa.jsx)("p",{className:"text-xs",children:_.business.address}),(0,Xa.jsx)("p",{className:"text-xs",children:_.business.contact_email}),(0,Xa.jsx)("p",{className:"text-xs",children:_.business.phone})]}),(0,Xa.jsxs)("div",{className:"border-b pb-2 mb-2",children:[(0,Xa.jsxs)("p",{children:[_.transaction_type,": ",_.transaction_number]}),(0,Xa.jsxs)("p",{children:["Date: ",_.timestamp.toLocaleString()]}),_.customer&&(0,Xa.jsxs)("p",{children:["Customer: ",_.customer.name]}),(0,Xa.jsx)("p",{children:"Cashier: Staff"}),_.reprint&&(0,Xa.jsxs)("p",{className:"text-red-600 font-bold",children:["REPRINT - ",_.reprint_timestamp.toLocaleString()]})]}),(0,Xa.jsx)("div",{className:"border-b pb-2 mb-2",children:_.items.map((e,t)=>(0,Xa.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("p",{className:"truncate",children:e.product_name}),(0,Xa.jsxs)("p",{className:"text-xs text-gray-600",children:[e.quantity," x ",a(e.unit_price)]})]}),(0,Xa.jsx)("p",{children:a(e.total_price)})]},t))}),(0,Xa.jsxs)("div",{className:"border-b pb-2 mb-2",children:[(0,Xa.jsxs)("div",{className:"flex justify-between",children:[(0,Xa.jsx)("span",{children:"Subtotal:"}),(0,Xa.jsx)("span",{children:a(_.subtotal)})]}),_.tax_amount>0&&(0,Xa.jsxs)("div",{className:"flex justify-between",children:[(0,Xa.jsx)("span",{children:"Tax:"}),(0,Xa.jsx)("span",{children:a(_.tax_amount)})]}),_.discount_amount>0&&(0,Xa.jsxs)("div",{className:"flex justify-between",children:[(0,Xa.jsx)("span",{children:"Discount:"}),(0,Xa.jsxs)("span",{children:["-",a(_.discount_amount)]})]}),(0,Xa.jsxs)("div",{className:"flex justify-between font-bold border-t pt-1",children:[(0,Xa.jsx)("span",{children:"TOTAL:"}),(0,Xa.jsx)("span",{children:a(_.total_amount)})]}),_.payment_method&&(0,Xa.jsxs)(Xa.Fragment,{children:[(0,Xa.jsxs)("div",{className:"flex justify-between",children:[(0,Xa.jsx)("span",{children:"Payment:"}),(0,Xa.jsx)("span",{children:_.payment_method.toUpperCase()})]}),_.received_amount&&(0,Xa.jsxs)(Xa.Fragment,{children:[(0,Xa.jsxs)("div",{className:"flex justify-between",children:[(0,Xa.jsx)("span",{children:"Received:"}),(0,Xa.jsx)("span",{children:a(_.received_amount)})]}),(0,Xa.jsxs)("div",{className:"flex justify-between",children:[(0,Xa.jsx)("span",{children:"Change:"}),(0,Xa.jsx)("span",{children:a(_.change_amount||0)})]})]})]})]}),(0,Xa.jsxs)("div",{className:"text-center text-xs",children:[(0,Xa.jsx)("p",{children:"Thank you for your business!"}),(null===(t=_.business.settings)||void 0===t?void 0:t.receipt_footer)&&(0,Xa.jsx)("div",{className:"mt-2 border-t pt-2 font-bold",children:_.business.settings.receipt_footer.split("\n").map((e,t)=>(0,Xa.jsx)("div",{children:e},t))}),_.notes&&(0,Xa.jsxs)("p",{className:"mt-2 text-gray-600",children:["Note: ",_.notes]})]})]})]}),(0,Xa.jsxs)("div",{className:"space-y-4",children:[(0,Xa.jsxs)("div",{children:[(0,Xa.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Reprint Options"}),(0,Xa.jsxs)("div",{className:"space-y-3",children:[(0,Xa.jsx)("button",{onClick:async()=>{try{var e;w("print");const l=L();if("bluetooth"===((null===s||void 0===s||null===(e=s.settings)||void 0===e?void 0:e.printer_type)||"local")){var t;if(!Lu.getStatus().isConnected)return void da("Auto-print skipped - Bluetooth printer not connected");await Lu.printReceipt(l,null===s||void 0===s||null===(t=s.settings)||void 0===t?void 0:t.printer_settings),da.success("Receipt auto-printed via Bluetooth")}else try{var n,r,a;await Au.configurePrinter({id:"system-default",name:(null===s||void 0===s||null===(n=s.settings)||void 0===n?void 0:n.selected_printer)||"Default System Printer",type:"local",settings:null===s||void 0===s||null===(r=s.settings)||void 0===r?void 0:r.printer_settings}),await Au.printReceipt(l,null===s||void 0===s||null===(a=s.settings)||void 0===a?void 0:a.printer_settings),da.success("Receipt auto-printed to system printer")}catch(i){await R(l),da.success("Receipt printed (browser)")}N(!1),S(null),E(null)}catch(l){console.error("Print error:",l),da.error("Failed to print receipt")}finally{w(null)}},disabled:"print"===b,className:"w-full btn-primary flex items-center justify-center",children:"print"===b?(0,Xa.jsx)(fs,{}):(0,Xa.jsxs)(Xa.Fragment,{children:[(0,Xa.jsx)(fu,{className:"h-4 w-4 mr-2"}),"Print Receipt"]})}),(0,Xa.jsx)("button",{onClick:async()=>{try{w("pdf");const e=L(),t=D(e),n=document.createElement("iframe");n.style.position="absolute",n.style.left="-9999px",n.style.width="800px",n.style.height="600px",document.body.appendChild(n);const r=n.contentDocument;r.open(),r.write(t),r.close(),setTimeout(()=>{try{n.contentWindow.focus(),n.contentWindow.print(),setTimeout(()=>{try{document.body.removeChild(n)}catch(Jn){console.log("PDF iframe cleanup error (non-critical)")}},3e3);const e="".concat(k.type,"_").concat("sale"===k.type?k.sale_number:k.invoice_number,"_reprint.pdf");da.success("PDF ready for download: ".concat(e))}catch(e){console.error("PDF generation error:",e),da.error("PDF generation failed - try using browser print dialog")}},1e3)}catch(e){console.error("PDF save error:",e),da.error("Failed to save PDF")}finally{w(null)}},disabled:"pdf"===b,className:"w-full btn-secondary flex items-center justify-center",children:"pdf"===b?(0,Xa.jsx)(fs,{}):(0,Xa.jsxs)(Xa.Fragment,{children:[(0,Xa.jsx)(ed,{className:"h-4 w-4 mr-2"}),"Save as PDF"]})})]})]}),(0,Xa.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Xa.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Transaction Info"}),(0,Xa.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Xa.jsxs)("div",{className:"flex justify-between",children:[(0,Xa.jsx)("span",{children:"Type:"}),(0,Xa.jsx)("span",{className:"font-medium",children:_.transaction_type})]}),(0,Xa.jsxs)("div",{className:"flex justify-between",children:[(0,Xa.jsx)("span",{children:"Number:"}),(0,Xa.jsx)("span",{className:"font-medium",children:_.transaction_number})]}),(0,Xa.jsxs)("div",{className:"flex justify-between",children:[(0,Xa.jsx)("span",{children:"Original Date:"}),(0,Xa.jsx)("span",{children:_.timestamp.toLocaleDateString()})]}),(0,Xa.jsxs)("div",{className:"flex justify-between",children:[(0,Xa.jsx)("span",{children:"Customer:"}),(0,Xa.jsx)("span",{children:(null===(n=_.customer)||void 0===n?void 0:n.name)||"Walk-in"})]}),(0,Xa.jsxs)("div",{className:"flex justify-between",children:[(0,Xa.jsx)("span",{children:"Items:"}),(0,Xa.jsx)("span",{children:_.items.length})]})]})]})]})]}),(0,Xa.jsx)("div",{className:"flex justify-end space-x-4 mt-6",children:(0,Xa.jsx)("button",{onClick:()=>N(!1),className:"btn-secondary",children:"Close"})})]})})]})},Td=e=>{let{children:t,allowedRoles:n=[]}=e;const{user:r,loading:a}=as();return a?(0,Xa.jsx)(hs,{}):r?n.length>0&&!n.includes(r.role)?(0,Xa.jsx)(fe,{to:"/unauthorized",replace:!0}):t:(0,Xa.jsx)(fe,{to:"/login",replace:!0})};const Od=function(){const{user:e,loading:t}=as();return t?(0,Xa.jsx)(hs,{}):(0,Xa.jsx)("div",{className:"min-h-screen bg-gray-50",children:e?(0,Xa.jsx)(ps,{children:(0,Xa.jsxs)(ge,{children:[(0,Xa.jsx)(he,{path:"/",element:"super_admin"===e.role?(0,Xa.jsx)(fe,{to:"/super-admin",replace:!0}):"business_admin"===e.role?(0,Xa.jsx)(fe,{to:"/business",replace:!0}):(0,Xa.jsx)(fe,{to:"/pos",replace:!0})}),(0,Xa.jsx)(he,{path:"/super-admin/*",element:(0,Xa.jsx)(Td,{allowedRoles:["super_admin"],children:(0,Xa.jsx)(zo,{children:(0,Xa.jsxs)(ge,{children:[(0,Xa.jsx)(he,{index:!0,element:(0,Xa.jsx)(yc,{})}),(0,Xa.jsx)(he,{path:"businesses",element:(0,Xa.jsx)(Ec,{})})]})})})}),(0,Xa.jsx)(he,{path:"/business/*",element:(0,Xa.jsx)(Td,{allowedRoles:["business_admin","cashier"],children:(0,Xa.jsx)(oc,{children:(0,Xa.jsxs)(ge,{children:[(0,Xa.jsx)(he,{index:!0,element:(0,Xa.jsx)(Cc,{})}),(0,Xa.jsx)(he,{path:"products",element:(0,Xa.jsx)(Eu,{})}),(0,Xa.jsx)(he,{path:"categories",element:(0,Xa.jsx)(Tu,{})}),(0,Xa.jsx)(he,{path:"customers",element:(0,Xa.jsx)(Ou,{})}),(0,Xa.jsx)(he,{path:"users",element:(0,Xa.jsx)(Pu,{})}),(0,Xa.jsx)(he,{path:"reports",element:(0,Xa.jsx)(td,{})}),(0,Xa.jsx)(he,{path:"profit-report",element:(0,Xa.jsx)(od,{})}),(0,Xa.jsx)(he,{path:"settings",element:(0,Xa.jsx)(Yu,{})})]})})})}),(0,Xa.jsx)(he,{path:"/pos/*",element:(0,Xa.jsx)(Td,{allowedRoles:["business_admin","cashier"],children:(0,Xa.jsx)(hc,{children:(0,Xa.jsxs)(ge,{children:[(0,Xa.jsx)(he,{index:!0,element:(0,Xa.jsx)(kd,{})}),(0,Xa.jsx)(he,{path:"sales-history",element:(0,Xa.jsx)(Cd,{})})]})})})}),(0,Xa.jsx)(he,{path:"/unauthorized",element:(0,Xa.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,Xa.jsxs)("div",{className:"text-center",children:[(0,Xa.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"403"}),(0,Xa.jsx)("p",{className:"text-gray-600 mb-4",children:"You don't have permission to access this page."}),(0,Xa.jsx)("button",{onClick:()=>window.history.back(),className:"btn-primary",children:"Go Back"})]})})}),(0,Xa.jsx)(he,{path:"*",element:(0,Xa.jsx)(fe,{to:"/",replace:!0})})]})}):(0,Xa.jsxs)(ge,{children:[(0,Xa.jsx)(he,{path:"/login",element:(0,Xa.jsx)(po,{})}),(0,Xa.jsx)(he,{path:"*",element:(0,Xa.jsx)(fe,{to:"/login",replace:!0})})]})})};s.createRoot(document.getElementById("root")).render((0,Xa.jsx)(r.StrictMode,{children:(0,Xa.jsx)(bo,{children:(0,Xa.jsxs)(rs,{children:[(0,Xa.jsx)(Od,{}),(0,Xa.jsx)(ua,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"}}})]})})}))})()})();
//# sourceMappingURL=main.b47f8db1.js.map